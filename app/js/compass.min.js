!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cp=e()}}(function(){var e;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function n(e){var t={code:a(e),globals:i(d),fields:i(_),dataSources:i(p),defs:u};return d={},_={},p={},t}function a(e){if("string"==typeof e)return e;var t=m[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}t=t||{};var o=t.constants||e("./constants"),s=(t.functions||e("./functions"))(a),u=t.functionDefs?t.functionDefs(a):{},c=t.idWhiteList?r(t.idWhiteList):null,l=t.idBlackList?r(t.idBlackList):null,f=0,E=t.fieldVar||"datum",O=t.globalVar||"signals",d={},_={},p={},T="function"==typeof O?O:function(e){return O+'["'+e+'"]'},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(o.hasOwnProperty(t))return o[t];if(c)return c.hasOwnProperty(t)?t:(d[t]=1,T(t));if(l&&l.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(a).join("\n")},MemberExpression:function(e){var t=!e.computed,n=a(e.object);t&&(f+=1);var r=a(e.property);return n===E&&(_[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=s.hasOwnProperty(t)&&s[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,d,_,p):r+"("+n.map(a).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(a).join(",")+"]"},BinaryExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+a(e.argument)+")"},ConditionalExpression:function(e){return"("+a(e.test)+"?"+a(e.consequent)+":"+a(e.alternate)+")"},LogicalExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(a).join(",")+"}"},Property:function(e){f+=1;var t=a(e.key);return f-=1,t+":"+a(e.value)},ExpressionStatement:function(e){return a(e.expression)}};return n.functions=s,n.functionDefs=u,n.constants=o,n}},{"./constants":3,"./functions":4}],3:[function(e,t,n){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],4:[function(e,t,n){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],5:[function(e,t,n){var r=e("./parser"),i=e("./codegen"),a=t.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));e[r]='"use strict"; return ('+i.code+");";var o=Function.apply(null,e);return i.fn=e.length>8?function(){return o.apply(i,arguments)}:function(e,t,n,r,a,s,u){return o.call(i,e,t,n,r,a,s,u)},i};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":2,"./constants":3,"./functions":4,"./parser":6}],6:[function(e,t,n){t.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&ye.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function s(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&ye.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function u(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function c(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function l(e){if(Re&&c(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Ie;ve>Ie;)if(e=Se.charCodeAt(Ie),i(e))++Ie;else{if(!a(e))break;++Ie,13===e&&10===Se.charCodeAt(Ie)&&++Ie,++Ce,De=Ie,t=!0}}function E(e){var t,r,i,a=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(ve>Ie&&n(Se[Ie])))return"";i=Se[Ie++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(a)}function O(){var e,t,r,i;for(e=Se[Ie],t=0,"}"===e&&F({},Ne.UnexpectedToken,"ILLEGAL");ve>Ie&&(e=Se[Ie++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&F({},Ne.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function d(){var e,t;for(e=Se.charCodeAt(Ie++),t=String.fromCharCode(e),92===e&&(117!==Se.charCodeAt(Ie)&&F({},Ne.UnexpectedToken,"ILLEGAL"),++Ie,e=E("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||F({},Ne.UnexpectedToken,"ILLEGAL"),t=e);ve>Ie&&(e=Se.charCodeAt(Ie),s(e));)++Ie,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Se.charCodeAt(Ie)&&F({},Ne.UnexpectedToken,"ILLEGAL"),++Ie,e=E("u"),e&&"\\"!==e&&s(e.charCodeAt(0))||F({},Ne.UnexpectedToken,"ILLEGAL"),t+=e);return t}function _(){var e,t;for(e=Ie++;ve>Ie;){if(t=Se.charCodeAt(Ie),92===t)return Ie=e,d();if(!s(t))break;++Ie}return Se.slice(e,Ie)}function p(){var e,t,n;return e=Ie,t=92===Se.charCodeAt(Ie)?d():_(),n=1===t.length?ge.Identifier:l(t)?ge.Keyword:"null"===t?ge.NullLiteral:"true"===t||"false"===t?ge.BooleanLiteral:ge.Identifier,{type:n,value:t,lineNumber:Ce,lineStart:De,start:e,end:Ie}}function T(){var e,t,n,r,i=Ie,a=Se.charCodeAt(Ie),o=Se[Ie];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ie,xe.tokenize&&(40===a?xe.openParenToken=xe.tokens.length:123===a&&(xe.openCurlyToken=xe.tokens.length)),{type:ge.Punctuator,value:String.fromCharCode(a),lineNumber:Ce,lineStart:De,start:i,end:Ie};default:if(e=Se.charCodeAt(Ie+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ie+=2,{type:ge.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:Ce,lineStart:De,start:i,end:Ie};case 33:case 61:return Ie+=2,61===Se.charCodeAt(Ie)&&++Ie,{type:ge.Punctuator,value:Se.slice(i,Ie),lineNumber:Ce,lineStart:De,start:i,end:Ie}}}return r=Se.substr(Ie,4),">>>="===r?(Ie+=4,{type:ge.Punctuator,value:r,lineNumber:Ce,lineStart:De,start:i,end:Ie}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Ie+=3,{type:ge.Punctuator,value:n,lineNumber:Ce,lineStart:De,start:i,end:Ie}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Ie+=2,{type:ge.Punctuator,value:t,lineNumber:Ce,lineStart:De,start:i,end:Ie}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Ie,{type:ge.Punctuator,value:o,lineNumber:Ce,lineStart:De,start:i,end:Ie}):void F({},Ne.UnexpectedToken,"ILLEGAL")))}function m(e){for(var t="";ve>Ie&&n(Se[Ie]);)t+=Se[Ie++];return 0===t.length&&F({},Ne.UnexpectedToken,"ILLEGAL"),o(Se.charCodeAt(Ie))&&F({},Ne.UnexpectedToken,"ILLEGAL"),{type:ge.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Ce,lineStart:De,start:e,end:Ie}}function g(e){for(var n="0"+Se[Ie++];ve>Ie&&r(Se[Ie]);)n+=Se[Ie++];return(o(Se.charCodeAt(Ie))||t(Se.charCodeAt(Ie)))&&F({},Ne.UnexpectedToken,"ILLEGAL"),{type:ge.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:Ce,lineStart:De,start:e,end:Ie}}function h(){var n,i,a;if(a=Se[Ie],e(t(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=Ie,n="","."!==a){if(n=Se[Ie++],a=Se[Ie],"0"===n){if("x"===a||"X"===a)return++Ie,m(i);if(r(a))return g(i);a&&t(a.charCodeAt(0))&&F({},Ne.UnexpectedToken,"ILLEGAL")}for(;t(Se.charCodeAt(Ie));)n+=Se[Ie++];a=Se[Ie]}if("."===a){for(n+=Se[Ie++];t(Se.charCodeAt(Ie));)n+=Se[Ie++];a=Se[Ie]}if("e"===a||"E"===a)if(n+=Se[Ie++],a=Se[Ie],"+"!==a&&"-"!==a||(n+=Se[Ie++]),t(Se.charCodeAt(Ie)))for(;t(Se.charCodeAt(Ie));)n+=Se[Ie++];else F({},Ne.UnexpectedToken,"ILLEGAL");return o(Se.charCodeAt(Ie))&&F({},Ne.UnexpectedToken,"ILLEGAL"),{type:ge.NumericLiteral,value:parseFloat(n),lineNumber:Ce,lineStart:De,start:i,end:Ie}}function M(){var t,n,i,o,s,u,c,l,f="",d=!1;for(c=Ce,l=De,t=Se[Ie],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Ie,++Ie;ve>Ie;){if(i=Se[Ie++],i===t){t="";break}if("\\"===i)if(i=Se[Ie++],i&&a(i.charCodeAt(0)))++Ce,"\r"===i&&"\n"===Se[Ie]&&++Ie,De=Ie;else switch(i){case"u":case"x":"{"===Se[Ie]?(++Ie,f+=O()):(u=Ie,s=E(i),s?f+=s:(Ie=u,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="	";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\x0B";break;default:r(i)?(o="01234567".indexOf(i),0!==o&&(d=!0),ve>Ie&&r(Se[Ie])&&(d=!0,o=8*o+"01234567".indexOf(Se[Ie++]),"0123".indexOf(i)>=0&&ve>Ie&&r(Se[Ie])&&(o=8*o+"01234567".indexOf(Se[Ie++]))),f+=String.fromCharCode(o)):f+=i}else{if(a(i.charCodeAt(0)))break;f+=i}}return""!==t&&F({},Ne.UnexpectedToken,"ILLEGAL"),{type:ge.StringLiteral,value:f,octal:d,startLineNumber:c,startLineStart:l,lineNumber:Ce,lineStart:De,start:n,end:Ie}}function A(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void F({},Ne.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){F({},Ne.InvalidRegExp)}try{return new RegExp(e,t)}catch(a){return null}}function N(){var t,n,r,i,o;for(t=Se[Ie],e("/"===t,"Regular expression literal must start with a slash"),n=Se[Ie++],r=!1,i=!1;ve>Ie;)if(t=Se[Ie++],n+=t,"\\"===t)t=Se[Ie++],a(t.charCodeAt(0))&&F({},Ne.UnterminatedRegExp),n+=t;else if(a(t.charCodeAt(0)))F({},Ne.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||F({},Ne.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function y(){var e,t,n,r;for(t="",n="";ve>Ie&&(e=Se[Ie],s(e.charCodeAt(0)));)if(++Ie,"\\"===e&&ve>Ie)if(e=Se[Ie],"u"===e){if(++Ie,r=Ie,e=E("u"))for(n+=e,t+="\\u";Ie>r;++r)t+=Se[r];else Ie=r,n+="u",t+="\\u";k({},Ne.UnexpectedToken,"ILLEGAL")}else t+="\\",k({},Ne.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function S(){var e,t,n,r;return Le=null,f(),e=Ie,t=N(),n=y(),r=A(t.value,n.value),xe.tokenize?{type:ge.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Ce,lineStart:De,start:e,end:Ie}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ie}}function R(){var e,t,n,r;return f(),e=Ie,t={start:{line:Ce,column:Ie-De}},n=S(),t.end={line:Ce,column:Ie-De},xe.tokenize||(xe.tokens.length>0&&(r=xe.tokens[xe.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||xe.tokens.pop())),xe.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Ie],loc:t})),n}function I(e){return e.type===ge.Identifier||e.type===ge.Keyword||e.type===ge.BooleanLiteral||e.type===ge.NullLiteral}function C(){var e,t;if(e=xe.tokens[xe.tokens.length-1],!e)return R();if("Punctuator"===e.type){if("]"===e.value)return T();if(")"===e.value)return t=xe.tokens[xe.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?T():R();if("}"===e.value){if(xe.tokens[xe.openCurlyToken-3]&&"Keyword"===xe.tokens[xe.openCurlyToken-3].type){if(t=xe.tokens[xe.openCurlyToken-4],!t)return T()}else{if(!xe.tokens[xe.openCurlyToken-4]||"Keyword"!==xe.tokens[xe.openCurlyToken-4].type)return T();if(t=xe.tokens[xe.openCurlyToken-5],!t)return R()}return T()}return R()}return"Keyword"===e.type&&"this"!==e.value?R():T()}function D(){var e;return f(),Ie>=ve?{type:ge.EOF,lineNumber:Ce,lineStart:De,start:Ie,end:Ie}:(e=Se.charCodeAt(Ie),o(e)?p():40===e||41===e||59===e?T():39===e||34===e?M():46===e?t(Se.charCodeAt(Ie+1))?h():T():t(e)?h():xe.tokenize&&47===e?C():T())}function v(){var e,t,n,r;return f(),e={start:{line:Ce,column:Ie-De}},t=D(),e.end={line:Ce,column:Ie-De},t.type!==ge.EOF&&(n=Se.slice(t.start,t.end),r={type:he[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),xe.tokens.push(r)),t}function L(){var e;return e=Le,Ie=e.end,Ce=e.lineNumber,De=e.lineStart,Le="undefined"!=typeof xe.tokens?v():D(),Ie=e.end,Ce=e.lineNumber,De=e.lineStart,e}function U(){var e,t,n;e=Ie,t=Ce,n=De,Le="undefined"!=typeof xe.tokens?v():D(),Ie=e,Ce=t,De=n}function x(){this.line=Ce,this.column=Ie-De}function V(){this.start=new x,this.end=null}function P(e){e.type===ge.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function b(){Ie=Le.start,Le.type===ge.StringLiteral?(Ce=Le.startLineNumber,De=Le.startLineStart):(Ce=Le.lineNumber,De=Le.lineStart),xe.range&&(this.range=[Ie,0]),xe.loc&&(this.loc=new V)}function Y(e){xe.range&&(this.range=[e.start,0]),xe.loc&&(this.loc=new P(e))}function w(){var e,t,n,r;return e=Ie,t=Ce,n=De,f(),r=Ce!==t,Ie=e,Ce=t,De=n,r}function F(t,n){var r,i=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+a),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-De+1):(r=new Error("Line "+Ce+": "+a),r.index=Ie,r.lineNumber=Ce,r.column=Ie-De+1),r.description=a,r}function k(){try{F.apply(null,arguments)}catch(e){if(!xe.errors)throw e;xe.errors.push(e)}}function H(e){if(e.type===ge.EOF&&F(e,Ne.UnexpectedEOS),e.type===ge.NumericLiteral&&F(e,Ne.UnexpectedNumber),e.type===ge.StringLiteral&&F(e,Ne.UnexpectedString),e.type===ge.Identifier&&F(e,Ne.UnexpectedIdentifier),e.type===ge.Keyword){if(u(e.value))F(e,Ne.UnexpectedReserved);else if(Re&&c(e.value))return void k(e,Ne.StrictReservedWord);F(e,Ne.UnexpectedToken,e.value)}F(e,Ne.UnexpectedToken,e.value)}function X(e){var t=L();t.type===ge.Punctuator&&t.value===e||H(t)}function W(e){if(xe.errors){var t=Le;t.type!==ge.Punctuator&&t.value!==e?k(t,Ne.UnexpectedToken,t.value):L()}else X(e)}function G(e){return Le.type===ge.Punctuator&&Le.value===e}function B(e){return Le.type===ge.Keyword&&Le.value===e}function j(){var e;return 59===Se.charCodeAt(Ie)||G(";")?void L():(e=Ce,f(),void(Ce===e&&(Le.type===ge.EOF||G("}")||H(Le))))}function Z(){var e=[],t=new b;for(X("[");!G("]");)G(",")?(L(),e.push(null)):(e.push(ce()),G("]")||X(","));return L(),t.finishArrayExpression(e)}function Q(){var e,t=new b;return e=L(),e.type===ge.StringLiteral||e.type===ge.NumericLiteral?(Re&&e.octal&&k(e,Ne.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function K(){var e,t,n,r,i=new b;return e=Le,e.type===ge.Identifier?(n=Q(),X(":"),r=ce(),i.finishProperty("init",n,r)):e.type!==ge.EOF&&e.type!==ge.Punctuator?(t=Q(),X(":"),r=ce(),i.finishProperty("init",t,r)):void H(e)}function q(){var e,t,n,r,i=[],a={},o=String,s=new b;for(X("{");!G("}");)e=K(),t=e.key.type===Me.Identifier?e.key.name:o(e.key.value),r="init"===e.kind?Ae.Data:"get"===e.kind?Ae.Get:Ae.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===Ae.Data?Re&&r===Ae.Data?k({},Ne.StrictDuplicateProperty):r!==Ae.Data&&k({},Ne.AccessorDataProperty):r===Ae.Data?k({},Ne.AccessorDataProperty):a[n]&r&&k({},Ne.AccessorGetSet),a[n]|=r):a[n]=r,i.push(e),G("}")||W(",");return X("}"),s.finishObjectExpression(i)}function z(){var e;return X("("),++Ue.parenthesisCount,e=le(),X(")"),e}function J(){var e,t,n,r;if(G("("))return z();if(G("["))return Z();if(G("{"))return q();if(e=Le.type,r=new b,e===ge.Identifier||Ve[Le.value])n=r.finishIdentifier(L().value);else if(e===ge.StringLiteral||e===ge.NumericLiteral)Re&&Le.octal&&k(Le,Ne.StrictOctalLiteral),n=r.finishLiteral(L());else{if(e===ge.Keyword)throw new Error("Disabled.");e===ge.BooleanLiteral?(t=L(),t.value="true"===t.value,n=r.finishLiteral(t)):e===ge.NullLiteral?(t=L(),t.value=null,n=r.finishLiteral(t)):G("/")||G("/=")?(n="undefined"!=typeof xe.tokens?r.finishLiteral(R()):r.finishLiteral(S()),U()):H(L())}return n}function $(){var e=[];if(X("("),!G(")"))for(;ve>Ie&&(e.push(ce()),!G(")"));)W(",");return X(")"),e}function ee(){var e,t=new b;return e=L(),I(e)||H(e),t.finishIdentifier(e.value)}function te(){return X("."),ee()}function ne(){var e;return X("["),e=le(),X("]"),e}function re(){var e,t,n,r,i=Ue.allowIn;for(r=Le,Ue.allowIn=!0,e=J();;)if(G("."))n=te(),e=new Y(r).finishMemberExpression(".",e,n);else if(G("("))t=$(),e=new Y(r).finishCallExpression(e,t);else{if(!G("["))break;n=ne(),e=new Y(r).finishMemberExpression("[",e,n)}return Ue.allowIn=i,e}function ie(){var e=re();if(Le.type===ge.Punctuator&&(G("++")||G("--"))&&!w())throw new Error("Disabled.");return e}function ae(){var e,t,n;if(Le.type!==ge.Punctuator&&Le.type!==ge.Keyword)t=ie();else{if(G("++")||G("--"))throw new Error("Disabled.");if(G("+")||G("-")||G("~")||G("!"))n=Le,e=L(),t=ae(),t=new Y(n).finishUnaryExpression(e.value,t);else{if(B("delete")||B("void")||B("typeof"))throw new Error("Disabled.");t=ie()}}return t}function oe(e,t){var n=0;if(e.type!==ge.Punctuator&&e.type!==ge.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function se(){var e,t,n,r,i,a,o,s,u,c;if(e=Le,u=ae(),r=Le,i=oe(r,Ue.allowIn),0===i)return u;for(r.prec=i,L(),t=[e,Le],o=ae(),a=[u,r,o];(i=oe(Le,Ue.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),t.pop(),n=new Y(t[t.length-1]).finishBinaryExpression(s,u,o),a.push(n);r=L(),r.prec=i,a.push(r),t.push(Le),n=ae(),a.push(n)}for(c=a.length-1,n=a[c],t.pop();c>1;)n=new Y(t.pop()).finishBinaryExpression(a[c-1].value,a[c-2],n),c-=2;return n}function ue(){var e,t,n,r,i;return i=Le,e=se(),G("?")&&(L(),t=Ue.allowIn,Ue.allowIn=!0,n=ce(),Ue.allowIn=t,X(":"),r=ce(),e=new Y(i).finishConditionalExpression(e,n,r)),e}function ce(){var e,t,n,r;return e=Ue.parenthesisCount,r=Le,t=Le,n=ue()}function le(){var e=ce();if(G(","))throw new Error("Disabled.");return e}function fe(e){var t=le();return j(),e.finishExpressionStatement(t)}function Ee(){var e,t,n=Le.type;if(n===ge.EOF&&H(Le),n===ge.Punctuator&&"{"===Le.value)throw new Error("Disabled.");if(t=new b,n===ge.Punctuator)switch(Le.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===ge.Keyword)throw new Error("Disabled.");return e=le(),j(),t.finishExpressionStatement(e)}function Oe(){if(Le.type===ge.Keyword)switch(Le.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return Ee()}return Le.type!==ge.EOF?Ee():void 0}function de(){for(var e,t,n,r,i=[];ve>Ie&&(t=Le,t.type===ge.StringLiteral)&&(e=Oe(),i.push(e),e.expression.type===Me.Literal);)n=Se.slice(t.start+1,t.end-1),"use strict"===n?(Re=!0,r&&k(r,Ne.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;ve>Ie&&(e=Oe(),"undefined"!=typeof e);)i.push(e);return i}function _e(){var e,t;return f(),U(),t=new b,Re=!0,e=de(),t.finishProgram(e)}function pe(){var e,t,n,r=[];for(e=0;e<xe.tokens.length;++e)t=xe.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),xe.range&&(n.range=t.range),xe.loc&&(n.loc=t.loc),r.push(n);xe.tokens=r}function Te(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Se=e,Ie=0,Ce=Se.length>0?1:0,De=0,ve=Se.length,Le=null,Ue={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},xe={},t=t||{},t.tokens=!0,xe.tokens=[],xe.tokenize=!0,xe.openParenToken=-1,xe.openCurlyToken=-1,xe.range="boolean"==typeof t.range&&t.range,xe.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(xe.errors=[]);try{if(U(),Le.type===ge.EOF)return xe.tokens;for(L();Le.type!==ge.EOF;)try{L()}catch(i){if(xe.errors){xe.errors.push(i);break}throw i}pe(),r=xe.tokens,"undefined"!=typeof xe.errors&&(r.errors=xe.errors)}catch(a){throw a}finally{xe={}}return r}function me(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),Se=e,Ie=0,Ce=Se.length>0?1:0,De=0,ve=Se.length,Le=null,Ue={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},xe={},"undefined"!=typeof t&&(xe.range="boolean"==typeof t.range&&t.range,xe.loc="boolean"==typeof t.loc&&t.loc,xe.loc&&null!==t.source&&void 0!==t.source&&(xe.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(xe.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(xe.errors=[]));try{n=_e(),"undefined"!=typeof xe.tokens&&(pe(),n.tokens=xe.tokens),"undefined"!=typeof xe.errors&&(n.errors=xe.errors)}catch(i){throw i}finally{xe={}}return n}var ge,he,Me,Ae,Ne,ye,Se,Re,Ie,Ce,De,ve,Le,Ue,xe;ge={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},he={},he[ge.BooleanLiteral]="Boolean",he[ge.EOF]="<end>",he[ge.Identifier]="Identifier",he[ge.Keyword]="Keyword",he[ge.NullLiteral]="Null",he[ge.NumericLiteral]="Numeric",he[ge.Punctuator]="Punctuator",he[ge.StringLiteral]="String",he[ge.RegularExpression]="RegularExpression",Me={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},Ae={Data:1,Get:2,Set:4},Ne={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ye={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},Y.prototype=b.prototype={finish:function(){xe.range&&(this.range[1]=Ie),xe.loc&&(this.loc.end=new x,xe.source&&(this.loc.source=xe.source))},finishArrayExpression:function(e){return this.type=Me.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=Me.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?Me.LogicalExpression:Me.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=Me.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=Me.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=Me.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=Me.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=Me.Literal,this.value=e.value,this.raw=Se.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=Me.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=Me.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=Me.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=Me.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=Me.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var Ve={"if":1,"this":1};return{tokenize:Te,parse:me}}()},{}],7:[function(e,t,n){"use strict";var r=e("vega-lite/src/channel"),i=e("vega-lite/src/mark");n.DEFAULT_PROJECTION_OPT={omitDotPlot:!1,maxCardinalityForAutoAddOrdinal:50,alwaysAddHistogram:!0,maxAdditionalVariables:1},function(e){e[e.BOTH="both"]="BOTH",e[e.AGGREGATED="aggregated"]="AGGREGATED",e[e.DISAGGREGATED="disaggregated"]="DISAGGREGATED"}(n.TableType||(n.TableType={}));var a=n.TableType;!function(e){e[e.AUTO="auto"]="AUTO",e[e.BIN="bin"]="BIN",e[e.CAST="cast"]="CAST",e[e.NONE="none"]="NONE"}(n.QuantitativeDimensionType||(n.QuantitativeDimensionType={}));var o=n.QuantitativeDimensionType;n.DEFAULT_AGGREGATION_OPTIONS={tableTypes:a.BOTH,genDimQ:o.AUTO,minCardinalityForBin:20,omitDotPlot:!1,omitMeasureOnly:!1,omitDimensionOnly:!0,addCountForDimensionOnly:!0,aggrList:[void 0,"mean"],timeUnitList:["year"],consistentAutoQ:!0},n.DEFAULT_SCALE_OPTION={rescaleQuantitative:[void 0]},n.DEFAULT_SPEC_OPTION={
markList:[i.Mark.POINT,i.Mark.BAR,i.Mark.LINE,i.Mark.AREA,i.Mark.TEXT,i.Mark.TICK],channelList:[r.X,r.Y,r.ROW,r.COLUMN,r.SIZE,r.COLOR,r.TEXT,r.DETAIL],alwaysGenerateTableAsHeatmap:!0,maxGoodCardinalityForFacets:5,maxCardinalityForFacets:20,maxGoodCardinalityForColor:7,maxCardinalityForColor:20,maxCardinalityForShape:6,omitDotPlot:!1,omitDotPlotWithExtraEncoding:!0,omitDotPlotWithFacet:!0,omitDotPlotWithOnlyCount:!1,omitMultipleNonPositionalChannels:!0,omitNonTextAggrWithAllDimsOnFacets:!0,omitRawWithXYBothDimension:!0,omitShapeWithBin:!0,omitShapeWithTimeDimension:!0,omitSizeOnBar:!0,omitLengthForLogScale:!0,omitStackedAverage:!0,omitTranspose:!0}},{"vega-lite/src/channel":31,"vega-lite/src/mark":36}],8:[function(e,t,n){"use strict";var r=e("./consts"),i=e("./gen/gen"),a=e("./rank/rank"),o=e("./util"),s=e("./trans/trans");n.consts=r,n.gen=i,n.rank=a,n.util=o,n.trans=s,n.auto="-, sum",n.version="0.7.1"},{"./consts":7,"./gen/gen":11,"./rank/rank":15,"./trans/trans":19,"./util":20}],9:[function(e,t,n){"use strict";function r(e,t,n,r){function f(t){t=u.duplicate(t),t.key=t.map(function(e){return a.shortenFieldDef(e)}).join(a.DELIM),e.push(t)}function E(){if(r.omitMeasureOnly||r.omitDimensionOnly){var e=!1,t=!1,n=!1;if(g.forEach(function(r){i.isDimension(r)?t=!0:(e=!0,r.aggregate||(n=!0))}),!t&&!n&&r.omitMeasureOnly)return;if(!e&&(r.addCountForDimensionOnly&&(g.push(i.count()),f(g),g.pop()),r.omitDimensionOnly))return}r.omitDotPlot&&1===g.length||f(g)}function O(e,t,n,r){var i=t===!0||null===t,a=t===!1||null===t;r?i&&(g[e].aggregate=r,m(e+1,!0,n),delete g[e].aggregate):a&&m(e+1,!1,n)}function d(e,t,n){g[e].bin=!0,m(e+1,t,n),delete g[e].bin}function _(e,a,f){var E=t[e],_=a===!0||null===a;if(g[e]={field:E.field,type:E.type},E.aggregate===s.AggregateOp.COUNT)_&&(g[e].aggregate=E.aggregate,m(e+1,!0,f));else if(E._aggregate)O(e,a,f,E._aggregate);else if(E._raw)O(e,a,f,void 0);else if(E._bin)d(e,a,f);else if(r.aggrList.forEach(function(t){r.consistentAutoQ&&f!==l&&f!==t||O(e,a,t,t)}),(!r.consistentAutoQ||u.isin(f,[l,"bin","cast","autocast"]))&&!h){var p=i.cardinality(E,n)>r.minCardinalityForBin,T=r.genDimQ===c.QuantitativeDimensionType.AUTO,M=r.genDimQ===c.QuantitativeDimensionType.BIN||T&&p,A=r.genDimQ===c.QuantitativeDimensionType.CAST||T&&!p;M&&u.isin(f,[l,"bin","autocast"])&&d(e,a,T?"autocast":"bin"),A&&u.isin(f,[l,"cast","autocast"])&&(g[e].type=o.Type.ORDINAL,m(e+1,a,T?"autocast":"cast"),g[e].type=o.Type.QUANTITATIVE)}}function p(e,t,n,r){g[e].timeUnit=r,m(e+1,t,n),delete g[e].timeUnit}function T(e,n,i){var a=t[e];g[e]={field:a.field,type:a.type},a._timeUnit?p(e,n,i,a._timeUnit):r.timeUnitList.forEach(function(t){void 0===t?n||m(e+1,!1,i):p(e,n,i,t)})}function m(e,n,r){if(e===t.length)return void E();var i=t[e];switch(i.type){case o.Type.QUANTITATIVE:_(e,n,r);break;case o.Type.TEMPORAL:T(e,n,r);break;case o.Type.ORDINAL:case o.Type.NOMINAL:default:g[e]=i,m(e+1,n,r)}}void 0===r&&(r={}),r=u.extend({},c.DEFAULT_AGGREGATION_OPTIONS,r);var g=new Array(t.length),h=u.any(t,function(e){return e.type===o.Type.NOMINAL||e.type===o.Type.ORDINAL}),M=r.tableTypes===c.TableType.AGGREGATED?!0:r.tableTypes===c.TableType.DISAGGREGATED?!1:null;return m(0,M,l),e}var i=e("vega-lite/src/fielddef"),a=e("vega-lite/src/shorthand"),o=e("vega-lite/src/type"),s=e("vega-lite/src/aggregate"),u=e("../util"),c=e("../consts"),l="*";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../consts":7,"../util":20,"vega-lite/src/aggregate":30,"vega-lite/src/fielddef":34,"vega-lite/src/shorthand":38,"vega-lite/src/type":40}],10:[function(e,t,n){"use strict";function r(e,t,n,r){function a(u){if(u===t.length)return void(E.encoding(s,n,r)&&e.push(o.duplicate(s)));var c=t[u];for(var f in r.channelList){var O=r.channelList[f],d=i.isDimension(c),_=l.getSupportedRole(O);O in s||!(d&&_.dimension||!d&&_.measure)||!E.channel[O](s,c,n,r)||(s[O]=c,a(u+1),delete s[O])}}void 0===r&&(r=u.DEFAULT_SPEC_OPTION);var s={};return a(0),e}var i=e("vega-lite/src/fielddef"),a=e("vega-lite/src/encoding"),o=e("../util"),s=e("./marks"),u=e("../consts"),c=e("vega-lite/src/aggregate"),l=e("vega-lite/src/channel"),f=e("vega-lite/src/type");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var E;!function(e){function t(e,t,n){if(n.omitDotPlot)return!1;if(n.omitTranspose&&e.y)return!1;if(n.omitDotPlotWithFacet&&(e.row||e.column))return!1;if(n.omitDotPlotWithExtraEncoding&&o.keys(e).length>1)return!1;if(n.omitDotPlotWithOnlyCount){if(e.x&&e.x.aggregate===c.AggregateOp.COUNT&&!e.y)return!1;if(e.y&&e.y.aggregate===c.AggregateOp.COUNT&&!e.x)return!1}return!0}function n(e){var t=!1,n=!1;for(var r in e){var a=r,o=e[a];if(o.aggregate&&(t=!0),i.isDimension(o)&&a!==l.ROW&&a!==l.COLUMN&&(n=!0),t&&n)break}return t&&!n}function r(e,t,r){if((e.row||e.column)&&r.omitNonTextAggrWithAllDimsOnFacets&&n(e))return!1;var o=i.isDimension(e.x),s=i.isDimension(e.y);if(r.omitRawWithXYBothDimension&&o&&s&&!a.isAggregate(e))return!1;if(r.omitTranspose){if(o!==s)return e.y.type!==f.Type.NOMINAL&&e.y.type!==f.Type.ORDINAL||!i.isMeasure(e.x)?!(s||!o||e.x.type===f.Type.NOMINAL||e.x.type===f.Type.ORDINAL):!0;if(e.y.type===f.Type.TEMPORAL||e.x.type===f.Type.TEMPORAL){if(e.y.type===f.Type.TEMPORAL&&e.x.type!==f.Type.TEMPORAL)return!1}else if(e.x.field>e.y.field)return!1}return!0}function u(e,n,i){if(e.text)return s.rule.text(e,n,i);var a=!!e.x,o=!!e.y;return a!==o?t(e,n,i):a&&o?r(e,n,i):!1}var E;!function(e){function t(e,t,n,r){return a(e,t,n,r)?i.isMeasure(t)||i.cardinality(t,n)<=r.maxCardinalityForColor:!1}function n(e,t,n,r){return a(e,t,n,r)?r.omitShapeWithBin&&t.bin&&t.type===f.Type.QUANTITATIVE?!1:r.omitShapeWithTimeDimension&&t.timeUnit&&t.type===f.Type.TEMPORAL?!1:i.cardinality(t,n)<=r.maxCardinalityForShape:!1}function r(){return!0}function a(e,t,n,r){return!r.omitMultipleNonPositionalChannels||!(e.color||e.size||e.shape)}e.x=r,e.y=r,e.text=r,e.detail=r,e.size=a,e.row=r,e.column=r,e.color=t,e.shape=n}(E=e.channel||(e.channel={})),e.encoding=u}(E||(E={}))},{"../consts":7,"../util":20,"./marks":12,"vega-lite/src/aggregate":30,"vega-lite/src/channel":31,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/type":40}],11:[function(e,t,n){"use strict";var r=e("./aggregates"),i=e("./projections"),a=e("./projections"),o=e("./specs"),s=e("./encodings"),u=e("./marks");n.aggregates=r["default"],n.projections=i["default"],n.projections.key=a.key,n.specs=o["default"],n.encodings=s["default"],n.marks=u["default"]},{"./aggregates":9,"./encodings":10,"./marks":12,"./projections":13,"./specs":14}],12:[function(e,t,n){"use strict";function r(e,t,n){return n.markList.filter(function(r){var i=null===o.getEncodingMappingError({mark:r,encoding:e});return i&&f[r](e,t,n)})}var i=e("vega-lite/src/encoding"),a=e("vega-lite/src/fielddef"),o=e("vega-lite/src/validate"),s=e("vega-lite/src/type"),u=e("vega-lite/src/scale"),c=e("vega-lite/src/aggregate"),l=e("../util");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var f;!function(e){function t(e,t,n){return a.cardinality(e,t)<=n.maxCardinalityForFacets}function n(e,n,r){return e.row&&!t(e.row,n,r)?!1:!e.column||t(e.column,n,r)}function r(e,t,r){if(!n(e,t,r))return!1;if(e.x&&e.y){var i=a.isDimension(e.x),o=a.isDimension(e.y);if(i&&o){if(e.shape)return!1;if(e.color&&a.isDimension(e.color))return!1}}else{if(r.omitDotPlot)return!1;if(r.omitTranspose&&e.y)return!1;if(r.omitDotPlotWithExtraEncoding&&l.keys(e).length>1)return!1}return!0}function o(e,t,n){if(e.x||e.y){if(i.isAggregate(e))return!1;var r=a.isDimension(e.x),o=a.isDimension(e.y);return!r&&(!e.y||o)||!o&&(!e.x||r)}return!1}function f(e,t,r){if(!n(e,t,r))return!1;if(!e.x&&!e.y)return!1;if(r.omitSizeOnBar&&void 0!==e.size)return!1;if(r.omitLengthForLogScale){if(e.x&&e.x.scale&&e.x.scale.type===u.ScaleType.LOG)return!1;if(e.y&&e.y.scale&&e.y.scale.type===u.ScaleType.LOG)return!1}var i=(!e.x||void 0===e.x.aggregate)!=(!e.y||void 0===e.y.aggregate);if(i){var o=(!e.x||a.isDimension(e.x))!==(!e.y||a.isDimension(e.y));if(o){var s;return s=e.x?e.x.aggregate:e.y.aggregate,!(r.omitStackedAverage&&s===c.AggregateOp.MEAN&&e.color)}}return!1}function E(e,t,r){return n(e,t,r)?e.x.type===s.Type.TEMPORAL&&!!e.x.timeUnit&&e.y.type===s.Type.QUANTITATIVE&&!!e.y.aggregate:!1}function O(e,t,r){if(!n(e,t,r))return!1;if(!E(e,t,r))return!1;if(r.omitLengthForLogScale){if(e.x&&e.x.scale&&e.x.scale.type===u.ScaleType.LOG)return!1;if(e.y&&e.y.scale&&e.y.scale.type===u.ScaleType.LOG)return!1}return!(r.omitStackedAverage&&e.y.aggregate===c.AggregateOp.MEAN&&e.color)}function d(e,t,n){return(e.row||e.column)&&e.text&&e.text.aggregate&&!e.x&&!e.y&&!e.size&&(!n.alwaysGenerateTableAsHeatmap||!e.color)}e.point=r,e.tick=o,e.bar=f,e.line=E,e.area=O,e.text=d}(f=n.rule||(n.rule={}))},{"../util":20,"vega-lite/src/aggregate":30,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/scale":37,"vega-lite/src/type":40,"vega-lite/src/validate":42}],13:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={}),n=s.extend({},u.DEFAULT_PROJECTION_OPT,n);var r=[],f=[],E=[],O=!1,d=!1,_={};e.forEach(function(e,i){if(_[e.field]=i,e.selected)r.push(e),l(e)||e.type===c.TEMPORAL?O=!0:d=!0;else if(e.selected!==!1&&!o.isCount(e)){if(o.isDimension(e)&&!n.maxCardinalityForAutoAddOrdinal&&o.cardinality(e,t,15)>n.maxCardinalityForAutoAddOrdinal)return;f.push(e)}}),f.sort(i(O,d,_));var p=s.chooseKorLess(f,n.maxAdditionalVariables);return p.forEach(function(e){var t=r.concat(e);if(t.length>0){if(n.omitDotPlot&&1===t.length)return;E.push(t)}}),E.forEach(function(e){e.key=a(e)}),E}function i(e,t,n){return function(t,r){return t.type!==r.type?e?f[r.type]-f[t.type]:f[t.type]-f[r.type]:n[t.field]-n[r.field]}}function a(e){return e.map(function(e){return o.isCount(e)?"count":e.field}).join(",")}var o=e("vega-lite/src/fielddef"),s=e("../util"),u=e("../consts"),c=e("vega-lite/src/type"),l=o.isDimension;Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var f={nominal:0,ordinal:0,temporal:2,quantitative:3};n.key=a},{"../consts":7,"../util":20,"vega-lite/src/fielddef":34,"vega-lite/src/type":40}],14:[function(e,t,n){"use strict";function r(e,t,n,r,a){void 0===r&&(r={}),r=s.extend({},u.DEFAULT_SPEC_OPTION,r);var o=c["default"]([],t,n,r);return a?o.reduce(function(e,t){var a=E.shortenEncoding(t);return e[a]=i([],t,n,r),e},{}):o.reduce(function(e,t){return i(e,t,n,r)},e)}function i(e,t,n,r){return l["default"](t,n,r).forEach(function(i){var o=s.duplicate({encoding:t,config:r.config});o.mark=i,o.data=r.data,o=a(o,n,r);var u=f.encoding(o,n,r);o._info=u,e.push(o)}),e}function a(e,t,n){"text"===e.mark&&n.alwaysGenerateTableAsHeatmap&&(e.encoding.color=e.encoding.text);var r=e.encoding;return["x","y"].forEach(function(e){var n=r[e];if(n&&o.isMeasure(n)&&!o.isCount(n)){var i=t[n.field];i&&i.stdev/i.mean<.01&&(n.scale={zero:!1})}}),e}var o=e("vega-lite/src/fielddef"),s=e("../util"),u=e("../consts"),c=e("./encodings"),l=e("./marks"),f=e("../rank/rank"),E=e("vega-lite/src/shorthand");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../consts":7,"../rank/rank":15,"../util":20,"./encodings":10,"./marks":12,"vega-lite/src/fielddef":34,"vega-lite/src/shorthand":38}],15:[function(e,t,n){"use strict";var r=e("./rankEncodings");n.encoding=r["default"]},{"./rankEncodings":16}],16:[function(e,t,n){"use strict";function r(e,t,r,o){var l=[],d=u.keys(e.encoding),_=e.mark,p=e.encoding,T=i.reduce(e.encoding,function(e,t,n){var r=c.shortenFieldDef(t),i=e[r]=e[r]||[];return i.push({channel:n,fieldDef:t}),e},{});return u.forEach(T,function(i){var s=i.map(function(e){return e.channel+c.ASSIGN+c.shortenFieldDef(e.fieldDef)+" "+(o&&o[e.fieldDef.field]?"[x]":"[ ]")}),u=i.map(function(i){var s=a.isDimension(i.fieldDef)?n.dimensionScore:n.measureScore,u=s(i.fieldDef,i.channel,e.mark,t,r);return!o||o[i.fieldDef.field]?u:Math.pow(u,.125)});l.push({reason:s.join(" | "),score:Math.max.apply(null,u)})}),"text"===_||p.x&&p.y&&s(p.x)!==s(p.y)&&l.push({reason:"OxQ plot",score:.8}),d.length>1&&_!==f.Mark.TEXT&&(p.x&&p.y||p.geo||p.text||l.push({reason:"unused position",score:E})),l.push({reason:"mark="+_,score:O[_]}),{score:l.reduce(function(e,t){return e*t.score},1),features:l}}var i=e("vega-lite/src/encoding"),a=e("vega-lite/src/fielddef"),o=e("vega-lite/src/channel"),s=a.isDimension,u=e("../util"),c=e("vega-lite/src/shorthand"),l=e("vega-lite/src/type"),f=e("vega-lite/src/mark"),E=.5,O={line:.99,area:.98,bar:.97,tick:.96,point:.95,circle:.94,square:.94,text:.8},d={},_={},p=.1,T=.01;d.minor=.01,d.pos=1,d.Y_T=.8,d.facet_text=1,d.facet_good=.675,d.facet_ok=.55,d.facet_bad=.4,d.color_good=.7,d.color_ok=.65,d.color_bad=.3,d.color_stack=.6,d.shape=.6,d.detail=.5,d.bad=p,d.terrible=T,_.pos=1,_.size=.6,_.color=.5,_.text=.4,_.bad=p,_.terrible=T,n.dimensionScore=function(e,t,n,r,i){var s=a.cardinality(e,r);switch(t){case o.X:return e.type===l.Type.NOMINAL||e.type===l.Type.ORDINAL?d.pos-d.minor:d.pos;case o.Y:return e.type===l.Type.NOMINAL||e.type===l.Type.ORDINAL?d.pos-d.minor:e.type===l.Type.TEMPORAL?d.Y_T:d.pos-d.minor;case o.COLUMN:return"text"===n?d.facet_text:s<=i.maxGoodCardinalityForFacets?d.facet_good:s<=i.maxCardinalityForFacets?d.facet_ok:d.facet_bad;case o.ROW:return"text"===n?d.facet_text:(s<=i.maxGoodCardinalityForFacets?d.facet_good:s<=i.maxCardinalityForFacets?d.facet_ok:d.facet_bad)-d.minor;case o.COLOR:var u=e.bin&&e.type===l.Type.QUANTITATIVE||e.timeUnit&&e.type===l.Type.TEMPORAL,c=n===f.Mark.BAR||n===f.Mark.AREA;return u?d.color_bad:c?d.color_stack:s<=i.maxGoodCardinalityForColor?d.color_good:s<=i.maxCardinalityForColor?d.color_ok:d.color_bad;case o.SHAPE:return s<=i.maxCardinalityForShape?d.shape:T;case o.DETAIL:return d.detail}return T},n.dimensionScore.consts=d,n.measureScore=function(e,t,n,r,i){switch(t){case o.X:return _.pos;case o.Y:return _.pos;case o.SIZE:return n===f.Mark.BAR||n===f.Mark.TEXT||n===f.Mark.LINE?p:_.size;case o.COLOR:return _.color;case o.TEXT:return _.text}return p},n.measureScore.consts=_,Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../util":20,"vega-lite/src/channel":31,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/mark":36,"vega-lite/src/shorthand":38,"vega-lite/src/type":40}],17:[function(e,t,n){"use strict";n.DEFAULT_MARKTYPE_TRANSITIONS={AREA_BAR:{name:"AREA_BAR",cost:1},AREA_LINE:{name:"AREA_LINE",cost:1},AREA_POINT:{name:"AREA_POINT",cost:1},AREA_TEXT:{name:"AREA_TEXT",cost:1},AREA_TICK:{name:"AREA_TICK",cost:1},BAR_LINE:{name:"BAR_LINE",cost:1},BAR_POINT:{name:"BAR_POINT",cost:1},BAR_TEXT:{name:"BAR_TEXT",cost:1},BAR_TICK:{name:"BAR_TICK",cost:1},LINE_POINT:{name:"LINE_POINT",cost:1},LINE_TEXT:{name:"LINE_TEXT",cost:1},LINE_TICK:{name:"LINE_TICK",cost:1},POINT_TEXT:{name:"POINT_TEXT",cost:1},POINT_TICK:{name:"POINT_TICK",cost:1},TEXT_TICK:{name:"TEXT_TICK",cost:1}},n.DEFAULT_MARKTYPE_TRANSITION_LIST=["AREA_BAR","AREA_LINE","AREA_POINT","AREA_TEXT","AREA_TICK","BAR_LINE","BAR_POINT","BAR_TEXT","BAR_TICK","LINE_POINT","LINE_TEXT","LINE_TICK","POINT_TEXT","POINT_TICK","TEXT_TICK"],n.DEFAULT_TRANSFORM_TRANSITIONS={SCALE:{name:"SCALE",cost:1},SORT:{name:"SORT",cost:1},BIN:{name:"BIN",cost:1},AGGREGATE:{name:"AGGREGATE",cost:1},SETTYPE:{name:"SETTYPE",cost:1},ADD_FILTER:{name:"ADD_FILTER",cost:1},REMOVE_FILTER:{name:"REMOVE_FILTER",cost:1},MODIFY_FILTER:{name:"MODIFY_FILTER",cost:1}},n.DEFAULT_TRANSFORM_TRANSITION_LIST=["SCALE","SORT","BIN","AGGREGATE","SETTYPE","ADD_FILTER","REMOVE_FILTER","MODIFY_FILTER"],n.CHANNELS_WITH_TRANSITION_ORDER=["x","y","color","shape","size","row","column","text"],n.DEFAULT_ENCODING_TRANSITIONS={ADD_X:{name:"ADD_X",cost:1},ADD_Y:{name:"ADD_Y",cost:1},ADD_COLOR:{name:"ADD_COLOR",cost:1},ADD_SHAPE:{name:"ADD_SHAPE",cost:1},ADD_SIZE:{name:"ADD_SIZE",cost:1},ADD_ROW:{name:"ADD_ROW",cost:1},ADD_COLUMN:{name:"ADD_COLUMN",cost:1},ADD_X_COUNT:{name:"ADD_X_COUNT",cost:1},ADD_Y_COUNT:{name:"ADD_Y_COUNT",cost:1},ADD_COLOR_COUNT:{name:"ADD_COLOR_COUNT",cost:1},ADD_SHAPE_COUNT:{name:"ADD_SHAPE_COUNT",cost:1},ADD_SIZE_COUNT:{name:"ADD_SIZE_COUNT",cost:1},ADD_ROW_COUNT:{name:"ADD_ROW_COUNT",cost:1},ADD_COLUMN_COUNT:{name:"ADD_COLUMN_COUNT",cost:1},REMOVE_X_COUNT:{name:"REMOVE_X_COUNT",cost:1},REMOVE_Y_COUNT:{name:"REMOVE_Y_COUNT",cost:1},REMOVE_COLOR_COUNT:{name:"REMOVE_COLOR_COUNT",cost:1},REMOVE_SHAPE_COUNT:{name:"REMOVE_SHAPE_COUNT",cost:1},REMOVE_SIZE_COUNT:{name:"REMOVE_SIZE_COUNT",cost:1},REMOVE_ROW_COUNT:{name:"REMOVE_ROW_COUNT",cost:1},REMOVE_COLUMN_COUNT:{name:"REMOVE_COLUMN_COUNT",cost:1},REMOVE_X:{name:"REMOVE_X",cost:1},REMOVE_Y:{name:"REMOVE_Y",cost:1},REMOVE_COLOR:{name:"REMOVE_COLOR",cost:1},REMOVE_SHAPE:{name:"REMOVE_SHAPE",cost:1},REMOVE_SIZE:{name:"REMOVE_SIZE",cost:1},REMOVE_ROW:{name:"REMOVE_ROW",cost:1},REMOVE_COLUMN:{name:"REMOVE_COLUMN",cost:1},MODIFY_X:{name:"MODIFY_X",cost:1},MODIFY_Y:{name:"MODIFY_Y",cost:1},MODIFY_COLOR:{name:"MODIFY_COLOR",cost:1},MODIFY_SHAPE:{name:"MODIFY_SHAPE",cost:1},MODIFY_SIZE:{name:"MODIFY_SIZE",cost:1},MODIFY_ROW:{name:"MODIFY_ROW",cost:1},MODIFY_COLUMN:{name:"MODIFY_COLUMN",cost:1},MODIFY_X_ADD_COUNT:{name:"MODIFY_X_ADD_COUNT",cost:1},MODIFY_Y_ADD_COUNT:{name:"MODIFY_Y_ADD_COUNT",cost:1},MODIFY_COLOR_ADD_COUNT:{name:"MODIFY_COLOR_ADD_COUNT",cost:1},MODIFY_SHAPE_ADD_COUNT:{name:"MODIFY_SHAPE_ADD_COUNT",cost:1},MODIFY_SIZE_ADD_COUNT:{name:"MODIFY_SIZE_ADD_COUNT",cost:1},MODIFY_ROW_ADD_COUNT:{name:"MODIFY_ROW_ADD_COUNT",cost:1},MODIFY_COLUMN_ADD_COUNT:{name:"MODIFY_COLUMN_ADD_COUNT",cost:1},MODIFY_X_REMOVE_COUNT:{name:"MODIFY_X_REMOVE_COUNT",cost:1},MODIFY_Y_REMOVE_COUNT:{name:"MODIFY_Y_REMOVE_COUNT",cost:1},MODIFY_COLOR_REMOVE_COUNT:{name:"MODIFY_COLOR_REMOVE_COUNT",cost:1},MODIFY_SHAPE_REMOVE_COUNT:{name:"MODIFY_SHAPE_REMOVE_COUNT",cost:1},MODIFY_SIZE_REMOVE_COUNT:{name:"MODIFY_SIZE_REMOVE_COUNT",cost:1},MODIFY_ROW_REMOVE_COUNT:{name:"MODIFY_ROW_REMOVE_COUNT",cost:1},MODIFY_COLUMN_REMOVE_COUNT:{name:"MODIFY_COLUMN_REMOVE_COUNT",cost:1},MOVE_X_COLUMN:{name:"MOVE_X_COLUMN",cost:1},MOVE_X_ROW:{name:"MOVE_X_ROW",cost:1},MOVE_X_SIZE:{name:"MOVE_X_SIZE",cost:1},MOVE_X_SHAPE:{name:"MOVE_X_SHAPE",cost:1},MOVE_X_COLOR:{name:"MOVE_X_COLOR",cost:1},MOVE_X_Y:{name:"MOVE_X_Y",cost:1},MOVE_Y_COLUMN:{name:"MOVE_Y_COLUMN",cost:1},MOVE_Y_ROW:{name:"MOVE_Y_ROW",cost:1},MOVE_Y_SIZE:{name:"MOVE_Y_SIZE",cost:1},MOVE_Y_SHAPE:{name:"MOVE_Y_SHAPE",cost:1},MOVE_Y_COLOR:{name:"MOVE_Y_COLOR",cost:1},MOVE_Y_X:{name:"MOVE_Y_X",cost:1},MOVE_COLOR_COLUMN:{name:"MOVE_COLOR_COLUMN",cost:1},MOVE_COLOR_ROW:{name:"MOVE_COLOR_ROW",cost:1},MOVE_COLOR_SIZE:{name:"MOVE_COLOR_SIZE",cost:1},MOVE_COLOR_SHAPE:{name:"MOVE_COLOR_SHAPE",cost:1},MOVE_COLOR_Y:{name:"MOVE_COLOR_Y",cost:1},MOVE_COLOR_X:{name:"MOVE_COLOR_X",cost:1},MOVE_SHAPE_COLUMN:{name:"MOVE_SHAPE_COLUMN",cost:1},MOVE_SHAPE_ROW:{name:"MOVE_SHAPE_ROW",cost:1},MOVE_SHAPE_SIZE:{name:"MOVE_SHAPE_SIZE",cost:1},MOVE_SHAPE_COLOR:{name:"MOVE_SHAPE_COLOR",cost:1},MOVE_SHAPE_Y:{name:"MOVE_SHAPE_Y",cost:1},MOVE_SHAPE_X:{name:"MOVE_SHAPE_X",cost:1},MOVE_SIZE_COLUMN:{name:"MOVE_SIZE_COLUMN",cost:1},MOVE_SIZE_ROW:{name:"MOVE_SIZE_ROW",cost:1},MOVE_SIZE_SHAPE:{name:"MOVE_SIZE_SHAPE",cost:1},MOVE_SIZE_COLOR:{name:"MOVE_SIZE_COLOR",cost:1},MOVE_SIZE_Y:{name:"MOVE_SIZE_Y",cost:1},MOVE_SIZE_X:{name:"MOVE_SIZE_X",cost:1},MOVE_ROW_COLUMN:{name:"MOVE_ROW_COLUMN",cost:1},MOVE_ROW_SIZE:{name:"MOVE_ROW_SIZE",cost:1},MOVE_ROW_SHAPE:{name:"MOVE_ROW_SHAPE",cost:1},MOVE_ROW_COLOR:{name:"MOVE_ROW_COLOR",cost:1},MOVE_ROW_Y:{name:"MOVE_ROW_Y",cost:1},MOVE_ROW_X:{name:"MOVE_ROW_X",cost:1},MOVE_COLUMN_ROW:{name:"MOVE_COLUMN_ROW",cost:1},MOVE_COLUMN_SIZE:{name:"MOVE_COLUMN_SIZE",cost:1},MOVE_COLUMN_SHAPE:{name:"MOVE_COLUMN_SHAPE",cost:1},MOVE_COLUMN_COLOR:{name:"MOVE_COLUMN_COLOR",cost:1},MOVE_COLUMN_Y:{name:"MOVE_COLUMN_Y",cost:1},MOVE_COLUMN_X:{name:"MOVE_COLUMN_X",cost:1},SWAP_X_Y:{name:"SWAP_X_Y",cost:1},SWAP_ROW_COLUMN:{name:"SWAP_ROW_COLUMN",cost:1},ceiling:{cost:4,alternatingCost:3}},n.TRANSITIONS={marktypeTransitions:n.DEFAULT_MARKTYPE_TRANSITIONS,transformTransitions:n.DEFAULT_TRANSFORM_TRANSITIONS,encodingTransitions:n.DEFAULT_ENCODING_TRANSITIONS},n.DEFAULT_TRANSITIONS={marktypeTransitions:{AREA_BAR:{name:"AREA_BAR",cost:.03},AREA_LINE:{name:"AREA_LINE",cost:.02},AREA_POINT:{name:"AREA_POINT",cost:.04},AREA_TEXT:{name:"AREA_TEXT",cost:.08},AREA_TICK:{name:"AREA_TICK",cost:.04},BAR_LINE:{name:"BAR_LINE",cost:.04},BAR_POINT:{name:"BAR_POINT",cost:.02},BAR_TEXT:{name:"BAR_TEXT",cost:.06},BAR_TICK:{name:"BAR_TICK",cost:.02},LINE_POINT:{name:"LINE_POINT",cost:.03},LINE_TEXT:{name:"LINE_TEXT",cost:.07},LINE_TICK:{name:"LINE_TICK",cost:.03},POINT_TEXT:{name:"POINT_TEXT",cost:.05},POINT_TICK:{name:"POINT_TICK",cost:.01},TEXT_TICK:{name:"TEXT_TICK",cost:.05}},transformTransitions:{SCALE:{name:"SCALE",cost:.6},SORT:{name:"SORT",cost:.61},BIN:{name:"BIN",cost:.62},AGGREGATE:{name:"AGGREGATE",cost:.63},ADD_FILTER:{name:"ADD_FILTER",cost:.65},REMOVE_FILTER:{name:"REMOVE_FILTER",cost:.65},MODIFY_FILTER:{name:"MODIFY_FILTER",cost:.64}},encodingTransitions:{ADD_X:{name:"ADD_X",cost:4.59},ADD_Y:{name:"ADD_Y",cost:4.59},ADD_COLOR:{name:"ADD_COLOR",cost:4.55},ADD_SHAPE:{name:"ADD_SHAPE",cost:4.51},ADD_SIZE:{name:"ADD_SIZE",cost:4.53},ADD_ROW:{name:"ADD_ROW",cost:4.57},ADD_COLUMN:{name:"ADD_COLUMN",cost:4.57},ADD_TEXT:{name:"ADD_TEXT",cost:4.49},ADD_X_COUNT:{name:"ADD_X_COUNT",cost:4.58},ADD_Y_COUNT:{name:"ADD_Y_COUNT",cost:4.58},ADD_COLOR_COUNT:{name:"ADD_COLOR_COUNT",cost:4.54},ADD_SHAPE_COUNT:{name:"ADD_SHAPE_COUNT",cost:4.5},ADD_SIZE_COUNT:{name:"ADD_SIZE_COUNT",cost:4.52},ADD_ROW_COUNT:{name:"ADD_ROW_COUNT",cost:4.56},ADD_COLUMN_COUNT:{name:"ADD_COLUMN_COUNT",cost:4.56},ADD_TEXT_COUNT:{name:"ADD_TEXT_COUNT",cost:4.48},REMOVE_X_COUNT:{name:"REMOVE_X_COUNT",cost:4.58},REMOVE_Y_COUNT:{name:"REMOVE_Y_COUNT",cost:4.58},REMOVE_COLOR_COUNT:{name:"REMOVE_COLOR_COUNT",cost:4.54},REMOVE_SHAPE_COUNT:{name:"REMOVE_SHAPE_COUNT",cost:4.5},REMOVE_SIZE_COUNT:{name:"REMOVE_SIZE_COUNT",cost:4.52},REMOVE_ROW_COUNT:{name:"REMOVE_ROW_COUNT",cost:4.56},REMOVE_COLUMN_COUNT:{name:"REMOVE_COLUMN_COUNT",cost:4.56},REMOVE_TEXT_COUNT:{name:"REMOVE_TEXT_COUNT",cost:4.48},REMOVE_X:{name:"REMOVE_X",cost:4.59},REMOVE_Y:{name:"REMOVE_Y",cost:4.59},REMOVE_COLOR:{name:"REMOVE_COLOR",cost:4.55},REMOVE_SHAPE:{name:"REMOVE_SHAPE",cost:4.51},REMOVE_SIZE:{name:"REMOVE_SIZE",cost:4.53},REMOVE_ROW:{name:"REMOVE_ROW",cost:4.57},REMOVE_COLUMN:{name:"REMOVE_COLUMN",cost:4.57},REMOVE_TEXT:{name:"REMOVE_TEXT",cost:4.49},MODIFY_X:{name:"MODIFY_X",cost:4.71},MODIFY_Y:{name:"MODIFY_Y",cost:4.71},MODIFY_COLOR:{name:"MODIFY_COLOR",cost:4.67},MODIFY_SHAPE:{name:"MODIFY_SHAPE",cost:4.63},MODIFY_SIZE:{name:"MODIFY_SIZE",cost:4.65},MODIFY_ROW:{name:"MODIFY_ROW",cost:4.69},MODIFY_COLUMN:{name:"MODIFY_COLUMN",cost:4.69},MODIFY_TEXT:{name:"MODIFY_TEXT",cost:4.61},MODIFY_X_ADD_COUNT:{name:"MODIFY_X_ADD_COUNT",cost:4.7},MODIFY_Y_ADD_COUNT:{name:"MODIFY_Y_ADD_COUNT",cost:4.7},MODIFY_COLOR_ADD_COUNT:{name:"MODIFY_COLOR_ADD_COUNT",cost:4.66},MODIFY_SHAPE_ADD_COUNT:{name:"MODIFY_SHAPE_ADD_COUNT",cost:4.62},MODIFY_SIZE_ADD_COUNT:{name:"MODIFY_SIZE_ADD_COUNT",cost:4.64},MODIFY_ROW_ADD_COUNT:{name:"MODIFY_ROW_ADD_COUNT",cost:4.68},MODIFY_COLUMN_ADD_COUNT:{name:"MODIFY_COLUMN_ADD_COUNT",cost:4.68},MODIFY_TEXT_ADD_COUNT:{name:"MODIFY_TEXT_ADD_COUNT",cost:4.6},MODIFY_X_REMOVE_COUNT:{name:"MODIFY_X_REMOVE_COUNT",cost:4.7},MODIFY_Y_REMOVE_COUNT:{name:"MODIFY_Y_REMOVE_COUNT",cost:4.7},MODIFY_COLOR_REMOVE_COUNT:{name:"MODIFY_COLOR_REMOVE_COUNT",cost:4.66},MODIFY_SHAPE_REMOVE_COUNT:{name:"MODIFY_SHAPE_REMOVE_COUNT",cost:4.62},MODIFY_SIZE_REMOVE_COUNT:{name:"MODIFY_SIZE_REMOVE_COUNT",cost:4.64},MODIFY_ROW_REMOVE_COUNT:{name:"MODIFY_ROW_REMOVE_COUNT",cost:4.68},MODIFY_COLUMN_REMOVE_COUNT:{name:"MODIFY_COLUMN_REMOVE_COUNT",cost:4.68},MODIFY_TEXT_REMOVE_COUNT:{name:"MODIFY_TEXT_REMOVE_COUNT",cost:4.6},MOVE_X_ROW:{name:"MOVE_X_ROW",cost:4.45},MOVE_X_COLUMN:{name:"MOVE_X_COLUMN",cost:4.43},MOVE_X_SIZE:{name:"MOVE_X_SIZE",cost:4.46},MOVE_X_SHAPE:{name:"MOVE_X_SHAPE",cost:4.46},MOVE_X_COLOR:{name:"MOVE_X_COLOR",cost:4.46},MOVE_X_Y:{name:"MOVE_X_Y",cost:4.44},MOVE_X_TEXT:{name:"MOVE_X_TEXT",cost:4.46},MOVE_Y_ROW:{name:"MOVE_Y_ROW",cost:4.43},MOVE_Y_COLUMN:{name:"MOVE_Y_COLUMN",cost:4.45},MOVE_Y_SIZE:{name:"MOVE_Y_SIZE",cost:4.46},MOVE_Y_SHAPE:{name:"MOVE_Y_SHAPE",cost:4.46},MOVE_Y_COLOR:{name:"MOVE_Y_COLOR",cost:4.46},MOVE_Y_X:{name:"MOVE_Y_X",cost:4.44},MOVE_Y_TEXT:{name:"MOVE_Y_TEXT",cost:4.46},MOVE_COLOR_ROW:{name:"MOVE_COLOR_ROW",cost:4.47},MOVE_COLOR_COLUMN:{name:"MOVE_COLOR_COLUMN",cost:4.47},MOVE_COLOR_SIZE:{name:"MOVE_COLOR_SIZE",cost:4.43},MOVE_COLOR_SHAPE:{name:"MOVE_COLOR_SHAPE",cost:4.43},MOVE_COLOR_Y:{name:"MOVE_COLOR_Y",cost:4.46},MOVE_COLOR_X:{name:"MOVE_COLOR_X",cost:4.46},MOVE_COLOR_TEXT:{name:"MOVE_COLOR_TEXT",cost:4.43},MOVE_SHAPE_ROW:{name:"MOVE_SHAPE_ROW",cost:4.47},MOVE_SHAPE_COLUMN:{name:"MOVE_SHAPE_COLUMN",cost:4.47},MOVE_SHAPE_SIZE:{name:"MOVE_SHAPE_SIZE",cost:4.43},MOVE_SHAPE_COLOR:{name:"MOVE_SHAPE_COLOR",cost:4.43},MOVE_SHAPE_Y:{name:"MOVE_SHAPE_Y",cost:4.46},MOVE_SHAPE_X:{name:"MOVE_SHAPE_X",cost:4.46},MOVE_SHAPE_TEXT:{name:"MOVE_SHAPE_TEXT",cost:4.43},MOVE_SIZE_ROW:{name:"MOVE_SIZE_ROW",cost:4.47},MOVE_SIZE_COLUMN:{name:"MOVE_SIZE_COLUMN",cost:4.47},MOVE_SIZE_SHAPE:{name:"MOVE_SIZE_SHAPE",cost:4.43},MOVE_SIZE_COLOR:{name:"MOVE_SIZE_COLOR",cost:4.43},MOVE_SIZE_Y:{name:"MOVE_SIZE_Y",cost:4.46},MOVE_SIZE_X:{name:"MOVE_SIZE_X",cost:4.46},MOVE_SIZE_TEXT:{name:"MOVE_SIZE_TEXT",cost:4.43},MOVE_TEXT_ROW:{name:"MOVE_TEXT_ROW",cost:4.47},MOVE_TEXT_COLUMN:{name:"MOVE_TEXT_COLUMN",cost:4.47},MOVE_TEXT_SHAPE:{name:"MOVE_TEXT_SHAPE",cost:4.43},MOVE_TEXT_COLOR:{name:"MOVE_TEXT_COLOR",cost:4.43},MOVE_TEXT_Y:{name:"MOVE_TEXT_Y",cost:4.46},MOVE_TEXT_X:{name:"MOVE_TEXT_X",cost:4.46},MOVE_TEXT_SIZE:{name:"MOVE_TEXT_SIZE",cost:4.43},MOVE_COLUMN_ROW:{name:"MOVE_COLUMN_ROW",cost:4.44},MOVE_COLUMN_SIZE:{name:"MOVE_COLUMN_SIZE",cost:4.47},MOVE_COLUMN_SHAPE:{name:"MOVE_COLUMN_SHAPE",cost:4.47},MOVE_COLUMN_COLOR:{name:"MOVE_COLUMN_COLOR",cost:4.47},MOVE_COLUMN_Y:{name:"MOVE_COLUMN_Y",cost:4.45},MOVE_COLUMN_X:{name:"MOVE_COLUMN_X",cost:4.43},MOVE_COLUMN_TEXT:{name:"MOVE_COLUMN_TEXT",cost:4.47},MOVE_ROW_COLUMN:{name:"MOVE_ROW_COLUMN",cost:4.44},MOVE_ROW_SIZE:{name:"MOVE_ROW_SIZE",cost:4.47},MOVE_ROW_SHAPE:{name:"MOVE_ROW_SHAPE",cost:4.47},MOVE_ROW_COLOR:{name:"MOVE_ROW_COLOR",cost:4.47},MOVE_ROW_Y:{name:"MOVE_ROW_Y",cost:4.43},MOVE_ROW_X:{name:"MOVE_ROW_X",cost:4.45},MOVE_ROW_TEXT:{name:"MOVE_ROW_TEXT",cost:4.47},SWAP_X_Y:{name:"SWAP_X_Y",cost:4.42},SWAP_ROW_COLUMN:{name:"SWAP_ROW_COLUMN",cost:4.41},ceiling:{cost:14.13,alternatingCost:18.84}}}},{}],18:[function(e,t,n){"use strict";function r(e,t,n,r){var u=[],c=r||s.DEFAULT_ENCODING_TRANSITIONS,l=o.keys(e.encoding),f=n;l.forEach(function(r){var a=o.duplicate(e),s="REMOVE_"+r.toUpperCase();s+="*"===e.encoding[r].field?"_COUNT":"";var E=o.duplicate(c[s]),O=o.duplicate(t);-1===o.find(O,o.rawEqual,a.encoding[r])&&O.push(a.encoding[r]);var d=o.duplicate(n);E.detail={field:a.encoding[r].field,channel:r},d.push(r),delete a.encoding[r],i(a)&&(a.transition=E,a.additionalFields=O,a.additionalChannels=d,u.push(a)),t.forEach(function(l,f){l.field!==e.encoding[r].field&&(a=o.duplicate(e),s="MODIFY_"+r.toUpperCase(),"*"===e.encoding[r].field&&"*"!==l.field?s+="_REMOVE_COUNT":"*"!==e.encoding[r].field&&"*"===l.field&&(s+="_ADD_COUNT"),E=o.duplicate(c[s]),O=o.duplicate(t),O.splice(f,1),-1===o.find(O,o.rawEqual,a.encoding[r])&&O.push(a.encoding[r]),d=o.duplicate(n),a.encoding[r]=l,E.detail={field:[e.encoding[r].field,l.field].join(","),channel:r},i(a)&&(a.transition=E,a.additionalFields=O,a.additionalChannels=d,u.push(a)))}),l.forEach(function(s){if(!(s===r||["x","y"].indexOf(r)<0||["x","y"].indexOf(s)<0)){a=o.duplicate(e),E=o.duplicate(c.SWAP_X_Y),O=o.duplicate(t),d=o.duplicate(n);var l=o.duplicate(a.encoding[r]);a.encoding[r]=a.encoding[s],a.encoding[s]=l,E.detail={field:[e.encoding.x.field,e.encoding.y.field].join(","),channel:"x,y"},i(a)&&(a.transition=E,a.additionalFields=O,a.additionalChannels=d,u.push(a))}}),f.forEach(function(s,l){a=o.duplicate(e);var f=(r+"_"+s).toUpperCase();E=o.duplicate(c["MOVE_"+f]),O=o.duplicate(t),d=o.duplicate(n),d.splice(l,1),d.push(r),a.encoding[s]=o.duplicate(a.encoding[r]),delete a.encoding[r],E.detail={field:e.encoding[r].field,channel:[r,s].join(",")},i(a)&&(a.transition=E,a.additionalFields=O,a.additionalChannels=d,u.push(a))})}),f.forEach(function(r,a){t.forEach(function(s,l){var f=o.duplicate(e),E="ADD_"+r.toUpperCase();E+="*"===s.field?"_COUNT":"";var O=o.duplicate(c[E]),d=o.duplicate(t),_=o.duplicate(n);d.splice(l,1),f.encoding[r]=s,_.splice(a,1),O.detail={field:s.field,channel:r},i(f)&&(f.transition=O,f.additionalFields=d,f.additionalChannels=_,u.push(f))})});for(var E=0;E<u.length;E+=1)for(var O=E+1;O<u.length;O+=1)a(u[E].encoding,u[O].encoding)&&(u.splice(O,1),O-=1);return u}function i(e){return!0}function a(e,t){var n=o.keys(e),r=o.keys(t);if(n.length!==r.length)return!1;for(var i=o.union(n,r),a=0;a<i.length;a+=1){var s=i[a];if(!e[s]||!t[s])return!1;if(e[s].field!==t[s].field)return!1}return!0}var o=e("../util"),s=e("./def");n.neighbors=r,n.sameEncoding=a},{"../util":20,"./def":17}],19:[function(e,t,n){"use strict";function r(e,t,n,r){var o=n?n.marktypeTransitions:p.DEFAULT_MARKTYPE_TRANSITIONS,s=n?n.transformTransitions:p.DEFAULT_TRANSFORM_TRANSITIONS,u=n?n.encodingTransitions:p.DEFAULT_ENCODING_TRANSITIONS,c={marktype:i(e,t,o),transform:a(e,t,s,r),encoding:l(e,t,u)},f=0;return f=c.encoding.reduce(function(n,r){if(r.name.indexOf("_COUNT")>=0){var i=r.name.replace(/COUNT/g,"").replace(/ADD/g,"").replace(/REMOVE/g,"").replace(/MODIFY/g,"").replace(/_/g,"").toLowerCase(),a=c.transform.filter(function(e){return"AGGREGATE"===e.name})[0];a&&1===a.detail.length&&a.detail.filter(function(e){return e.channel.toLowerCase()===i}).length&&(a.cost=0);var o=c.transform.filter(function(e){return"BIN"===e.name})[0];o&&o.detail.filter(function(n){return"added"===n.type?t.encoding[n.channel].type===E.Type.QUANTITATIVE:e.encoding[n.channel].type===E.Type.QUANTITATIVE}).length>0&&(o.cost=0)}return n+=r.cost},f),f=c.marktype.reduce(function(e,t){return e+=t.cost},f),f=c.transform.reduce(function(e,t){return e+=t.cost},f),c.cost=f,c}function i(e,t,n){var r,i=[],a=n||p.DEFAULT_MARKTYPE_TRANSITIONS;if(e.mark===t.mark)return i;var o=[e.mark.toUpperCase(),t.mark.toUpperCase()].sort().join("_");return a[o]&&(r=_.duplicate(a[o]),r.detail={from:e.mark.toUpperCase(),to:t.mark.toUpperCase()},i.push(r)),i}function a(e,t,n,r){var i=n||p.DEFAULT_TRANSFORM_TRANSITIONS,a=[];O.CHANNELS.forEach(function(n){["SCALE","SORT","AGGREGATE","BIN","SETTYPE"].map(function(s){var u,l;"SETTYPE"===s&&i[s]?u=c(e,t,n,i):i[s]&&(u=o(e,t,n,s,i,r)),u&&(l=_.find(a,function(e){return e.name},u),l>=0?a[l].detail.push(_.duplicate(u.detail)):(u.detail=[_.duplicate(u.detail)],a.push(u)))})});var u={MODIFY_FILTER:i.MODIFY_FILTER,ADD_FILTER:i.ADD_FILTER,REMOVE_FILTER:i.REMOVE_FILTER};return a=a.concat(s(e,t,u))}function o(e,t,n,r,i,a){var o,s,u,c=!1,l=!1;return e.encoding[n]&&e.encoding[n][r.toLowerCase()]&&(c=!0,s=e.encoding[n][r.toLowerCase()]),t.encoding[n]&&t.encoding[n][r.toLowerCase()]&&(l=!0,u=t.encoding[n][r.toLowerCase()]),a&&a.omitIncludeRawDomain&&"SCALE"===r&&(s&&s.includeRawDomain&&(delete s.includeRawDomain,0===Object.keys(s).length&&JSON.stringify(s)===JSON.stringify({})&&(c=!1)),u&&u.includeRawDomain&&(delete u.includeRawDomain,0===Object.keys(u).length&&JSON.stringify(u)===JSON.stringify({})&&(l=!1))),c&&l&&!_.rawEqual(s,u)?(o=_.duplicate(i[r]),o.detail={type:"modified",channel:n},o):c&&!l?(o=_.duplicate(i[r]),o.detail={type:"removed",channel:n},o):!c&&l?(o=_.duplicate(i[r]),o.detail={type:"added",channel:n},o):void 0}function s(e,t,n){var r=[],i=[],a=[];e.transform&&e.transform.filter&&(r=u(e.transform.filter)),t.transform&&t.transform.filter&&(i=u(t.transform.filter));var o=_.arrayDiff(i,r),s=_.arrayDiff(r,i);if(0===r.length&&0===i.length)return a;for(var c=!1,l=0;l<o.length;l++){for(var f=0;f<s.length;f++)if(_.rawEqual(o[l].field,s[f].field)){
var E=_.duplicate(n.MODIFY_FILTER);E.detail={field:s[f].field},s[f].op!==o[f].op&&(E.detail.op=s[f].op+", "+o[f].op),s[f].value!==o[f].value&&(E.detail.value=s[f].value+", "+o[f].value),a.push(E),o.splice(l,1),s.splice(f,1),c=!0;break}c&&(c=!1,l--)}for(var l=0;l<o.length;l++){var E=_.duplicate(n.ADD_FILTER);E.detail=_.duplicate(o[l]),a.push(E)}for(var l=0;l<s.length;l++){var E=_.duplicate(n.REMOVE_FILTER);E.detail=_.duplicate(s[l]),a.push(E)}return a}function u(e){function t(e){function t(e,n,r){return"||"===e.operator||"&&"===e.operator?(n=t(e.left,n,r+1),n=t(e.right,n,r+1)):["==","===","!==","!=","<","<=",">",">="].indexOf(e.operator)>=0&&(e.depth=r,n.push(e)),n}var n=d.parse,r=n(e);return t(r.body[0].expression,[],0).map(function(e){return{field:e.left.property.name,op:e.operator,value:e.right.raw}})}var n=[];if(_.isArray(e))e.map(function(e){_.isString(e)?n=n.concat(t(e)):f.isRangeFilter(e)?n.push({field:e.field,op:"range",value:JSON.stringify(e.range)}):f.isInFilter(e)?n.push({field:e.field,op:"in",value:JSON.stringify(e["in"])}):f.isEqualFilter(e)?n.push({field:e.field,op:"equal",value:e.equal.toString()}):console.log("WARN: cannot parse filters.")});else{var r=e;_.isString(r)?n=n.concat(t(r)):f.isRangeFilter(r)?n.push({field:r.field,op:"range",value:JSON.stringify(r.range)}):f.isInFilter(r)?n.push({field:r.field,op:"in",value:JSON.stringify(r["in"])}):f.isEqualFilter(r)?n.push({field:r.field,op:"equal",value:r.equal.toString()}):console.log("WARN: cannot parse filters.")}return n}function c(e,t,n,r){var i;return e.encoding[n]&&t.encoding[n]&&t.encoding[n].field===e.encoding[n].field&&t.encoding[n].type!==e.encoding[n].type?(i=_.duplicate(r.SETTYPE),i.detail={type:e.encoding[n].type+"_"+t.encoding[n].type,channel:n},i):void 0}function l(e,t,n){function r(e){var t=1/0,n=-1;return e.forEach(function(e,r){e.distance<t&&(t=e.distance,n=r)}),e.splice(n,1)[0]}if(T.sameEncoding(e.encoding,t.encoding))return[];var i,a=_.keys(e.encoding),o=a.map(function(t){return e.encoding[t]}),s=_.keys(t.encoding),u=s.map(function(e){return t.encoding[e]}),c=_.unionObjectArray(u,o,function(e){return e.field+"_"+e.type}),l=_.arrayDiff(s,a),f=T.neighbors(e,c,l,n).map(function(t){return t.distance=t.transition.cost,t.prev=[e],t});e.distance=0,e.prev=[];for(var E=[e];f.length>0&&(i=r(f),!T.sameEncoding(i.encoding,t.encoding));){if(i.distance>=n.ceiling.cost)return[{name:"OVER_THE_CEILING",cost:n.ceiling.alternatingCost}];var O=T.neighbors(i,c,i.additionalChannels,n);O.forEach(function(e){for(var t,n=0;n<E.length;n+=1)if(T.sameEncoding(E[n].encoding,e.encoding))return;for(var n=0;n<f.length;n+=1)if(T.sameEncoding(f[n].encoding,e.encoding)){t=f[n];break}t?t.distance>i.distance+e.transition.cost&&(t.distance=i.distance+e.transition.cost,t.transition=e.transition,t.prev=i.prev.concat([i])):(e.distance=i.distance+e.transition.cost,e.prev=i.prev.concat([i]),f.push(e))}),E.push(i)}if(!T.sameEncoding(i.encoding,t.encoding)&&0===f.length)return[{name:"UNREACHABLE",cost:999}];var d=i.prev.map(function(e){return e.transition}).filter(function(e){return e});return d.push(i.transition),d}var f=e("vega-lite/src/filter"),E=e("vega-lite/src/type"),O=e("vega-lite/src/channel"),d=e("vega-expression"),_=e("../util"),p=e("./def"),T=e("./neighbor");n.transitionSet=r,n.marktypeTransitionSet=i,n.transformTransitionSet=a,n.transformBasic=o,n.filterTransitionSet=s,n.filters=u,n.transformSettype=c,n.encodingTransitionSet=l},{"../util":20,"./def":17,"./neighbor":18,"vega-expression":5,"vega-lite/src/channel":31,"vega-lite/src/filter":35,"vega-lite/src/type":40}],20:[function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e,t){return-1!==t.indexOf(e)}function a(e,t){return JSON.stringify(e,null,t)}function o(e){var t,n=[];for(t in e)n.push(t);return n}function s(e){return JSON.parse(JSON.stringify(e))}function u(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)t.call(n,e[r],r,e)}function c(e,t){var n,r=0;for(n in e)if(t(e[n],n,r++))return!0;return!1}function l(e,t,n,r){return 0===n?e.map(t):e.map(function(e){var i=l(e,t,n-1);return r?i.filter(E):i})}function f(e,t,n,r){return 0===n?e.reduce(t,[]):e.map(function(e){var i=f(e,t,n-1);return r?i.filter(E):i})}function E(e){return!n.isArray(e)||e.length>0}function O(e,t){return void 0!==e.value?t.push(e.value):(e.left&&O(e.left,t),e.right&&O(e.right,t)),t}function d(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i,a,o=1,s=arguments.length;s>o;++o){i=arguments[o];for(a in i)e[a]=i[a]}return e}function _(e,t){var n={};return e.forEach(function(e){n[e]=!0}),t.forEach(function(e){n[e]=!0}),o(n)}function p(e){for(var t=[[]],n=0;n<e.length;n++)for(var r=0,i=t.length;i>r;r++)t.push(t[r].concat(e[n]));return t}function T(e,t){for(var n=[[]],r=0;r<e.length;r++)for(var i=0,a=n.length;a>i;i++){var o=n[i].concat(e[r]);o.length<=t&&n.push(o)}return n}function m(e,t){for(var n=[[]],r=[],i=0;i<e.length;i++)for(var a=0,o=n.length;o>a;a++){var s=n[a].concat(e[i]);s.length<t?n.push(s):s.length===t&&r.push(s)}return r}function g(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n.push(e[r].concat(t[i]));return n}function h(e,t,n){for(var r=0;r<e.length;r+=1)if(t(n)===t(e[r]))return r;return-1}function M(e,t){return JSON.stringify(e)===JSON.stringify(t)}function A(e,t,n){return e.filter(function(e){return n?h(t,n,e)<0:h(t,JSON.stringify,e)<0})}function N(e,t,n){return A(e,t,n).concat(t)}n.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},n.isString=r,n.isin=i,n.json=a,n.keys=o,n.duplicate=s,n.forEach=u,n.any=c,n.nestedMap=l,n.nestedReduce=f,n.nonEmpty=E,n.traverse=O,n.extend=d,n.union=_;var y;!function(e){function t(e){return(e?o(e):[]).reduce(function(t,n){return t[n]=e[n],t},Object.create({}))}e.getOpt=t}(y=n.gen||(n.gen={})),n.powerset=p,n.chooseKorLess=T,n.chooseK=m,n.cross=g,n.find=h,n.rawEqual=M,n.arrayDiff=A,n.unionObjectArray=N},{}],21:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(t.d3_time={})}(this,function(e){"use strict";function t(e,n,r,o){function s(t){return e(t=new Date(+t)),t}return s.floor=s,s.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},s.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},s.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},s.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(s.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e===0}:function(t){return s.count(0,t)%e===0}):s:null}),s}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var s=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),u=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),c=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),l=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),E=n(1),O=n(2),d=n(3),_=n(4),p=n(5),T=n(6),m=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),g=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),h=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),M=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),A=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),y=r(0),S=r(1),R=r(2),I=r(3),C=r(4),D=r(5),v=r(6),L=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),U=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),x=o.range,V=s.range,P=u.range,b=c.range,Y=l.range,w=f.range,F=E.range,k=O.range,H=d.range,X=_.range,W=p.range,G=T.range,B=f.range,j=m.range,Z=g.range,Q=o,K=x,q=h.range,z=M.range,J=A.range,$=N.range,ee=y.range,te=S.range,ne=R.range,re=I.range,ie=C.range,ae=D.range,oe=v.range,se=y.range,ue=L.range,ce=U.range,le="0.1.1";e.version=le,e.milliseconds=x,e.seconds=V,e.minutes=P,e.hours=b,e.days=Y,e.sundays=w,e.mondays=F,e.tuesdays=k,e.wednesdays=H,e.thursdays=X,e.fridays=W,e.saturdays=G,e.weeks=B,e.months=j,e.years=Z,e.utcMillisecond=Q,e.utcMilliseconds=K,e.utcSeconds=q,e.utcMinutes=z,e.utcHours=J,e.utcDays=$,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=se,e.utcMonths=ue,e.utcYears=ce,e.millisecond=o,e.second=s,e.minute=u,e.hour=c,e.day=l,e.sunday=f,e.monday=E,e.tuesday=O,e.wednesday=d,e.thursday=_,e.friday=p,e.saturday=T,e.week=f,e.month=m,e.year=g,e.utcSecond=h,e.utcMinute=M,e.utcHour=A,e.utcDay=N,e.utcSunday=y,e.utcMonday=S,e.utcTuesday=R,e.utcWednesday=I,e.utcThursday=C,e.utcFriday=D,e.utcSaturday=v,e.utcWeek=y,e.utcMonth=L,e.utcYear=U,e.interval=t})},{}],22:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,s,u,c,l,f=e.maxbins||15,E=e.base||10,O=Math.log(E),d=e.div||[5,2],_=e.min,p=e.max,T=p-_;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,T/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/O),r=e.minstep||0,t=Math.max(r,Math.pow(E,Math.round(Math.log(T)/O)-n));Math.ceil(T/t)>f;)t*=E;for(c=0;c<d.length;++c)u=t/d[c],u>=r&&f>=T/u&&(t=u)}return u=Math.log(t),s=u>=0?0:~~(-u/O)+1,l=Math.pow(E,-s-1),_=Math.min(_,Math.floor(_/t+l)*t),p=Math.ceil(p/t)*t,{start:_,stop:p,step:t,unit:{precision:s},value:a,index:o}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;c.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function s(e){return this.unit.date(a.call(this,e))}function u(e){return o.call(this,this.unit.unit(e))}var c=e("../util"),l=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?l.utc:l,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,c=+i-+n,f=e.unit?t[e.unit]:t.find(c,o,a),E=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return E.unit=f,E.index=u,e.raw||(E.value=s),E},t.exports=r},{"../time":24,"../util":25}],23:[function(e,t,n){var r=e("./util"),i=t.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&t>=r?1/n:0},r.cdf=function(r){return e>r?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&1>=t?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&t>r?1/n:0},r.cdf=function(r){var i=Math.floor(r);return e>i?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&1>=t?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o,s=Math.exp(-a*a/2);7.07106781186547>a?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=s*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=s/o/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(0>=n||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*s},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,s=function(){return n[~~(Math.random()*a)]+(o?o():0)};return s.samples=function(e){return i.zeros(e).map(s)},s}},{"./util":25}],24:[function(e,t,n){function r(e){return c.setTime(+e),c}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,s=d[0];for(i=1,a=d.length;a>i;++i)if(s=d[i],t>s[0]){if(o=t/s[0],o>r)return e[d[i-1][1]];if(o>=n)return e[s[1]]}return e[d[a-1][1]]}function s(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var u=e("d3-time"),c=new Date,l=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),E=[a("second",u.second,l),a("minute",u.minute,l),a("hour",u.hour,l),a("day",u.day,l,[1,7]),a("month",u.month,l,[1,3,6]),a("year",u.year,l),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],O=[a("second",u.utcSecond,f),a("minute",u.utcMinute,f),a("hour",u.utcHour,f),a("day",u.utcDay,f,[1,7]),a("month",u.utcMonth,f,[1,3,6]),a("year",u.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],d=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=s(E),t.exports.utc=s(O)},{"d3-time":21}],25:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(u);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var s=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(s).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var a,o,s,u;for(a=0,o=e.length;o>a;++a)if(s=e[a],u=i.cmp(s(n),s(r)))return u*t[a];return 0}},i.cmp=function(e,t){return(t>e||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(0>=a)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(t>=o)return e;a=void 0!==a?String(a):"…";var s=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,s,1):e.slice(o-s));case"middle":case"center":var u=Math.ceil(s/2),c=Math.floor(s/2);return(i?r(e,u):e.slice(0,u))+a+(i?r(e,c,1):e.slice(o-c));default:return(i?r(e,s):e.slice(0,s))+a}};var u=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],26:[function(e,t,n){var r="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o="boolean"==typeof t.cycles?t.cycles:!1,s=t.replacer||function(e,t){return t},u=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}}(t.cmp),c=[];return function l(e,t,f,E){var O=n?"\n"+new Array(E+1).join(n):"",d=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),f=s.call(e,t,f),void 0!==f){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var _=[],p=0;p<f.length;p++){var T=l(f,p,f[p],E+1)||r.stringify(null);_.push(O+n+T)}return"["+_.join(",")+O+"]"}if(-1!==c.indexOf(f)){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(f);for(var m=a(f).sort(u&&u(f)),_=[],p=0;p<m.length;p++){var t=m[p],g=l(f,t,f[t],E+1);if(g){var h=r.stringify(t)+d+g;_.push(O+n+h)}}return c.splice(c.indexOf(f),1),"{"+_.join(",")+O+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:27}],27:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":28,"./lib/stringify":29}],28:[function(e,t,n){var r,i,a,o,s={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},u=function(e){throw{name:"SyntaxError",message:e,at:r,text:a}},c=function(e){return e&&e!==i&&u("Expected '"+e+"' instead of '"+i+"'"),i=a.charAt(r),r+=1,i},l=function(){var e,t="";for("-"===i&&(t="-",c("-"));i>="0"&&"9">=i;)t+=i,c();if("."===i)for(t+=".";c()&&i>="0"&&"9">=i;)t+=i;if("e"===i||"E"===i)for(t+=i,c(),"-"!==i&&"+"!==i||(t+=i,c());i>="0"&&"9">=i;)t+=i,c();return e=+t,isFinite(e)?e:void u("Bad number")},f=function(){var e,t,n,r="";if('"'===i)for(;c();){if('"'===i)return c(),r;if("\\"===i)if(c(),"u"===i){for(n=0,t=0;4>t&&(e=parseInt(c(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof s[i])break;r+=s[i]}else r+=i}u("Bad string")},E=function(){for(;i&&" ">=i;)c()},O=function(){switch(i){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}u("Unexpected '"+i+"'")},d=function(){var e=[];if("["===i){if(c("["),E(),"]"===i)return c("]"),e;for(;i;){if(e.push(o()),E(),"]"===i)return c("]"),e;c(","),E()}}u("Bad array")},_=function(){var e,t={};if("{"===i){if(c("{"),E(),"}"===i)return c("}"),t;for(;i;){if(e=f(),E(),c(":"),Object.hasOwnProperty.call(t,e)&&u('Duplicate key "'+e+'"'),t[e]=o(),E(),"}"===i)return c("}"),t;c(","),E()}}u("Bad object")};o=function(){switch(E(),i){case"{":return _();case"[":return d();case'"':return f();case"-":return l();default:return i>="0"&&"9">=i?l():O()}},t.exports=function(e,t){var n;return a=e,r=0,i=" ",n=o(),E(),i&&u("Syntax error"),"function"==typeof t?function s(e,n){var r,i,a=e[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=s(a,r),void 0!==i?a[r]=i:delete a[r]);return t.call(e,n,a)}({"":n},""):n}},{}],29:[function(e,t,n){function r(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,function(e){var t=c[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,t){var n,u,c,l,f,E=a,O=t[e];switch(O&&"object"==typeof O&&"function"==typeof O.toJSON&&(O=O.toJSON(e)),"function"==typeof s&&(O=s.call(t,e,O)),typeof O){case"string":return r(O);case"number":return isFinite(O)?String(O):"null";case"boolean":case"null":return String(O);case"object":if(!O)return"null";if(a+=o,f=[],"[object Array]"===Object.prototype.toString.apply(O)){for(l=O.length,n=0;l>n;n+=1)f[n]=i(n,O)||"null";return c=0===f.length?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+E+"]":"["+f.join(",")+"]",a=E,c}if(s&&"object"==typeof s)for(l=s.length,n=0;l>n;n+=1)u=s[n],"string"==typeof u&&(c=i(u,O),c&&f.push(r(u)+(a?": ":":")+c));else for(u in O)Object.prototype.hasOwnProperty.call(O,u)&&(c=i(u,O),c&&f.push(r(u)+(a?": ":":")+c));return c=0===f.length?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+E+"}":"{"+f.join(",")+"}",a=E,c}}var a,o,s,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,n){var r;if(a="",o="","number"==typeof n)for(r=0;n>r;r+=1)o+=" ";else"string"==typeof n&&(o=n);if(s=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return i("",{"":e})}},{}],30:[function(e,t,n){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(n.AggregateOp||(n.AggregateOp={}));var r=n.AggregateOp;n.AGGREGATE_OPS=[r.VALUES,r.COUNT,r.VALID,r.MISSING,r.DISTINCT,r.SUM,r.MEAN,r.AVERAGE,r.VARIANCE,r.VARIANCEP,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MODESKEW,r.MIN,r.MAX,r.ARGMIN,r.ARGMAX],n.SUM_OPS=[r.COUNT,r.SUM,r.DISTINCT],n.SHARED_DOMAIN_OPS=[r.MEAN,r.AVERAGE,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MIN,r.MAX]},{}],31:[function(e,t,n){"use strict";function r(e,t){return!!i(e)[t]}function i(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.DETAIL:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0};case n.X2:case n.Y2:return{rule:!0,bar:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case n.SHAPE:return{point:!0};case n.TEXT:return{text:!0};case n.PATH:return{line:!0}}return{}}function a(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.OPACITY:case n.LABEL:case n.DETAIL:return{measure:!0,dimension:!0};case n.ROW:case n.COLUMN:case n.SHAPE:return{measure:!1,dimension:!0};case n.X2:case n.Y2:case n.SIZE:case n.TEXT:return{measure:!0,dimension:!1};case n.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function o(e){return!s.contains([n.DETAIL,n.PATH,n.TEXT,n.LABEL,n.ORDER],e)}var s=e("./util");!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.X2="x2"]="X2",e[e.Y2="y2"]="Y2",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(n.Channel||(n.Channel={}));var u=n.Channel;n.X=u.X,n.Y=u.Y,n.X2=u.X2,n.Y2=u.Y2,n.ROW=u.ROW,n.COLUMN=u.COLUMN,n.SHAPE=u.SHAPE,n.SIZE=u.SIZE,n.COLOR=u.COLOR,n.TEXT=u.TEXT,n.DETAIL=u.DETAIL,n.LABEL=u.LABEL,n.PATH=u.PATH,n.ORDER=u.ORDER,n.OPACITY=u.OPACITY,n.CHANNELS=[n.X,n.Y,n.X2,n.Y2,n.ROW,n.COLUMN,n.SIZE,n.SHAPE,n.COLOR,n.PATH,n.ORDER,n.OPACITY,n.TEXT,n.DETAIL,n.LABEL],n.UNIT_CHANNELS=s.without(n.CHANNELS,[n.ROW,n.COLUMN]),n.UNIT_SCALE_CHANNELS=s.without(n.UNIT_CHANNELS,[n.PATH,n.ORDER,n.DETAIL,n.TEXT,n.LABEL,n.X2,n.Y2]),n.NONSPATIAL_CHANNELS=s.without(n.UNIT_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.NONSPATIAL_SCALE_CHANNELS=s.without(n.UNIT_SCALE_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.STACK_GROUP_CHANNELS=[n.COLOR,n.DETAIL,n.ORDER,n.OPACITY,n.SIZE],n.supportMark=r,n.getSupportedMark=i,n.getSupportedRole=a,n.hasScale=o},{"./util":41}],32:[function(e,t,n){"use strict";function r(e){return!!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds)}function i(e){return u.isNumber(e)?e-1+"":(console.warn("Potentially invalid quarter",e),e)}function a(e){if(u.isNumber(e))return e-1+"";var t=e.toLowerCase(),r=n.MONTHS.indexOf(t);if(-1!==r)return r+"";var i=t.substr(0,3),a=n.SHORT_MONTHS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid month",e),e)}function o(e){if(u.isNumber(e))return e%7+"";var t=e.toLowerCase(),r=n.DAYS.indexOf(t);if(-1!==r)return r+"";var i=t.substr(0,3),a=n.SHORT_DAYS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid day",e),e)}function s(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day)for(var r=0,s=["year","quarter","month","date"];r<s.length;r++){var c=s[r];if(void 0!==e[c]){console.warn("Dropping day from datetime",JSON.stringify(e),"as day cannot be combined with",c),e=u.duplicate(e),delete e.day;break}}if(void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){var l=t?a(e.month):e.month;n.push(l)}else if(void 0!==e.quarter){var f=t?i(e.quarter):e.quarter;n.push(f+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var E=t?o(e.day):e.day;n.push(E+"+1")}else n.push(1);for(var O=0,d=["hours","minutes","seconds","milliseconds"];O<d.length;O++){var _=d[O];void 0!==e[_]?n.push(e[_]):n.push(0)}return"datetime("+n.join(", ")+")"}var u=e("./util");n.isDateTime=r,n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=s},{"./util":41}],33:[function(e,t,n){"use strict";function r(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t}function i(e){return _.CHANNELS.filter(function(t){return a(e,t)})}function a(e,t){var n=e&&e[t];return n&&(void 0!==n.field||p.isArray(n)&&n.length>0);
}function o(e){return p.some(_.CHANNELS,function(t){return!(!a(e,t)||!e[t].aggregate)})}function s(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function u(e){var t=[];return _.CHANNELS.forEach(function(n){a(e,n)&&(p.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t}function c(e,t,n){l(_.CHANNELS,e,t,n)}function l(e,t,n,r){var i=0;e.forEach(function(e){a(t,e)&&(p.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,i++)}):n.call(r,t[e],e,i++))})}function f(e,t,n){return E(_.CHANNELS,e,t,n)}function E(e,t,n,r){var i=[];return e.forEach(function(e){a(t,e)&&(p.isArray(t[e])?t[e].forEach(function(t){i.push(n.call(r,t,e))}):i.push(n.call(r,t[e],e)))}),i}function O(e,t,n,r){return d(_.CHANNELS,e,t,n,r)}function d(e,t,n,r,i){var o=r;return _.CHANNELS.forEach(function(e){a(t,e)&&(p.isArray(t[e])?t[e].forEach(function(t){o=n.call(i,o,t,e)}):o=n.call(i,o,t[e],e))}),o}var _=e("./channel"),p=e("./util");n.countRetinal=r,n.channels=i,n.has=a,n.isAggregate=o,n.isRanged=s,n.fieldDefs=u,n.forEach=c,n.channelMappingForEach=l,n.map=f,n.channelMappingMap=E,n.reduce=O,n.channelMappingReduce=d},{"./channel":31,"./util":41}],34:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});var n=e.field,r=t.prefix,i=t.suffix;if(u(e))n="count";else{var a=t.fn;t.nofn||(e.bin?(a="bin",i=t.binSuffix||(t.scaleType===E.ScaleType.ORDINAL?"range":"start")):!t.noAggregate&&e.aggregate?a=String(e.aggregate):e.timeUnit&&(a=String(e.timeUnit))),a&&(n=a+"_"+n)}return i&&(n=n+"_"+i),r&&(n=r+"_"+n),t.datum&&(n='datum["'+n+'"]'),n}function i(e){return _.contains([d.NOMINAL,d.ORDINAL],e.type)||!!e.bin||e.type===d.TEMPORAL&&!!e.timeUnit}function a(e){return e&&e.field&&i(e)}function o(e){return e&&e.field&&!i(e)}function s(){return{field:"*",aggregate:f.AggregateOp.COUNT,type:d.QUANTITATIVE}}function u(e){return e.aggregate===f.AggregateOp.COUNT}function c(e,t,n){void 0===n&&(n={});var r=t[e.field],i=e.type;if(e.bin){var a=e.bin,o="boolean"==typeof a?void 0:a.maxbins;void 0===o&&(o=10);var s=_.getbins(r,o);return(s.stop-s.start)/s.step}if(i===d.TEMPORAL){var u=e.timeUnit;switch(u){case O.TimeUnit.SECONDS:return 60;case O.TimeUnit.MINUTES:return 60;case O.TimeUnit.HOURS:return 24;case O.TimeUnit.DAY:return 7;case O.TimeUnit.DATE:return 31;case O.TimeUnit.MONTH:return 12;case O.TimeUnit.QUARTER:return 4;case O.TimeUnit.YEAR:var c=t["year_"+e.field];return c?c.distinct-(r.missing>0&&n[i]?1:0):null}}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)}function l(e,t){if(null!=e.title)return e.title;if(u(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toString().toUpperCase()+"("+e.field+")":e.field}var f=e("./aggregate"),E=e("./scale"),O=e("./timeunit"),d=e("./type"),_=e("./util");n.aggregate={type:"string","enum":f.AGGREGATE_OPS,supportedEnums:{quantitative:f.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:_.toMap([d.QUANTITATIVE,d.NOMINAL,d.ORDINAL,d.TEMPORAL,""])},n.field=r,n.isDimension=a,n.isMeasure=o,n.count=s,n.isCount=u,n.cardinality=c,n.title=l},{"./aggregate":30,"./scale":37,"./timeunit":39,"./type":40,"./util":41}],35:[function(e,t,n){"use strict";function r(e){return e&&!!e.field&&void 0!==e.equal}function i(e){return!!(e&&e.field&&f.isArray(e.range)&&2===e.range.length)}function a(e){return e&&!!e.field&&f.isArray(e["in"])}function o(e){if(f.isString(e))return e;var t=e.timeUnit?"time("+l.fieldExpr(e.timeUnit,e.field)+")":c.field(e,{datum:!0});if(r(e))return t+"==="+s(e.equal,e.timeUnit);if(a(e))return"indexof(["+e["in"].map(function(t){return s(t,e.timeUnit)}).join(",")+"], "+t+") !== -1";if(i(e)){var n=e.range[0],o=e.range[1];if(null!==n&&null!==o)return"inrange("+t+", "+s(n,e.timeUnit)+", "+s(o,e.timeUnit)+")";if(null!==n)return t+" >= "+n;if(null!==o)return t+" <= "+o}}function s(e,t){if(u.isDateTime(e)){var n=u.dateTimeExpr(e,!0);return"time("+n+")"}if(l.isSingleTimeUnit(t)){var r={};r[t]=e;var n=u.dateTimeExpr(r,!0);return"time("+n+")"}return JSON.stringify(e)}var u=e("./datetime"),c=e("./fielddef"),l=e("./timeunit"),f=e("./util");n.isEqualFilter=r,n.isRangeFilter=i,n.isInFilter=a,n.expression=o},{"./datetime":32,"./fielddef":34,"./timeunit":39,"./util":41}],36:[function(e,t,n){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.ERRORBAR="errorBar"]="ERRORBAR"}(n.Mark||(n.Mark={}));var r=n.Mark;n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RULE=r.RULE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE,n.ERRORBAR=r.ERRORBAR,n.PRIMITIVE_MARKS=[n.AREA,n.BAR,n.LINE,n.POINT,n.TEXT,n.TICK,n.RULE,n.CIRCLE,n.SQUARE]},{}],37:[function(e,t,n){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(n.ScaleType||(n.ScaleType={}));n.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(n.NiceTime||(n.NiceTime={}));n.NiceTime;n.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},n.defaultFacetScaleConfig={round:!0,padding:16}},{}],38:[function(e,t,n){"use strict";function r(e){return"mark"+n.ASSIGN+e.mark+n.DELIM+a(e.encoding)}function i(e,t,r){var i=e.split(n.DELIM),a=i.shift().split(n.ASSIGN)[1].trim(),s=o(i.join(n.DELIM)),u={mark:d.Mark[a],encoding:s};return void 0!==t&&(u.data=t),void 0!==r&&(u.config=r),u}function a(e){return O.map(e,function(e,t){return t+n.ASSIGN+s(e)}).join(n.DELIM)}function o(e){return e.split(n.DELIM).reduce(function(e,t){var r=t.split(n.ASSIGN),i=r[0].trim(),a=r[1];return e[i]=c(a),e},{})}function s(e){return(e.aggregate?e.aggregate+n.FUNC:"")+(e.timeUnit?e.timeUnit+n.FUNC:"")+(e.bin?"bin"+n.FUNC:"")+(e.field||"")+n.TYPE+E.SHORT_TYPE[e.type]}function u(e,t){return void 0===t&&(t=n.DELIM),e.map(s).join(t)}function c(e){for(var t=e.split(n.TYPE),r={field:t[0].trim(),type:E.TYPE_FROM_SHORT_TYPE[t[1].trim()]},i=0;i<l.AGGREGATE_OPS.length;i++){var a=l.AGGREGATE_OPS[i];if(0===r.field.indexOf(a+"_")){r.field=r.field.substr(a.toString().length+1),a===l.AggregateOp.COUNT&&0===r.field.length&&(r.field="*"),r.aggregate=a;break}}for(var i=0;i<f.TIMEUNITS.length;i++){var o=f.TIMEUNITS[i];if(r.field&&0===r.field.indexOf(o+"_")){r.field=r.field.substr(r.field.length+1),r.timeUnit=o;break}}return r.field&&0===r.field.indexOf("bin_")&&(r.field=r.field.substr(4),r.bin=!0),r}var l=e("./aggregate"),f=e("./timeunit"),E=e("./type"),O=e("./encoding"),d=e("./mark");n.DELIM="|",n.ASSIGN="=",n.TYPE=",",n.FUNC="_",n.shorten=r,n.parse=i,n.shortenEncoding=a,n.parseEncoding=o,n.shortenFieldDef=s,n.shortenFieldDefs=u,n.parseFieldDef=c},{"./aggregate":30,"./encoding":33,"./mark":36,"./timeunit":39,"./type":40}],39:[function(e,t,n){"use strict";function r(e){return!!T[e]}function i(e,t){var r=new Date(0,0,1,0,0,0,0);return n.SINGLE_TIMEUNITS.forEach(function(n){if(o(e,n))switch(n){case p.DAY:throw new Error("Cannot convert to TimeUnits containing 'day'");case p.YEAR:r.setFullYear(t.getFullYear());break;case p.QUARTER:r.setMonth(3*Math.floor(t.getMonth()/3));break;case p.MONTH:r.setMonth(t.getMonth());break;case p.DATE:r.setDate(t.getDate());break;case p.HOURS:r.setHours(t.getHours());break;case p.MINUTES:r.setMinutes(t.getMinutes());break;case p.SECONDS:r.setSeconds(t.getSeconds());break;case p.MILLISECONDS:r.setMilliseconds(t.getMilliseconds())}}),r}function a(e){return!!m[e]}function o(e,t){var n=e.toString(),r=t.toString(),i=n.indexOf(r);return i>-1&&(t!==p.SECONDS||0===i||"i"!==n.charAt(i-1))}function s(e){switch(e){case p.HOURS:case p.DAY:case p.MONTH:case p.QUARTER:return d.ScaleType.ORDINAL}return d.ScaleType.TIME}function u(e,t){function r(e){return e===p.QUARTER?"floor(month("+i+")/3)":e+"("+i+")"}var i='datum["'+t+'"]',a=n.SINGLE_TIMEUNITS.reduce(function(t,n){return o(e,n)&&(t[n]=r(n)),t},{});return a.day&&_.keys(a).length>1&&(console.warn('Time unit "'+e+'" is not supported. We are replacing it with ',(e+"").replace("day","date")+"."),delete a.day,a.date=r(p.DATE)),O.dateTimeExpr(a)}function c(e,t){if(_.contains([E.ROW,E.COLUMN,E.SHAPE,E.COLOR],t))return null;switch(e){case p.SECONDS:return _.range(0,60);case p.MINUTES:return _.range(0,60);case p.HOURS:return _.range(0,24);case p.DAY:return _.range(0,7);case p.DATE:return _.range(1,32);case p.MONTH:return _.range(0,12);case p.QUARTER:return[0,3,6,9]}return null}function l(e){return e?o(e,p.SECONDS)?"second":o(e,p.MINUTES)?"minute":o(e,p.HOURS)?"hour":o(e,p.DAY)||o(e,p.DATE)?"day":o(e,p.MONTH)?"month":o(e,p.YEAR)?"year":void 0:void 0}function f(e,t,n){if(e){var r=[];o(e,p.YEAR)&&r.push(n?"%y":"%Y"),o(e,p.QUARTER)&&r.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'"),o(e,p.MONTH)&&r.push(n?"%b":"%B"),o(e,p.DAY)?r.push(n?"%a":"%A"):o(e,p.DATE)&&r.push("%d");var i=[];o(e,p.HOURS)&&i.push("%H"),o(e,p.MINUTES)&&i.push("%M"),o(e,p.SECONDS)&&i.push("%S"),o(e,p.MILLISECONDS)&&i.push("%L");var a=[];if(r.length>0&&a.push(r.join("-")),i.length>0&&a.push(i.join(":")),a.length>0){var s="{{"+t+" | time:'"+a.join(" ")+"'}}",u=t.replace(/(\[|\])/g,"\\$1");return s.replace(new RegExp("{{"+u+" \\| time:''}}","g"),"")}}}var E=e("./channel"),O=e("./datetime"),d=e("./scale"),_=e("./util");!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARMONTHDATEHOURS="yearmonthdatehours"]="YEARMONTHDATEHOURS",e[e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES",e[e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",e[e.QUARTER="quarter"]="QUARTER",e[e.YEARQUARTER="yearquarter"]="YEARQUARTER",e[e.QUARTERMONTH="quartermonth"]="QUARTERMONTH",e[e.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH"}(n.TimeUnit||(n.TimeUnit={}));var p=n.TimeUnit;n.SINGLE_TIMEUNITS=[p.YEAR,p.QUARTER,p.MONTH,p.DAY,p.DATE,p.HOURS,p.MINUTES,p.SECONDS,p.MILLISECONDS];var T=n.SINGLE_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isSingleTimeUnit=r,n.convert=i,n.MULTI_TIMEUNITS=[p.YEARQUARTER,p.YEARQUARTERMONTH,p.YEARMONTH,p.YEARMONTHDATE,p.YEARMONTHDATEHOURS,p.YEARMONTHDATEHOURSMINUTES,p.YEARMONTHDATEHOURSMINUTESSECONDS,p.QUARTERMONTH,p.HOURSMINUTES,p.HOURSMINUTESSECONDS,p.MINUTESSECONDS,p.SECONDSMILLISECONDS];var m=n.MULTI_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isMultiTimeUnit=a,n.TIMEUNITS=n.SINGLE_TIMEUNITS.concat(n.MULTI_TIMEUNITS),n.containsTimeUnit=o,n.defaultScaleType=s,n.fieldExpr=u,n.rawDomain=c,n.smallestUnit=l,n.template=f},{"./channel":31,"./datetime":32,"./scale":37,"./util":41}],40:[function(e,t,n){"use strict";function r(e){var t=e;return n.TYPE_FROM_SHORT_TYPE[t.toUpperCase()]||t.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(n.Type||(n.Type={}));var i=n.Type;n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},n.TYPE_FROM_SHORT_TYPE={Q:n.QUANTITATIVE,T:n.TEMPORAL,O:n.ORDINAL,N:n.NOMINAL},n.getFullName=r},{}],41:[function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}function i(e,t){var n=y.duplicate(e);return t.forEach(function(e){delete n[e]}),n}function a(e){return R.isString(e)||R.isNumber(e)||R.isBoolean(e)?String(e):A(e)}function o(e,t){return e.indexOf(t)>-1}function s(e,t){return e.filter(function(e){return!o(t,e)})}function u(e,t){return e.concat(s(t,e))}function c(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function l(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n}function f(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function E(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function O(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function d(e){return[].concat.apply([],e)}function _(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=p(e,t[r]);return e}function p(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=_(t[n].constructor===Array?[]:{},t[n]):_(e[n],t[n]));return e}function T(e,t){return I({min:e.min,max:e.max,maxbins:t})}function m(e,t){var n,r,i,a=[],o={};for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],n in o||(o[n]=1,a.push(e[r]));return a}function g(e){console.warn("[VL Warning]",e)}function h(e){console.error("[VL Error]",e)}function M(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}var A=e("json-stable-stringify"),N=e("datalib/src/util");n.keys=N.keys,n.extend=N.extend,n.duplicate=N.duplicate,n.isArray=N.isArray,n.vals=N.vals,n.truncate=N.truncate,n.toMap=N.toMap,n.isObject=N.isObject,n.isString=N.isString,n.isNumber=N.isNumber,n.isBoolean=N.isBoolean;var y=e("datalib/src/util"),S=e("datalib/src/generate");n.range=S.range;var R=e("datalib/src/util");n.pick=r,n.omit=i,n.hash=a,n.contains=o,n.without=s,n.union=u,n.forEach=c,n.reduce=l,n.map=f,n.some=E,n.every=O,n.flatten=d,n.mergeDeep=_;var I=e("datalib/src/bins/bins");n.getbins=T,n.unique=m,n.warning=g,n.error=h,n.differ=M},{"datalib/src/bins/bins":22,"datalib/src/generate":23,"datalib/src/util":25,"json-stable-stringify":26}],42:[function(e,t,n){"use strict";function r(e,t,r){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var i=e.mark,o=e.encoding,s=t[i],u=r[i];for(var c in s)if(!(s[c]in o))return'Missing encoding channel "'+s[c]+'" for mark "'+i+'"';for(var l in o)if(!u[l])return'Encoding channel "'+l+'" is not supported by mark type "'+i+'"';return i!==a.BAR||o.x||o.y?null:"Missing both x and y for bar"}var i=e("./util"),a=e("./mark");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toMap(["row","column","x","y","size","color","detail"]),line:i.toMap(["row","column","x","y","color","detail"]),area:i.toMap(["row","column","x","y","color","detail"]),tick:i.toMap(["row","column","x","y","color","detail"]),circle:i.toMap(["row","column","x","y","color","size","detail"]),square:i.toMap(["row","column","x","y","color","size","detail"]),point:i.toMap(["row","column","x","y","color","size","detail","shape"]),text:i.toMap(["row","column","size","color","text"])},n.getEncodingMappingError=r},{"./mark":36,"./util":41}]},{},[8])(8)});
//# sourceMappingURL=compass.min.js.map
