[
  {
    "data": {"url": "data/movies.json"},
    "mark": "point",
    "transform": {"filter": "datum.Running_Time_min > 0"},
    "encoding": {
      "x": {
        "field": "Title",
        "type": "nominal",
        "sort": {"op": "mean", "field": "US_Gross", "order":"descending"}
      },
      "y": {
        "field": "US_Gross",
        "type": "quantitative"
      }
    }
  },
  {
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0"},
  "encoding": {
    "x": {
      "field": "Title",
      "type": "nominal",
      "sort": {"op": "mean", "field": "IMDB_Rating", "order":"descending"}
    },
    "y": {
      "field": "IMDB_Rating",
      "type": "quantitative"
    },
    "size":{
      "field": "US_Gross",
      "type": "quantitative"
    }
  }
},
{
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0"},
  "encoding": {
    "x": {
      "field": "Major_Genre",
      "type": "nominal",
      "sort": {"op": "mean", "field": "Worldwide_Gross", "order":"descending"}
    },
    "y": {
      "field": "Worldwide_Gross",
      "type": "quantitative",
      "aggregate": "mean"
    },
    "size": {
      "field":"*",
      "aggregate" : "count"
    }
  }
},
{
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0"},
  "encoding": {
    "x": {
      "field": "Production_Budget",
      "type": "quantitative"
    },
    "y": {
      "field": "Worldwide_Gross",
      "type": "quantitative"
    },

    "column":{
      "field":"Major_Genre",
      "type": "nominal"
    }


  }
},
{
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0 && datum.Major_Genre === 'Drama'"},
  "encoding": {
    "x": {
      "field": "Production_Budget",
      "type": "quantitative"
    },
    "y": {
      "field": "Worldwide_Gross",
      "type": "quantitative"
    },

    "column":{
      "field":"Running_Time_min",
      "type": "quantitative",
      "bin": true
    }


  }
},
{
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0 && datum.Major_Genre === 'Drama'"},
  "encoding": {
    "x": {
      "field": "Production_Budget",
      "type": "quantitative"
    },
    "y": {
      "field": "Worldwide_Gross",
      "type": "quantitative"
    },

    "column":{
      "field":"Creative_Type",
      "type": "nominal"
    }
  }
},

{
  "data": {"url": "data/movies.json"},
  "mark": "bar",
  "transform": {"filter": "datum.Running_Time_min > 0 ",
    "calculate": [{"field": "Profit","expr": "datum.Worldwide_Gross - datum.Production_Budget"}]
  },
  "encoding": {
    "x": {
      "field": "Major_Genre",
      "type": "nominal",
      "sort": {"op":"mean","field":"Profit", "order":"descending"}
    },
    "y": {
      "field": "Profit",
      "aggregate":"mean",
      "type":"quantitative"
    }
  }
},
{
  "data": {"url": "data/movies.json"},
  "mark": "point",
  "transform": {"filter": "datum.Running_Time_min > 0 ",
    "calculate": [{"field": "Profit","expr": "datum.Worldwide_Gross - datum.Production_Budget"}]
  },
  "encoding": {
    "x": {
      "field": "Major_Genre",
      "type": "nominal",
      "sort": {"op":"mean","field":"Profit", "order":"descending"}
    },
    "y": {
      "field": "Profit",
      "aggregate":"mean",
      "type":"quantitative"
    },
    "size":{
      "field":"Profit",
      "aggregate":"stdev",
      "type":"quantitative"
    }

  }
}
]
