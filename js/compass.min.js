!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.cp=e()}}(function(){var e;return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!u&&s)return s(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){function r(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t]]=1;return r}function i(e){var t,n=[];for(t in e)n.push(t);return n}t.exports=function(t){function n(e){var t={code:a(e),globals:i(E),fields:i(g),dataSources:i(O),defs:s};return E={},g={},O={},t}function a(e){if("string"==typeof e)return e;var t=m[e.type];if(null==t)throw new Error("Unsupported type: "+e.type);return t(e)}t=t||{};var o=t.constants||e("./constants"),u=(t.functions||e("./functions"))(a),s=t.functionDefs?t.functionDefs(a):{},c=t.idWhiteList?r(t.idWhiteList):null,l=t.idBlackList?r(t.idBlackList):null,f=0,d=t.fieldVar||"datum",p=t.globalVar||"signals",E={},g={},O={},h="function"==typeof p?p:function(e){return p+'["'+e+'"]'},m={Literal:function(e){return e.raw},Identifier:function(e){var t=e.name;if(f>0)return t;if(o.hasOwnProperty(t))return o[t];if(c)return c.hasOwnProperty(t)?t:(E[t]=1,h(t));if(l&&l.hasOwnProperty(t))throw new Error("Illegal identifier: "+t);return t},Program:function(e){return e.body.map(a).join("\n")},MemberExpression:function(e){var t=!e.computed,n=a(e.object);t&&(f+=1);var r=a(e.property);return n===d&&(g[r]=1),t&&(f-=1),n+(t?"."+r:"["+r+"]")},CallExpression:function(e){if("Identifier"!==e.callee.type)throw new Error("Illegal callee type: "+e.callee.type);var t=e.callee.name,n=e.arguments,r=u.hasOwnProperty(t)&&u[t];if(!r)throw new Error("Unrecognized function: "+t);return r instanceof Function?r(n,E,g,O):r+"("+n.map(a).join(",")+")"},ArrayExpression:function(e){return"["+e.elements.map(a).join(",")+"]"},BinaryExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},UnaryExpression:function(e){return"("+e.operator+a(e.argument)+")"},ConditionalExpression:function(e){return"("+a(e.test)+"?"+a(e.consequent)+":"+a(e.alternate)+")"},LogicalExpression:function(e){return"("+a(e.left)+e.operator+a(e.right)+")"},ObjectExpression:function(e){return"{"+e.properties.map(a).join(",")+"}"},Property:function(e){f+=1;var t=a(e.key);return f-=1,t+":"+a(e.value)},ExpressionStatement:function(e){return a(e.expression)}};return n.functions=u,n.functionDefs=s,n.constants=o,n}},{"./constants":3,"./functions":4}],3:[function(e,t,n){t.exports={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"}},{}],4:[function(e,t,n){t.exports=function(e){function t(t,n,r,i){var a=e(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+t+(0>i?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}function n(e,n,r){return function(i){return t(e,i,n,r)}}var r="new Date",i="String",a="RegExp";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){if(t.length<3)throw new Error("Missing arguments to clamp function.");if(t.length>3)throw new Error("Too many arguments to clamp function.");var n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),slice:n("slice",i),substring:n("substring",i),replace:n("replace",i),regexp:a,test:n("test",a),"if":function(t){if(t.length<3)throw new Error("Missing arguments to if function.");if(t.length>3)throw new Error("Too many arguments to if function.");var n=t.map(e);return n[0]+"?"+n[1]+":"+n[2]}}}},{}],5:[function(e,t,n){var r=e("./parser"),i=e("./codegen"),a=t.exports={parse:function(e,t){return r.parse("("+e+")",t)},code:function(e){return i(e)},compiler:function(e,t){e=e.slice();var n=i(t),r=e.length,o=function(t){var i=n(a.parse(t));e[r]='"use strict"; return ('+i.code+");";var o=Function.apply(null,e);return i.fn=e.length>8?function(){return o.apply(i,arguments)}:function(e,t,n,r,a,u,s){return o.call(i,e,t,n,r,a,u,s)},i};return o.codegen=n,o},functions:e("./functions"),constants:e("./constants")}},{"./codegen":2,"./constants":3,"./functions":4,"./parser":6}],6:[function(e,t,n){t.exports=function(){"use strict";function e(e,t){if(!e)throw new Error("ASSERT: "+t)}function t(e){return e>=48&&57>=e}function n(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function r(e){return"01234567".indexOf(e)>=0}function i(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function a(e){return 10===e||13===e||8232===e||8233===e}function o(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||92===e||e>=128&&Se.NonAsciiIdentifierStart.test(String.fromCharCode(e))}function u(e){return 36===e||95===e||e>=65&&90>=e||e>=97&&122>=e||e>=48&&57>=e||92===e||e>=128&&Se.NonAsciiIdentifierPart.test(String.fromCharCode(e))}function s(e){switch(e){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function c(e){switch(e){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function l(e){if(_e&&c(e))return!0;switch(e.length){case 2:return"if"===e||"in"===e||"do"===e;case 3:return"var"===e||"for"===e||"new"===e||"try"===e||"let"===e;case 4:return"this"===e||"else"===e||"case"===e||"void"===e||"with"===e||"enum"===e;case 5:return"while"===e||"break"===e||"catch"===e||"throw"===e||"const"===e||"yield"===e||"class"===e||"super"===e;case 6:return"return"===e||"typeof"===e||"delete"===e||"switch"===e||"export"===e||"import"===e;case 7:return"default"===e||"finally"===e||"extends"===e;case 8:return"function"===e||"continue"===e||"debugger"===e;case 10:return"instanceof"===e;default:return!1}}function f(){var e,t;for(t=0===Ie;De>Ie;)if(e=Me.charCodeAt(Ie),i(e))++Ie;else{if(!a(e))break;++Ie,13===e&&10===Me.charCodeAt(Ie)&&++Ie,++Re,Ce=Ie,t=!0}}function d(e){var t,r,i,a=0;for(r="u"===e?4:2,t=0;r>t;++t){if(!(De>Ie&&n(Me[Ie])))return"";i=Me[Ie++],a=16*a+"0123456789abcdef".indexOf(i.toLowerCase())}return String.fromCharCode(a)}function p(){var e,t,r,i;for(e=Me[Ie],t=0,"}"===e&&Y({},Ne.UnexpectedToken,"ILLEGAL");De>Ie&&(e=Me[Ie++],n(e));)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&Y({},Ne.UnexpectedToken,"ILLEGAL"),65535>=t?String.fromCharCode(t):(r=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(r,i))}function E(){var e,t;for(e=Me.charCodeAt(Ie++),t=String.fromCharCode(e),92===e&&(117!==Me.charCodeAt(Ie)&&Y({},Ne.UnexpectedToken,"ILLEGAL"),++Ie,e=d("u"),e&&"\\"!==e&&o(e.charCodeAt(0))||Y({},Ne.UnexpectedToken,"ILLEGAL"),t=e);De>Ie&&(e=Me.charCodeAt(Ie),u(e));)++Ie,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Me.charCodeAt(Ie)&&Y({},Ne.UnexpectedToken,"ILLEGAL"),++Ie,e=d("u"),e&&"\\"!==e&&u(e.charCodeAt(0))||Y({},Ne.UnexpectedToken,"ILLEGAL"),t+=e);return t}function g(){var e,t;for(e=Ie++;De>Ie;){if(t=Me.charCodeAt(Ie),92===t)return Ie=e,E();if(!u(t))break;++Ie}return Me.slice(e,Ie)}function O(){var e,t,n;return e=Ie,t=92===Me.charCodeAt(Ie)?E():g(),n=1===t.length?Te.Identifier:l(t)?Te.Keyword:"null"===t?Te.NullLiteral:"true"===t||"false"===t?Te.BooleanLiteral:Te.Identifier,{type:n,value:t,lineNumber:Re,lineStart:Ce,start:e,end:Ie}}function h(){var e,t,n,r,i=Ie,a=Me.charCodeAt(Ie),o=Me[Ie];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Ie,xe.tokenize&&(40===a?xe.openParenToken=xe.tokens.length:123===a&&(xe.openCurlyToken=xe.tokens.length)),{type:Te.Punctuator,value:String.fromCharCode(a),lineNumber:Re,lineStart:Ce,start:i,end:Ie};default:if(e=Me.charCodeAt(Ie+1),61===e)switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Ie+=2,{type:Te.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(e),lineNumber:Re,lineStart:Ce,start:i,end:Ie};case 33:case 61:return Ie+=2,61===Me.charCodeAt(Ie)&&++Ie,{type:Te.Punctuator,value:Me.slice(i,Ie),lineNumber:Re,lineStart:Ce,start:i,end:Ie}}}return r=Me.substr(Ie,4),">>>="===r?(Ie+=4,{type:Te.Punctuator,value:r,lineNumber:Re,lineStart:Ce,start:i,end:Ie}):(n=r.substr(0,3),">>>"===n||"<<="===n||">>="===n?(Ie+=3,{type:Te.Punctuator,value:n,lineNumber:Re,lineStart:Ce,start:i,end:Ie}):(t=n.substr(0,2),o===t[1]&&"+-<>&|".indexOf(o)>=0||"=>"===t?(Ie+=2,{type:Te.Punctuator,value:t,lineNumber:Re,lineStart:Ce,start:i,end:Ie}):"<>=!+-*%&|^/".indexOf(o)>=0?(++Ie,{type:Te.Punctuator,value:o,lineNumber:Re,lineStart:Ce,start:i,end:Ie}):void Y({},Ne.UnexpectedToken,"ILLEGAL")))}function m(e){for(var t="";De>Ie&&n(Me[Ie]);)t+=Me[Ie++];return 0===t.length&&Y({},Ne.UnexpectedToken,"ILLEGAL"),o(Me.charCodeAt(Ie))&&Y({},Ne.UnexpectedToken,"ILLEGAL"),{type:Te.NumericLiteral,value:parseInt("0x"+t,16),lineNumber:Re,lineStart:Ce,start:e,end:Ie}}function T(e){for(var n="0"+Me[Ie++];De>Ie&&r(Me[Ie]);)n+=Me[Ie++];return(o(Me.charCodeAt(Ie))||t(Me.charCodeAt(Ie)))&&Y({},Ne.UnexpectedToken,"ILLEGAL"),{type:Te.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:Re,lineStart:Ce,start:e,end:Ie}}function A(){var n,i,a;if(a=Me[Ie],e(t(a.charCodeAt(0))||"."===a,"Numeric literal must start with a decimal digit or a decimal point"),i=Ie,n="","."!==a){if(n=Me[Ie++],a=Me[Ie],"0"===n){if("x"===a||"X"===a)return++Ie,m(i);if(r(a))return T(i);a&&t(a.charCodeAt(0))&&Y({},Ne.UnexpectedToken,"ILLEGAL")}for(;t(Me.charCodeAt(Ie));)n+=Me[Ie++];a=Me[Ie]}if("."===a){for(n+=Me[Ie++];t(Me.charCodeAt(Ie));)n+=Me[Ie++];a=Me[Ie]}if("e"===a||"E"===a)if(n+=Me[Ie++],a=Me[Ie],"+"!==a&&"-"!==a||(n+=Me[Ie++]),t(Me.charCodeAt(Ie)))for(;t(Me.charCodeAt(Ie));)n+=Me[Ie++];else Y({},Ne.UnexpectedToken,"ILLEGAL");return o(Me.charCodeAt(Ie))&&Y({},Ne.UnexpectedToken,"ILLEGAL"),{type:Te.NumericLiteral,value:parseFloat(n),lineNumber:Re,lineStart:Ce,start:i,end:Ie}}function y(){var t,n,i,o,u,s,c,l,f="",E=!1;for(c=Re,l=Ce,t=Me[Ie],e("'"===t||'"'===t,"String literal must starts with a quote"),n=Ie,++Ie;De>Ie;){if(i=Me[Ie++],i===t){t="";break}if("\\"===i)if(i=Me[Ie++],i&&a(i.charCodeAt(0)))++Re,"\r"===i&&"\n"===Me[Ie]&&++Ie,Ce=Ie;else switch(i){case"u":case"x":"{"===Me[Ie]?(++Ie,f+=p()):(s=Ie,u=d(i),u?f+=u:(Ie=s,f+=i));break;case"n":f+="\n";break;case"r":f+="\r";break;case"t":f+="	";break;case"b":f+="\b";break;case"f":f+="\f";break;case"v":f+="\x0B";break;default:r(i)?(o="01234567".indexOf(i),0!==o&&(E=!0),De>Ie&&r(Me[Ie])&&(E=!0,o=8*o+"01234567".indexOf(Me[Ie++]),"0123".indexOf(i)>=0&&De>Ie&&r(Me[Ie])&&(o=8*o+"01234567".indexOf(Me[Ie++]))),f+=String.fromCharCode(o)):f+=i}else{if(a(i.charCodeAt(0)))break;f+=i}}return""!==t&&Y({},Ne.UnexpectedToken,"ILLEGAL"),{type:Te.StringLiteral,value:f,octal:E,startLineNumber:c,startLineStart:l,lineNumber:Re,lineStart:Ce,start:n,end:Ie}}function v(e,t){var n,r=e;t.indexOf("u")>=0&&(r=r.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(e,t){return parseInt(t,16)<=1114111?"x":void Y({},Ne.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{n=new RegExp(r)}catch(i){Y({},Ne.InvalidRegExp)}try{return new RegExp(e,t)}catch(a){return null}}function N(){var t,n,r,i,o;for(t=Me[Ie],e("/"===t,"Regular expression literal must start with a slash"),n=Me[Ie++],r=!1,i=!1;De>Ie;)if(t=Me[Ie++],n+=t,"\\"===t)t=Me[Ie++],a(t.charCodeAt(0))&&Y({},Ne.UnterminatedRegExp),n+=t;else if(a(t.charCodeAt(0)))Y({},Ne.UnterminatedRegExp);else if(r)"]"===t&&(r=!1);else{if("/"===t){i=!0;break}"["===t&&(r=!0)}return i||Y({},Ne.UnterminatedRegExp),o=n.substr(1,n.length-2),{value:o,literal:n}}function S(){var e,t,n,r;for(t="",n="";De>Ie&&(e=Me[Ie],u(e.charCodeAt(0)));)if(++Ie,"\\"===e&&De>Ie)if(e=Me[Ie],"u"===e){if(++Ie,r=Ie,e=d("u"))for(n+=e,t+="\\u";Ie>r;++r)t+=Me[r];else Ie=r,n+="u",t+="\\u";V({},Ne.UnexpectedToken,"ILLEGAL")}else t+="\\",V({},Ne.UnexpectedToken,"ILLEGAL");else n+=e,t+=e;return{value:n,literal:t}}function M(){var e,t,n,r;return Le=null,f(),e=Ie,t=N(),n=S(),r=v(t.value,n.value),xe.tokenize?{type:Te.RegularExpression,value:r,regex:{pattern:t.value,flags:n.value},lineNumber:Re,lineStart:Ce,start:e,end:Ie}:{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Ie}}function _(){var e,t,n,r;return f(),e=Ie,t={start:{line:Re,column:Ie-Ce}},n=M(),t.end={line:Re,column:Ie-Ce},xe.tokenize||(xe.tokens.length>0&&(r=xe.tokens[xe.tokens.length-1],r.range[0]===e&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||xe.tokens.pop())),xe.tokens.push({type:"RegularExpression",value:n.literal,regex:n.regex,range:[e,Ie],loc:t})),n}function I(e){return e.type===Te.Identifier||e.type===Te.Keyword||e.type===Te.BooleanLiteral||e.type===Te.NullLiteral}function R(){var e,t;if(e=xe.tokens[xe.tokens.length-1],!e)return _();if("Punctuator"===e.type){if("]"===e.value)return h();if(")"===e.value)return t=xe.tokens[xe.openParenToken-1],!t||"Keyword"!==t.type||"if"!==t.value&&"while"!==t.value&&"for"!==t.value&&"with"!==t.value?h():_();if("}"===e.value){if(xe.tokens[xe.openCurlyToken-3]&&"Keyword"===xe.tokens[xe.openCurlyToken-3].type){if(t=xe.tokens[xe.openCurlyToken-4],!t)return h()}else{if(!xe.tokens[xe.openCurlyToken-4]||"Keyword"!==xe.tokens[xe.openCurlyToken-4].type)return h();if(t=xe.tokens[xe.openCurlyToken-5],!t)return _()}return h()}return _()}return"Keyword"===e.type&&"this"!==e.value?_():h()}function C(){var e;return f(),Ie>=De?{type:Te.EOF,lineNumber:Re,lineStart:Ce,start:Ie,end:Ie}:(e=Me.charCodeAt(Ie),o(e)?O():40===e||41===e||59===e?h():39===e||34===e?y():46===e?t(Me.charCodeAt(Ie+1))?A():h():t(e)?A():xe.tokenize&&47===e?R():h())}function D(){var e,t,n,r;return f(),e={start:{line:Re,column:Ie-Ce}},t=C(),e.end={line:Re,column:Ie-Ce},t.type!==Te.EOF&&(n=Me.slice(t.start,t.end),r={type:Ae[t.type],value:n,range:[t.start,t.end],loc:e},t.regex&&(r.regex={pattern:t.regex.pattern,flags:t.regex.flags}),xe.tokens.push(r)),t}function L(){var e;return e=Le,Ie=e.end,Re=e.lineNumber,Ce=e.lineStart,Le="undefined"!=typeof xe.tokens?D():C(),Ie=e.end,Re=e.lineNumber,Ce=e.lineStart,e}function U(){var e,t,n;e=Ie,t=Re,n=Ce,Le="undefined"!=typeof xe.tokens?D():C(),Ie=e,Re=t,Ce=n}function x(){this.line=Re,this.column=Ie-Ce}function b(){this.start=new x,this.end=null}function w(e){e.type===Te.StringLiteral?this.start={line:e.startLineNumber,column:e.start-e.startLineStart}:this.start={line:e.lineNumber,column:e.start-e.lineStart},this.end=null}function P(){Ie=Le.start,Le.type===Te.StringLiteral?(Re=Le.startLineNumber,Ce=Le.startLineStart):(Re=Le.lineNumber,Ce=Le.lineStart),xe.range&&(this.range=[Ie,0]),xe.loc&&(this.loc=new b)}function k(e){xe.range&&(this.range=[e.start,0]),xe.loc&&(this.loc=new w(e))}function F(){var e,t,n,r;return e=Ie,t=Re,n=Ce,f(),r=Re!==t,Ie=e,Re=t,Ce=n,r}function Y(t,n){var r,i=Array.prototype.slice.call(arguments,2),a=n.replace(/%(\d)/g,function(t,n){return e(n<i.length,"Message reference must be in range"),i[n]});throw"number"==typeof t.lineNumber?(r=new Error("Line "+t.lineNumber+": "+a),r.index=t.start,r.lineNumber=t.lineNumber,r.column=t.start-Ce+1):(r=new Error("Line "+Re+": "+a),r.index=Ie,r.lineNumber=Re,r.column=Ie-Ce+1),r.description=a,r}function V(){try{Y.apply(null,arguments)}catch(e){if(!xe.errors)throw e;xe.errors.push(e)}}function H(e){if(e.type===Te.EOF&&Y(e,Ne.UnexpectedEOS),e.type===Te.NumericLiteral&&Y(e,Ne.UnexpectedNumber),e.type===Te.StringLiteral&&Y(e,Ne.UnexpectedString),e.type===Te.Identifier&&Y(e,Ne.UnexpectedIdentifier),e.type===Te.Keyword){if(s(e.value))Y(e,Ne.UnexpectedReserved);else if(_e&&c(e.value))return void V(e,Ne.StrictReservedWord);Y(e,Ne.UnexpectedToken,e.value)}Y(e,Ne.UnexpectedToken,e.value)}function G(e){var t=L();t.type===Te.Punctuator&&t.value===e||H(t)}function X(e){if(xe.errors){var t=Le;t.type!==Te.Punctuator&&t.value!==e?V(t,Ne.UnexpectedToken,t.value):L()}else G(e)}function j(e){return Le.type===Te.Punctuator&&Le.value===e}function W(e){return Le.type===Te.Keyword&&Le.value===e}function B(){var e;return 59===Me.charCodeAt(Ie)||j(";")?void L():(e=Re,f(),void(Re===e&&(Le.type===Te.EOF||j("}")||H(Le))))}function Q(){var e=[],t=new P;for(G("[");!j("]");)j(",")?(L(),e.push(null)):(e.push(ce()),j("]")||G(","));return L(),t.finishArrayExpression(e)}function q(){var e,t=new P;return e=L(),e.type===Te.StringLiteral||e.type===Te.NumericLiteral?(_e&&e.octal&&V(e,Ne.StrictOctalLiteral),t.finishLiteral(e)):t.finishIdentifier(e.value)}function K(){var e,t,n,r,i=new P;return e=Le,e.type===Te.Identifier?(n=q(),G(":"),r=ce(),i.finishProperty("init",n,r)):e.type!==Te.EOF&&e.type!==Te.Punctuator?(t=q(),G(":"),r=ce(),i.finishProperty("init",t,r)):void H(e)}function Z(){var e,t,n,r,i=[],a={},o=String,u=new P;for(G("{");!j("}");)e=K(),t=e.key.type===ye.Identifier?e.key.name:o(e.key.value),r="init"===e.kind?ve.Data:"get"===e.kind?ve.Get:ve.Set,n="$"+t,Object.prototype.hasOwnProperty.call(a,n)?(a[n]===ve.Data?_e&&r===ve.Data?V({},Ne.StrictDuplicateProperty):r!==ve.Data&&V({},Ne.AccessorDataProperty):r===ve.Data?V({},Ne.AccessorDataProperty):a[n]&r&&V({},Ne.AccessorGetSet),a[n]|=r):a[n]=r,i.push(e),j("}")||X(",");return G("}"),u.finishObjectExpression(i)}function z(){var e;return G("("),++Ue.parenthesisCount,e=le(),G(")"),e}function J(){var e,t,n,r;if(j("("))return z();if(j("["))return Q();if(j("{"))return Z();if(e=Le.type,r=new P,e===Te.Identifier||be[Le.value])n=r.finishIdentifier(L().value);else if(e===Te.StringLiteral||e===Te.NumericLiteral)_e&&Le.octal&&V(Le,Ne.StrictOctalLiteral),n=r.finishLiteral(L());else{if(e===Te.Keyword)throw new Error("Disabled.");e===Te.BooleanLiteral?(t=L(),t.value="true"===t.value,n=r.finishLiteral(t)):e===Te.NullLiteral?(t=L(),t.value=null,n=r.finishLiteral(t)):j("/")||j("/=")?(n="undefined"!=typeof xe.tokens?r.finishLiteral(_()):r.finishLiteral(M()),U()):H(L())}return n}function $(){var e=[];if(G("("),!j(")"))for(;De>Ie&&(e.push(ce()),!j(")"));)X(",");return G(")"),e}function ee(){var e,t=new P;return e=L(),I(e)||H(e),t.finishIdentifier(e.value)}function te(){return G("."),ee()}function ne(){var e;return G("["),e=le(),G("]"),e}function re(){var e,t,n,r,i=Ue.allowIn;for(r=Le,Ue.allowIn=!0,e=J();;)if(j("."))n=te(),e=new k(r).finishMemberExpression(".",e,n);else if(j("("))t=$(),e=new k(r).finishCallExpression(e,t);else{if(!j("["))break;n=ne(),e=new k(r).finishMemberExpression("[",e,n)}return Ue.allowIn=i,e}function ie(){var e=re();if(Le.type===Te.Punctuator&&(j("++")||j("--"))&&!F())throw new Error("Disabled.");return e}function ae(){var e,t,n;if(Le.type!==Te.Punctuator&&Le.type!==Te.Keyword)t=ie();else{if(j("++")||j("--"))throw new Error("Disabled.");if(j("+")||j("-")||j("~")||j("!"))n=Le,e=L(),t=ae(),t=new k(n).finishUnaryExpression(e.value,t);else{if(W("delete")||W("void")||W("typeof"))throw new Error("Disabled.");t=ie()}}return t}function oe(e,t){var n=0;if(e.type!==Te.Punctuator&&e.type!==Te.Keyword)return 0;switch(e.value){case"||":n=1;break;case"&&":n=2;break;case"|":n=3;break;case"^":n=4;break;case"&":n=5;break;case"==":case"!=":case"===":case"!==":n=6;break;case"<":case">":case"<=":case">=":case"instanceof":n=7;break;case"in":n=t?7:0;break;case"<<":case">>":case">>>":n=8;break;case"+":case"-":n=9;break;case"*":case"/":case"%":n=11}return n}function ue(){var e,t,n,r,i,a,o,u,s,c;if(e=Le,s=ae(),r=Le,i=oe(r,Ue.allowIn),0===i)return s;for(r.prec=i,L(),t=[e,Le],o=ae(),a=[s,r,o];(i=oe(Le,Ue.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),t.pop(),n=new k(t[t.length-1]).finishBinaryExpression(u,s,o),a.push(n);r=L(),r.prec=i,a.push(r),t.push(Le),n=ae(),a.push(n)}for(c=a.length-1,n=a[c],t.pop();c>1;)n=new k(t.pop()).finishBinaryExpression(a[c-1].value,a[c-2],n),c-=2;return n}function se(){var e,t,n,r,i;return i=Le,e=ue(),j("?")&&(L(),t=Ue.allowIn,Ue.allowIn=!0,n=ce(),Ue.allowIn=t,G(":"),r=ce(),e=new k(i).finishConditionalExpression(e,n,r)),e}function ce(){var e,t,n,r;return e=Ue.parenthesisCount,r=Le,t=Le,n=se()}function le(){var e=ce();if(j(","))throw new Error("Disabled.");return e}function fe(e){var t=le();return B(),e.finishExpressionStatement(t)}function de(){var e,t,n=Le.type;if(n===Te.EOF&&H(Le),n===Te.Punctuator&&"{"===Le.value)throw new Error("Disabled.");if(t=new P,n===Te.Punctuator)switch(Le.value){case";":throw new Error("Disabled.");case"(":return fe(t)}else if(n===Te.Keyword)throw new Error("Disabled.");return e=le(),B(),t.finishExpressionStatement(e)}function pe(){if(Le.type===Te.Keyword)switch(Le.value){case"const":case"let":throw new Error("Disabled.");case"function":throw new Error("Disabled.");default:return de()}return Le.type!==Te.EOF?de():void 0}function Ee(){for(var e,t,n,r,i=[];De>Ie&&(t=Le,t.type===Te.StringLiteral)&&(e=pe(),i.push(e),e.expression.type===ye.Literal);)n=Me.slice(t.start+1,t.end-1),"use strict"===n?(_e=!0,r&&V(r,Ne.StrictOctalLiteral)):!r&&t.octal&&(r=t);for(;De>Ie&&(e=pe(),"undefined"!=typeof e);)i.push(e);return i}function ge(){var e,t;return f(),U(),t=new P,_e=!0,e=Ee(),t.finishProgram(e)}function Oe(){var e,t,n,r=[];for(e=0;e<xe.tokens.length;++e)t=xe.tokens[e],n={type:t.type,value:t.value},t.regex&&(n.regex={pattern:t.regex.pattern,flags:t.regex.flags}),xe.range&&(n.range=t.range),xe.loc&&(n.loc=t.loc),r.push(n);xe.tokens=r}function he(e,t){var n,r;n=String,"string"==typeof e||e instanceof String||(e=n(e)),Me=e,Ie=0,Re=Me.length>0?1:0,Ce=0,De=Me.length,Le=null,Ue={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},xe={},t=t||{},t.tokens=!0,xe.tokens=[],xe.tokenize=!0,xe.openParenToken=-1,xe.openCurlyToken=-1,xe.range="boolean"==typeof t.range&&t.range,xe.loc="boolean"==typeof t.loc&&t.loc,"boolean"==typeof t.tolerant&&t.tolerant&&(xe.errors=[]);try{if(U(),Le.type===Te.EOF)return xe.tokens;for(L();Le.type!==Te.EOF;)try{L()}catch(i){if(xe.errors){xe.errors.push(i);break}throw i}Oe(),r=xe.tokens,"undefined"!=typeof xe.errors&&(r.errors=xe.errors)}catch(a){throw a}finally{xe={}}return r}function me(e,t){var n,r;r=String,"string"==typeof e||e instanceof String||(e=r(e)),Me=e,Ie=0,Re=Me.length>0?1:0,Ce=0,De=Me.length,Le=null,Ue={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},xe={},"undefined"!=typeof t&&(xe.range="boolean"==typeof t.range&&t.range,xe.loc="boolean"==typeof t.loc&&t.loc,xe.loc&&null!==t.source&&void 0!==t.source&&(xe.source=r(t.source)),"boolean"==typeof t.tokens&&t.tokens&&(xe.tokens=[]),"boolean"==typeof t.tolerant&&t.tolerant&&(xe.errors=[]));try{n=ge(),"undefined"!=typeof xe.tokens&&(Oe(),n.tokens=xe.tokens),"undefined"!=typeof xe.errors&&(n.errors=xe.errors)}catch(i){throw i}finally{xe={}}return n}var Te,Ae,ye,ve,Ne,Se,Me,_e,Ie,Re,Ce,De,Le,Ue,xe;Te={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},Ae={},Ae[Te.BooleanLiteral]="Boolean",Ae[Te.EOF]="<end>",Ae[Te.Identifier]="Identifier",Ae[Te.Keyword]="Keyword",Ae[Te.NullLiteral]="Null",Ae[Te.NumericLiteral]="Numeric",Ae[Te.Punctuator]="Punctuator",Ae[Te.StringLiteral]="String",Ae[Te.RegularExpression]="RegularExpression",ye={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BinaryExpression:"BinaryExpression",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ExpressionStatement:"ExpressionStatement",Identifier:"Identifier",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",UnaryExpression:"UnaryExpression"},ve={Data:1,Get:2,Set:4},Ne={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},Se={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢲऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԯԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠ-ࢲࣤ-ॣ०-९ॱ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఀ-ఃఅ-ఌఎ-ఐఒ-నప-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಁ-ಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲഁ-ഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟ෦-෯ෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤞᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧ᪰-᪽ᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶ᳸᳹ᴀ-᷵᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚝꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞭꞰꞱꟷ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꧠ-ꧾꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭟꭤꭥꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︭︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")},k.prototype=P.prototype={finish:function(){xe.range&&(this.range[1]=Ie),xe.loc&&(this.loc.end=new x,xe.source&&(this.loc.source=xe.source))},finishArrayExpression:function(e){return this.type=ye.ArrayExpression,this.elements=e,this.finish(),this},finishAssignmentExpression:function(e,t,n){return this.type=ye.AssignmentExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishBinaryExpression:function(e,t,n){return this.type="||"===e||"&&"===e?ye.LogicalExpression:ye.BinaryExpression,this.operator=e,this.left=t,this.right=n,this.finish(),this},finishCallExpression:function(e,t){return this.type=ye.CallExpression,this.callee=e,this.arguments=t,this.finish(),this},finishConditionalExpression:function(e,t,n){return this.type=ye.ConditionalExpression,this.test=e,this.consequent=t,this.alternate=n,this.finish(),this},finishExpressionStatement:function(e){return this.type=ye.ExpressionStatement,this.expression=e,this.finish(),this},finishIdentifier:function(e){return this.type=ye.Identifier,this.name=e,this.finish(),this},finishLiteral:function(e){return this.type=ye.Literal,this.value=e.value,this.raw=Me.slice(e.start,e.end),e.regex&&("//"==this.raw&&(this.raw="/(?:)/"),this.regex=e.regex),this.finish(),this},finishMemberExpression:function(e,t,n){return this.type=ye.MemberExpression,this.computed="["===e,this.object=t,this.property=n,this.finish(),this},finishObjectExpression:function(e){return this.type=ye.ObjectExpression,this.properties=e,this.finish(),this},finishProgram:function(e){return this.type=ye.Program,this.body=e,this.finish(),this},finishProperty:function(e,t,n){return this.type=ye.Property,this.key=t,this.value=n,this.kind=e,this.finish(),this},finishUnaryExpression:function(e,t){return this.type=ye.UnaryExpression,this.operator=e,this.argument=t,this.prefix=!0,this.finish(),this}};var be={"if":1,"this":1};return{tokenize:he,parse:me}}()},{}],7:[function(e,t,n){"use strict";var r=e("vega-lite/src/channel"),i=e("vega-lite/src/mark");n.DEFAULT_PROJECTION_OPT={omitDotPlot:!1,maxCardinalityForAutoAddOrdinal:50,alwaysAddHistogram:!0,maxAdditionalVariables:1},function(e){e[e.BOTH="both"]="BOTH",e[e.AGGREGATED="aggregated"]="AGGREGATED",e[e.DISAGGREGATED="disaggregated"]="DISAGGREGATED"}(n.TableType||(n.TableType={}));var a=n.TableType;!function(e){e[e.AUTO="auto"]="AUTO",e[e.BIN="bin"]="BIN",e[e.CAST="cast"]="CAST",e[e.NONE="none"]="NONE"}(n.QuantitativeDimensionType||(n.QuantitativeDimensionType={}));var o=n.QuantitativeDimensionType;n.DEFAULT_AGGREGATION_OPTIONS={tableTypes:a.BOTH,genDimQ:o.AUTO,minCardinalityForBin:20,omitDotPlot:!1,omitMeasureOnly:!1,omitDimensionOnly:!0,addCountForDimensionOnly:!0,aggrList:[void 0,"mean"],timeUnitList:["year"],consistentAutoQ:!0},n.DEFAULT_SCALE_OPTION={rescaleQuantitative:[void 0]},n.DEFAULT_SPEC_OPTION={
markList:[i.Mark.POINT,i.Mark.BAR,i.Mark.LINE,i.Mark.AREA,i.Mark.TEXT,i.Mark.TICK],channelList:[r.X,r.Y,r.ROW,r.COLUMN,r.SIZE,r.COLOR,r.TEXT,r.DETAIL],alwaysGenerateTableAsHeatmap:!0,maxGoodCardinalityForFacets:5,maxCardinalityForFacets:20,maxGoodCardinalityForColor:7,maxCardinalityForColor:20,maxCardinalityForShape:6,omitDotPlot:!1,omitDotPlotWithExtraEncoding:!0,omitDotPlotWithFacet:!0,omitDotPlotWithOnlyCount:!1,omitMultipleNonPositionalChannels:!0,omitNonTextAggrWithAllDimsOnFacets:!0,omitRawWithXYBothDimension:!0,omitShapeWithBin:!0,omitShapeWithTimeDimension:!0,omitSizeOnBar:!0,omitLengthForLogScale:!0,omitStackedAverage:!0,omitTranspose:!0}},{"vega-lite/src/channel":31,"vega-lite/src/mark":36}],8:[function(e,t,n){"use strict";var r=e("./consts"),i=e("./gen/gen"),a=e("./rank/rank"),o=e("./util"),u=e("./trans/trans");n.consts=r,n.gen=i,n.rank=a,n.util=o,n.trans=u,n.auto="-, sum",n.version="0.7.1"},{"./consts":7,"./gen/gen":11,"./rank/rank":15,"./trans/trans":19,"./util":20}],9:[function(e,t,n){"use strict";function r(e,t,n,r){function f(t){t=s.duplicate(t),t.key=t.map(function(e){return a.shortenFieldDef(e)}).join(a.DELIM),e.push(t)}function d(){if(r.omitMeasureOnly||r.omitDimensionOnly){var e=!1,t=!1,n=!1;if(T.forEach(function(r){i.isDimension(r)?t=!0:(e=!0,r.aggregate||(n=!0))}),!t&&!n&&r.omitMeasureOnly)return;if(!e&&(r.addCountForDimensionOnly&&(T.push(i.count()),f(T),T.pop()),r.omitDimensionOnly))return}r.omitDotPlot&&1===T.length||f(T)}function p(e,t,n,r){var i=t===!0||null===t,a=t===!1||null===t;r?i&&(T[e].aggregate=r,m(e+1,!0,n),delete T[e].aggregate):a&&m(e+1,!1,n)}function E(e,t,n){T[e].bin=!0,m(e+1,t,n),delete T[e].bin}function g(e,a,f){var d=t[e],g=a===!0||null===a;if(T[e]={field:d.field,type:d.type},d.aggregate===u.AggregateOp.COUNT)g&&(T[e].aggregate=d.aggregate,m(e+1,!0,f));else if(d._aggregate)p(e,a,f,d._aggregate);else if(d._raw)p(e,a,f,void 0);else if(d._bin)E(e,a,f);else if(r.aggrList.forEach(function(t){r.consistentAutoQ&&f!==l&&f!==t||p(e,a,t,t)}),(!r.consistentAutoQ||s.isin(f,[l,"bin","cast","autocast"]))&&!A){var O=i.cardinality(d,n)>r.minCardinalityForBin,h=r.genDimQ===c.QuantitativeDimensionType.AUTO,y=r.genDimQ===c.QuantitativeDimensionType.BIN||h&&O,v=r.genDimQ===c.QuantitativeDimensionType.CAST||h&&!O;y&&s.isin(f,[l,"bin","autocast"])&&E(e,a,h?"autocast":"bin"),v&&s.isin(f,[l,"cast","autocast"])&&(T[e].type=o.Type.ORDINAL,m(e+1,a,h?"autocast":"cast"),T[e].type=o.Type.QUANTITATIVE)}}function O(e,t,n,r){T[e].timeUnit=r,m(e+1,t,n),delete T[e].timeUnit}function h(e,n,i){var a=t[e];T[e]={field:a.field,type:a.type},a._timeUnit?O(e,n,i,a._timeUnit):r.timeUnitList.forEach(function(t){void 0===t?n||m(e+1,!1,i):O(e,n,i,t)})}function m(e,n,r){if(e===t.length)return void d();var i=t[e];switch(i.type){case o.Type.QUANTITATIVE:g(e,n,r);break;case o.Type.TEMPORAL:h(e,n,r);break;case o.Type.ORDINAL:case o.Type.NOMINAL:default:T[e]=i,m(e+1,n,r)}}void 0===r&&(r={}),r=s.extend({},c.DEFAULT_AGGREGATION_OPTIONS,r);var T=new Array(t.length),A=s.any(t,function(e){return e.type===o.Type.NOMINAL||e.type===o.Type.ORDINAL}),y=r.tableTypes===c.TableType.AGGREGATED?!0:r.tableTypes===c.TableType.DISAGGREGATED?!1:null;return m(0,y,l),e}var i=e("vega-lite/src/fielddef"),a=e("vega-lite/src/shorthand"),o=e("vega-lite/src/type"),u=e("vega-lite/src/aggregate"),s=e("../util"),c=e("../consts"),l="*";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../consts":7,"../util":20,"vega-lite/src/aggregate":30,"vega-lite/src/fielddef":34,"vega-lite/src/shorthand":38,"vega-lite/src/type":40}],10:[function(e,t,n){"use strict";function r(e,t,n,r){function a(s){if(s===t.length)return void(d.encoding(u,n,r)&&e.push(o.duplicate(u)));var c=t[s];for(var f in r.channelList){var p=r.channelList[f],E=i.isDimension(c),g=l.getSupportedRole(p);p in u||!(E&&g.dimension||!E&&g.measure)||!d.channel[p](u,c,n,r)||(u[p]=c,a(s+1),delete u[p])}}void 0===r&&(r=s.DEFAULT_SPEC_OPTION);var u={};return a(0),e}var i=e("vega-lite/src/fielddef"),a=e("vega-lite/src/encoding"),o=e("../util"),u=e("./marks"),s=e("../consts"),c=e("vega-lite/src/aggregate"),l=e("vega-lite/src/channel"),f=e("vega-lite/src/type");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var d;!function(e){function t(e,t,n){if(n.omitDotPlot)return!1;if(n.omitTranspose&&e.y)return!1;if(n.omitDotPlotWithFacet&&(e.row||e.column))return!1;if(n.omitDotPlotWithExtraEncoding&&o.keys(e).length>1)return!1;if(n.omitDotPlotWithOnlyCount){if(e.x&&e.x.aggregate===c.AggregateOp.COUNT&&!e.y)return!1;if(e.y&&e.y.aggregate===c.AggregateOp.COUNT&&!e.x)return!1}return!0}function n(e){var t=!1,n=!1;for(var r in e){var a=r,o=e[a];if(o.aggregate&&(t=!0),i.isDimension(o)&&a!==l.ROW&&a!==l.COLUMN&&(n=!0),t&&n)break}return t&&!n}function r(e,t,r){if((e.row||e.column)&&r.omitNonTextAggrWithAllDimsOnFacets&&n(e))return!1;var o=i.isDimension(e.x),u=i.isDimension(e.y);if(r.omitRawWithXYBothDimension&&o&&u&&!a.isAggregate(e))return!1;if(r.omitTranspose){if(o!==u)return e.y.type!==f.Type.NOMINAL&&e.y.type!==f.Type.ORDINAL||!i.isMeasure(e.x)?!(u||!o||e.x.type===f.Type.NOMINAL||e.x.type===f.Type.ORDINAL):!0;if(e.y.type===f.Type.TEMPORAL||e.x.type===f.Type.TEMPORAL){if(e.y.type===f.Type.TEMPORAL&&e.x.type!==f.Type.TEMPORAL)return!1}else if(e.x.field>e.y.field)return!1}return!0}function s(e,n,i){if(e.text)return u.rule.text(e,n,i);var a=!!e.x,o=!!e.y;return a!==o?t(e,n,i):a&&o?r(e,n,i):!1}var d;!function(e){function t(e,t,n,r){return a(e,t,n,r)?i.isMeasure(t)||i.cardinality(t,n)<=r.maxCardinalityForColor:!1}function n(e,t,n,r){return a(e,t,n,r)?r.omitShapeWithBin&&t.bin&&t.type===f.Type.QUANTITATIVE?!1:r.omitShapeWithTimeDimension&&t.timeUnit&&t.type===f.Type.TEMPORAL?!1:i.cardinality(t,n)<=r.maxCardinalityForShape:!1}function r(){return!0}function a(e,t,n,r){return!r.omitMultipleNonPositionalChannels||!(e.color||e.size||e.shape)}e.x=r,e.y=r,e.text=r,e.detail=r,e.size=a,e.row=r,e.column=r,e.color=t,e.shape=n}(d=e.channel||(e.channel={})),e.encoding=s}(d||(d={}))},{"../consts":7,"../util":20,"./marks":12,"vega-lite/src/aggregate":30,"vega-lite/src/channel":31,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/type":40}],11:[function(e,t,n){"use strict";var r=e("./aggregates"),i=e("./projections"),a=e("./projections"),o=e("./specs"),u=e("./encodings"),s=e("./marks");n.aggregates=r["default"],n.projections=i["default"],n.projections.key=a.key,n.specs=o["default"],n.encodings=u["default"],n.marks=s["default"]},{"./aggregates":9,"./encodings":10,"./marks":12,"./projections":13,"./specs":14}],12:[function(e,t,n){"use strict";function r(e,t,n){return n.markList.filter(function(r){var i=null===o.getEncodingMappingError({mark:r,encoding:e});return i&&f[r](e,t,n)})}var i=e("vega-lite/src/encoding"),a=e("vega-lite/src/fielddef"),o=e("vega-lite/src/validate"),u=e("vega-lite/src/type"),s=e("vega-lite/src/scale"),c=e("vega-lite/src/aggregate"),l=e("../util");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var f;!function(e){function t(e,t,n){return a.cardinality(e,t)<=n.maxCardinalityForFacets}function n(e,n,r){return e.row&&!t(e.row,n,r)?!1:!e.column||t(e.column,n,r)}function r(e,t,r){if(!n(e,t,r))return!1;if(e.x&&e.y){var i=a.isDimension(e.x),o=a.isDimension(e.y);if(i&&o){if(e.shape)return!1;if(e.color&&a.isDimension(e.color))return!1}}else{if(r.omitDotPlot)return!1;if(r.omitTranspose&&e.y)return!1;if(r.omitDotPlotWithExtraEncoding&&l.keys(e).length>1)return!1}return!0}function o(e,t,n){if(e.x||e.y){if(i.isAggregate(e))return!1;var r=a.isDimension(e.x),o=a.isDimension(e.y);return!r&&(!e.y||o)||!o&&(!e.x||r)}return!1}function f(e,t,r){if(!n(e,t,r))return!1;if(!e.x&&!e.y)return!1;if(r.omitSizeOnBar&&void 0!==e.size)return!1;if(r.omitLengthForLogScale){if(e.x&&e.x.scale&&e.x.scale.type===s.ScaleType.LOG)return!1;if(e.y&&e.y.scale&&e.y.scale.type===s.ScaleType.LOG)return!1}var i=(!e.x||void 0===e.x.aggregate)!=(!e.y||void 0===e.y.aggregate);if(i){var o=(!e.x||a.isDimension(e.x))!==(!e.y||a.isDimension(e.y));if(o){var u;return u=e.x?e.x.aggregate:e.y.aggregate,!(r.omitStackedAverage&&u===c.AggregateOp.MEAN&&e.color)}}return!1}function d(e,t,r){return n(e,t,r)?e.x.type===u.Type.TEMPORAL&&!!e.x.timeUnit&&e.y.type===u.Type.QUANTITATIVE&&!!e.y.aggregate:!1}function p(e,t,r){if(!n(e,t,r))return!1;if(!d(e,t,r))return!1;if(r.omitLengthForLogScale){if(e.x&&e.x.scale&&e.x.scale.type===s.ScaleType.LOG)return!1;if(e.y&&e.y.scale&&e.y.scale.type===s.ScaleType.LOG)return!1}return!(r.omitStackedAverage&&e.y.aggregate===c.AggregateOp.MEAN&&e.color)}function E(e,t,n){return(e.row||e.column)&&e.text&&e.text.aggregate&&!e.x&&!e.y&&!e.size&&(!n.alwaysGenerateTableAsHeatmap||!e.color)}e.point=r,e.tick=o,e.bar=f,e.line=d,e.area=p,e.text=E}(f=n.rule||(n.rule={}))},{"../util":20,"vega-lite/src/aggregate":30,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/scale":37,"vega-lite/src/type":40,"vega-lite/src/validate":42}],13:[function(e,t,n){"use strict";function r(e,t,n){void 0===n&&(n={}),n=u.extend({},s.DEFAULT_PROJECTION_OPT,n);var r=[],f=[],d=[],p=!1,E=!1,g={};e.forEach(function(e,i){if(g[e.field]=i,e.selected)r.push(e),l(e)||e.type===c.TEMPORAL?p=!0:E=!0;else if(e.selected!==!1&&!o.isCount(e)){if(o.isDimension(e)&&!n.maxCardinalityForAutoAddOrdinal&&o.cardinality(e,t,15)>n.maxCardinalityForAutoAddOrdinal)return;f.push(e)}}),f.sort(i(p,E,g));var O=u.chooseKorLess(f,n.maxAdditionalVariables);return O.forEach(function(e){var t=r.concat(e);if(t.length>0){if(n.omitDotPlot&&1===t.length)return;d.push(t)}}),d.forEach(function(e){e.key=a(e)}),d}function i(e,t,n){return function(t,r){return t.type!==r.type?e?f[r.type]-f[t.type]:f[t.type]-f[r.type]:n[t.field]-n[r.field]}}function a(e){return e.map(function(e){return o.isCount(e)?"count":e.field}).join(",")}var o=e("vega-lite/src/fielddef"),u=e("../util"),s=e("../consts"),c=e("vega-lite/src/type"),l=o.isDimension;Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r;var f={nominal:0,ordinal:0,temporal:2,quantitative:3};n.key=a},{"../consts":7,"../util":20,"vega-lite/src/fielddef":34,"vega-lite/src/type":40}],14:[function(e,t,n){"use strict";function r(e,t,n,r,a){void 0===r&&(r={}),r=u.extend({},s.DEFAULT_SPEC_OPTION,r);var o=c["default"]([],t,n,r);return a?o.reduce(function(e,t){var a=d.shortenEncoding(t);return e[a]=i([],t,n,r),e},{}):o.reduce(function(e,t){return i(e,t,n,r)},e)}function i(e,t,n,r){return l["default"](t,n,r).forEach(function(i){var o=u.duplicate({encoding:t,config:r.config});o.mark=i,o.data=r.data,o=a(o,n,r);var s=f.encoding(o,n,r);o._info=s,e.push(o)}),e}function a(e,t,n){"text"===e.mark&&n.alwaysGenerateTableAsHeatmap&&(e.encoding.color=e.encoding.text);var r=e.encoding;return["x","y"].forEach(function(e){var n=r[e];if(n&&o.isMeasure(n)&&!o.isCount(n)){var i=t[n.field];i&&i.stdev/i.mean<.01&&(n.scale={zero:!1})}}),e}var o=e("vega-lite/src/fielddef"),u=e("../util"),s=e("../consts"),c=e("./encodings"),l=e("./marks"),f=e("../rank/rank"),d=e("vega-lite/src/shorthand");Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../consts":7,"../rank/rank":15,"../util":20,"./encodings":10,"./marks":12,"vega-lite/src/fielddef":34,"vega-lite/src/shorthand":38}],15:[function(e,t,n){"use strict";var r=e("./rankEncodings");n.encoding=r["default"]},{"./rankEncodings":16}],16:[function(e,t,n){"use strict";function r(e,t,r,o){var l=[],E=s.keys(e.encoding),g=e.mark,O=e.encoding,h=i.reduce(e.encoding,function(e,t,n){var r=c.shortenFieldDef(t),i=e[r]=e[r]||[];return i.push({channel:n,fieldDef:t}),e},{});return s.forEach(h,function(i){var u=i.map(function(e){return e.channel+c.ASSIGN+c.shortenFieldDef(e.fieldDef)+" "+(o&&o[e.fieldDef.field]?"[x]":"[ ]")}),s=i.map(function(i){var u=a.isDimension(i.fieldDef)?n.dimensionScore:n.measureScore,s=u(i.fieldDef,i.channel,e.mark,t,r);return!o||o[i.fieldDef.field]?s:Math.pow(s,.125)});l.push({reason:u.join(" | "),score:Math.max.apply(null,s)})}),"text"===g||O.x&&O.y&&u(O.x)!==u(O.y)&&l.push({reason:"OxQ plot",score:.8}),E.length>1&&g!==f.Mark.TEXT&&(O.x&&O.y||O.geo||O.text||l.push({reason:"unused position",score:d})),l.push({reason:"mark="+g,score:p[g]}),{score:l.reduce(function(e,t){return e*t.score},1),features:l}}var i=e("vega-lite/src/encoding"),a=e("vega-lite/src/fielddef"),o=e("vega-lite/src/channel"),u=a.isDimension,s=e("../util"),c=e("vega-lite/src/shorthand"),l=e("vega-lite/src/type"),f=e("vega-lite/src/mark"),d=.5,p={line:.99,area:.98,bar:.97,tick:.96,point:.95,circle:.94,square:.94,text:.8},E={},g={},O=.1,h=.01;E.minor=.01,E.pos=1,E.Y_T=.8,E.facet_text=1,E.facet_good=.675,E.facet_ok=.55,E.facet_bad=.4,E.color_good=.7,E.color_ok=.65,E.color_bad=.3,E.color_stack=.6,E.shape=.6,E.detail=.5,E.bad=O,E.terrible=h,g.pos=1,g.size=.6,g.color=.5,g.text=.4,g.bad=O,g.terrible=h,n.dimensionScore=function(e,t,n,r,i){var u=a.cardinality(e,r);switch(t){case o.X:return e.type===l.Type.NOMINAL||e.type===l.Type.ORDINAL?E.pos-E.minor:E.pos;case o.Y:return e.type===l.Type.NOMINAL||e.type===l.Type.ORDINAL?E.pos-E.minor:e.type===l.Type.TEMPORAL?E.Y_T:E.pos-E.minor;case o.COLUMN:return"text"===n?E.facet_text:u<=i.maxGoodCardinalityForFacets?E.facet_good:u<=i.maxCardinalityForFacets?E.facet_ok:E.facet_bad;case o.ROW:return"text"===n?E.facet_text:(u<=i.maxGoodCardinalityForFacets?E.facet_good:u<=i.maxCardinalityForFacets?E.facet_ok:E.facet_bad)-E.minor;case o.COLOR:var s=e.bin&&e.type===l.Type.QUANTITATIVE||e.timeUnit&&e.type===l.Type.TEMPORAL,c=n===f.Mark.BAR||n===f.Mark.AREA;return s?E.color_bad:c?E.color_stack:u<=i.maxGoodCardinalityForColor?E.color_good:u<=i.maxCardinalityForColor?E.color_ok:E.color_bad;case o.SHAPE:return u<=i.maxCardinalityForShape?E.shape:h;case o.DETAIL:return E.detail}return h},n.dimensionScore.consts=E,n.measureScore=function(e,t,n,r,i){switch(t){case o.X:return g.pos;case o.Y:return g.pos;case o.SIZE:return n===f.Mark.BAR||n===f.Mark.TEXT||n===f.Mark.LINE?O:g.size;case o.COLOR:return g.color;case o.TEXT:return g.text}return O},n.measureScore.consts=g,Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=r},{"../util":20,"vega-lite/src/channel":31,"vega-lite/src/encoding":33,"vega-lite/src/fielddef":34,"vega-lite/src/mark":36,"vega-lite/src/shorthand":38,"vega-lite/src/type":40}],17:[function(e,t,n){"use strict";n.DEFAULT_MARKTYPE_TRANSITIONS={AREA_BAR:{name:"AREA_BAR",cost:1},AREA_LINE:{name:"AREA_LINE",cost:1},AREA_POINT:{name:"AREA_POINT",cost:1},AREA_TEXT:{name:"AREA_TEXT",cost:1},AREA_TICK:{name:"AREA_TICK",cost:1},BAR_LINE:{name:"BAR_LINE",cost:1},BAR_POINT:{name:"BAR_POINT",cost:1},BAR_TEXT:{name:"BAR_TEXT",cost:1},BAR_TICK:{name:"BAR_TICK",cost:1},LINE_POINT:{name:"LINE_POINT",cost:1},LINE_TEXT:{name:"LINE_TEXT",cost:1},LINE_TICK:{name:"LINE_TICK",cost:1},POINT_TEXT:{name:"POINT_TEXT",cost:1},POINT_TICK:{name:"POINT_TICK",cost:1},TEXT_TICK:{name:"TEXT_TICK",cost:1}},n.DEFAULT_MARKTYPE_TRANSITION_LIST=["AREA_BAR","AREA_LINE","AREA_POINT","AREA_TEXT","AREA_TICK","BAR_LINE","BAR_POINT","BAR_TEXT","BAR_TICK","LINE_POINT","LINE_TEXT","LINE_TICK","POINT_TEXT","POINT_TICK","TEXT_TICK"],n.DEFAULT_TRANSFORM_TRANSITIONS={SCALE:{name:"SCALE",cost:1},SORT:{name:"SORT",cost:1},BIN:{name:"BIN",cost:1},AGGREGATE:{name:"AGGREGATE",cost:1},SETTYPE:{name:"SETTYPE",cost:1},ADD_FILTER:{name:"ADD_FILTER",cost:1},REMOVE_FILTER:{name:"REMOVE_FILTER",cost:1},MODIFY_FILTER:{name:"MODIFY_FILTER",cost:1}},n.DEFAULT_TRANSFORM_TRANSITION_LIST=["SCALE","SORT","BIN","AGGREGATE","SETTYPE","ADD_FILTER","REMOVE_FILTER","MODIFY_FILTER"],n.CHANNELS_WITH_TRANSITION_ORDER=["x","y","color","shape","size","row","column","text"],n.DEFAULT_ENCODING_TRANSITIONS={ADD_X:{name:"ADD_X",cost:1},ADD_Y:{name:"ADD_Y",cost:1},ADD_COLOR:{name:"ADD_COLOR",cost:1},ADD_SHAPE:{name:"ADD_SHAPE",cost:1},ADD_SIZE:{name:"ADD_SIZE",cost:1},ADD_ROW:{name:"ADD_ROW",cost:1},ADD_COLUMN:{name:"ADD_COLUMN",cost:1},ADD_X_COUNT:{name:"ADD_X_COUNT",cost:1},ADD_Y_COUNT:{name:"ADD_Y_COUNT",cost:1},ADD_COLOR_COUNT:{name:"ADD_COLOR_COUNT",cost:1},ADD_SHAPE_COUNT:{name:"ADD_SHAPE_COUNT",cost:1},ADD_SIZE_COUNT:{name:"ADD_SIZE_COUNT",cost:1},ADD_ROW_COUNT:{name:"ADD_ROW_COUNT",cost:1},ADD_COLUMN_COUNT:{name:"ADD_COLUMN_COUNT",cost:1},REMOVE_X_COUNT:{name:"REMOVE_X_COUNT",cost:1},REMOVE_Y_COUNT:{name:"REMOVE_Y_COUNT",cost:1},REMOVE_COLOR_COUNT:{name:"REMOVE_COLOR_COUNT",cost:1},REMOVE_SHAPE_COUNT:{name:"REMOVE_SHAPE_COUNT",cost:1},REMOVE_SIZE_COUNT:{name:"REMOVE_SIZE_COUNT",cost:1},REMOVE_ROW_COUNT:{name:"REMOVE_ROW_COUNT",cost:1},REMOVE_COLUMN_COUNT:{name:"REMOVE_COLUMN_COUNT",cost:1},REMOVE_X:{name:"REMOVE_X",cost:1},REMOVE_Y:{name:"REMOVE_Y",cost:1},REMOVE_COLOR:{name:"REMOVE_COLOR",cost:1},REMOVE_SHAPE:{name:"REMOVE_SHAPE",cost:1},REMOVE_SIZE:{name:"REMOVE_SIZE",cost:1},REMOVE_ROW:{name:"REMOVE_ROW",cost:1},REMOVE_COLUMN:{name:"REMOVE_COLUMN",cost:1},MODIFY_X:{name:"MODIFY_X",cost:1},MODIFY_Y:{name:"MODIFY_Y",cost:1},MODIFY_COLOR:{name:"MODIFY_COLOR",cost:1},MODIFY_SHAPE:{name:"MODIFY_SHAPE",cost:1},MODIFY_SIZE:{name:"MODIFY_SIZE",cost:1},MODIFY_ROW:{name:"MODIFY_ROW",cost:1},MODIFY_COLUMN:{name:"MODIFY_COLUMN",cost:1},MODIFY_X_ADD_COUNT:{name:"MODIFY_X_ADD_COUNT",cost:1},MODIFY_Y_ADD_COUNT:{name:"MODIFY_Y_ADD_COUNT",cost:1},MODIFY_COLOR_ADD_COUNT:{name:"MODIFY_COLOR_ADD_COUNT",cost:1},MODIFY_SHAPE_ADD_COUNT:{name:"MODIFY_SHAPE_ADD_COUNT",cost:1},MODIFY_SIZE_ADD_COUNT:{name:"MODIFY_SIZE_ADD_COUNT",cost:1},MODIFY_ROW_ADD_COUNT:{name:"MODIFY_ROW_ADD_COUNT",cost:1},MODIFY_COLUMN_ADD_COUNT:{name:"MODIFY_COLUMN_ADD_COUNT",cost:1},MODIFY_X_REMOVE_COUNT:{name:"MODIFY_X_REMOVE_COUNT",cost:1},MODIFY_Y_REMOVE_COUNT:{name:"MODIFY_Y_REMOVE_COUNT",cost:1},MODIFY_COLOR_REMOVE_COUNT:{name:"MODIFY_COLOR_REMOVE_COUNT",cost:1},MODIFY_SHAPE_REMOVE_COUNT:{name:"MODIFY_SHAPE_REMOVE_COUNT",cost:1},MODIFY_SIZE_REMOVE_COUNT:{name:"MODIFY_SIZE_REMOVE_COUNT",cost:1},MODIFY_ROW_REMOVE_COUNT:{name:"MODIFY_ROW_REMOVE_COUNT",cost:1},MODIFY_COLUMN_REMOVE_COUNT:{name:"MODIFY_COLUMN_REMOVE_COUNT",cost:1},MOVE_X_COLUMN:{name:"MOVE_X_COLUMN",cost:1},MOVE_X_ROW:{name:"MOVE_X_ROW",cost:1},MOVE_X_SIZE:{name:"MOVE_X_SIZE",cost:1},MOVE_X_SHAPE:{name:"MOVE_X_SHAPE",cost:1},MOVE_X_COLOR:{name:"MOVE_X_COLOR",cost:1},MOVE_X_Y:{name:"MOVE_X_Y",cost:1},MOVE_Y_COLUMN:{name:"MOVE_Y_COLUMN",cost:1},MOVE_Y_ROW:{name:"MOVE_Y_ROW",cost:1},MOVE_Y_SIZE:{name:"MOVE_Y_SIZE",cost:1},MOVE_Y_SHAPE:{name:"MOVE_Y_SHAPE",cost:1},MOVE_Y_COLOR:{name:"MOVE_Y_COLOR",cost:1},MOVE_Y_X:{name:"MOVE_Y_X",cost:1},MOVE_COLOR_COLUMN:{name:"MOVE_COLOR_COLUMN",cost:1},MOVE_COLOR_ROW:{name:"MOVE_COLOR_ROW",cost:1},MOVE_COLOR_SIZE:{name:"MOVE_COLOR_SIZE",cost:1},MOVE_COLOR_SHAPE:{name:"MOVE_COLOR_SHAPE",cost:1},MOVE_COLOR_Y:{name:"MOVE_COLOR_Y",cost:1},MOVE_COLOR_X:{name:"MOVE_COLOR_X",cost:1},MOVE_SHAPE_COLUMN:{name:"MOVE_SHAPE_COLUMN",cost:1},MOVE_SHAPE_ROW:{name:"MOVE_SHAPE_ROW",cost:1},MOVE_SHAPE_SIZE:{name:"MOVE_SHAPE_SIZE",cost:1},MOVE_SHAPE_COLOR:{name:"MOVE_SHAPE_COLOR",cost:1},MOVE_SHAPE_Y:{name:"MOVE_SHAPE_Y",cost:1},MOVE_SHAPE_X:{name:"MOVE_SHAPE_X",cost:1},MOVE_SIZE_COLUMN:{name:"MOVE_SIZE_COLUMN",cost:1},MOVE_SIZE_ROW:{name:"MOVE_SIZE_ROW",cost:1},MOVE_SIZE_SHAPE:{name:"MOVE_SIZE_SHAPE",cost:1},MOVE_SIZE_COLOR:{name:"MOVE_SIZE_COLOR",cost:1},MOVE_SIZE_Y:{name:"MOVE_SIZE_Y",cost:1},MOVE_SIZE_X:{name:"MOVE_SIZE_X",cost:1},MOVE_ROW_COLUMN:{name:"MOVE_ROW_COLUMN",cost:1},MOVE_ROW_SIZE:{name:"MOVE_ROW_SIZE",cost:1},MOVE_ROW_SHAPE:{name:"MOVE_ROW_SHAPE",cost:1},MOVE_ROW_COLOR:{name:"MOVE_ROW_COLOR",cost:1},MOVE_ROW_Y:{name:"MOVE_ROW_Y",cost:1},MOVE_ROW_X:{name:"MOVE_ROW_X",cost:1},MOVE_COLUMN_ROW:{name:"MOVE_COLUMN_ROW",cost:1},MOVE_COLUMN_SIZE:{name:"MOVE_COLUMN_SIZE",cost:1},MOVE_COLUMN_SHAPE:{name:"MOVE_COLUMN_SHAPE",cost:1},MOVE_COLUMN_COLOR:{name:"MOVE_COLUMN_COLOR",cost:1},MOVE_COLUMN_Y:{name:"MOVE_COLUMN_Y",cost:1},MOVE_COLUMN_X:{name:"MOVE_COLUMN_X",cost:1},SWAP_X_Y:{name:"SWAP_X_Y",cost:1},SWAP_ROW_COLUMN:{name:"SWAP_ROW_COLUMN",cost:1},ceiling:{cost:3,alternatingCost:3}},n.TRANSITIONS={marktypeTransitions:n.DEFAULT_MARKTYPE_TRANSITIONS,transformTransitions:n.DEFAULT_TRANSFORM_TRANSITIONS,encodingTransitions:n.DEFAULT_ENCODING_TRANSITIONS}},{}],18:[function(e,t,n){"use strict";function r(e,t,n,r){var s=[],c=r||u.DEFAULT_ENCODING_TRANSITIONS,l=o.keys(e.encoding),f=n;l.forEach(function(r){var a=o.duplicate(e),u="REMOVE_"+r.toUpperCase();u+="*"===e.encoding[r].field?"_COUNT":"";var d=c[u],p=o.duplicate(t);p.push(a.encoding[r]);var E=o.duplicate(n);E.push(r),delete a.encoding[r],i(a)&&(a.transition=d,a.additionalFields=p,a.additionalChannels=E,s.push(a)),t.forEach(function(l,f){a=o.duplicate(e),u="MODIFY_"+r.toUpperCase(),"*"===e.encoding[r].field&&"*"!==l.field?u+="_REMOVE_COUNT":"*"!==e.encoding[r].field&&"*"===l.field&&(u+="_ADD_COUNT"),d=c[u],p=o.duplicate(t),p.splice(f,1),p.push(a.encoding[r]),E=o.duplicate(n),a.encoding[r]=l,i(a)&&(a.transition=d,a.additionalFields=p,a.additionalChannels=E,s.push(a))}),l.forEach(function(u){if(!(u===r||["x","y"].indexOf(r)<0||["x","y"].indexOf(u)<0)){a=o.duplicate(e),d=c.SWAP_X_Y,p=o.duplicate(t),E=o.duplicate(n);var l=o.duplicate(a.encoding[r]);a.encoding[r]=a.encoding[u],a.encoding[u]=l,i(a)&&(a.transition=d,a.additionalFields=p,a.additionalChannels=E,s.push(a))}}),f.forEach(function(u,l){a=o.duplicate(e);var f=(r+"_"+u).toUpperCase();d=c["MOVE_"+f],p=o.duplicate(t),E=o.duplicate(n),E.splice(l,1),E.push(r),a.encoding[u]=o.duplicate(a.encoding[r]),delete a.encoding[r],i(a)&&(a.transition=d,a.additionalFields=p,a.additionalChannels=E,s.push(a))})}),f.forEach(function(r,a){t.forEach(function(u,l){var f=o.duplicate(e),d="ADD_"+r.toUpperCase();d+="*"===u.field?"_COUNT":"";var p=c[d],E=o.duplicate(t),g=o.duplicate(n);E.splice(l,1),f.encoding[r]=u,g.splice(a,1),i(f)&&(f.transition=p,f.additionalFields=E,f.additionalChannels=g,s.push(f))})});for(var d=0;d<s.length;d+=1)for(var p=d+1;p<s.length;p+=1)a(s[d].encoding,s[p].encoding)&&(s.splice(p,1),p-=1);return s}function i(e){return!0}function a(e,t){var n=o.keys(e),r=o.keys(t);if(n.length!==r.length)return!1;for(var i=o.union(n,r),a=0;a<i.length;a+=1){var u=i[a];if(!e[u]||!t[u])return!1;if(e[u].field!==t[u].field)return!1}return!0}var o=e("../util"),u=e("./def");n.neighbors=r,n.sameEncoding=a},{"../util":20,"./def":17}],19:[function(e,t,n){"use strict";function r(e,t,n){var r=i(e,t,n),a=0;return a=r.marktype.reduce(function(e,t){return e+=t.cost},a),a=r.transform.reduce(function(e,t){return e+=t.cost},a),a=r.encoding.reduce(function(e,t){return e+=t.cost},a)}function i(e,t,n,r){var i=n?n.marktypeTransitions:O.DEFAULT_MARKTYPE_TRANSITIONS,u=n?n.transformTransitions:O.DEFAULT_TRANSFORM_TRANSITIONS,s=n?n.encodingTransitions:O.DEFAULT_ENCODING_TRANSITIONS,c={marktype:a(e,t,i),transform:o(e,t,u,r),encoding:f(e,t,s)},l=0;return l=c.marktype.reduce(function(e,t){return e+=t.cost},l),l=c.transform.reduce(function(e,t){return e+=t.cost},l),l=c.encoding.reduce(function(e,t){return e+=t.cost},l),c.cost=l,c}function a(e,t,n){var r=[],i=n||O.DEFAULT_MARKTYPE_TRANSITIONS;if(e.mark===t.mark)return r;var a=[e.mark.toUpperCase(),t.mark.toUpperCase()].sort().join("_");return r.push(g.duplicate(i[a])),r}function o(e,t,n,r){var i,a,o=n||O.DEFAULT_TRANSFORM_TRANSITIONS,c=[];p.CHANNELS.forEach(function(n){["SCALE","SORT","AGGREGATE","BIN","SETTYPE"].map(function(s){"SETTYPE"===s&&o[s]?i=l(e,t,n,o):o[s]&&(i=u(e,t,n,s,o,r)),i&&(a=g.find(c,function(e){return e.name},i),a>=0?c[a].details.push(i.detail):(c.push(i),c[c.length-1].details=[],c[c.length-1].details.push(i.detail),delete c[c.length-1].detail))})});var f={MODIFY_FILTER:o.MODIFY_FILTER,ADD_FILTER:o.ADD_FILTER,REMOVE_FILTER:o.REMOVE_FILTER};return c=c.concat(s(e,t,f))}function u(e,t,n,r,i,a){var o,u,s,c=!1,l=!1;return e.encoding[n]&&e.encoding[n][r.toLowerCase()]&&(c=!0,u=e.encoding[n][r.toLowerCase()]),t.encoding[n]&&t.encoding[n][r.toLowerCase()]&&(l=!0,s=t.encoding[n][r.toLowerCase()]),a&&a.omitIncludeRawDomain&&"SCALE"===r&&(u&&u.includeRawDomain&&(delete u.includeRawDomain,0===Object.keys(u).length&&JSON.stringify(u)===JSON.stringify({})&&(c=!1)),s&&s.includeRawDomain&&(delete s.includeRawDomain,0===Object.keys(s).length&&JSON.stringify(s)===JSON.stringify({})&&(l=!1))),c&&l&&!g.rawEqual(u,s)?(o=g.duplicate(i[r]),o.detail={type:"modified",channel:n},o):c&&!l?(o=g.duplicate(i[r]),o.detail={type:"removed",channel:n},o):!c&&l?(o=g.duplicate(i[r]),o.detail={type:"added",channel:n},o):void 0}function s(e,t,n){var r=[],i=[],a=[];e.transform&&e.transform.filter&&(r=c(e.transform.filter)),t.transform&&t.transform.filter&&(i=c(t.transform.filter));var o=g.arrayDiff(i,r),u=g.arrayDiff(r,i);if(0===r.length&&0===i.length)return a;for(var s=!1,l=0;l<o.length;l++){for(var f=0;f<u.length;f++)if(g.rawEqual(o[l].field,u[f].field)){var d=g.duplicate(n.MODIFY_FILTER);d.detail={},u[f].op!==o[f].op&&(d.detail.op=u[f].op+", "+o[f].op),u[f].value!==o[f].value&&(d.detail.value=u[f].value+", "+o[f].value),a.push(d),o.splice(l,1),u.splice(f,1),s=!0;break}s&&(s=!1,l--)}for(var l=0;l<o.length;l++){var d=g.duplicate(n.ADD_FILTER);d.detail=g.duplicate(o[l]),a.push(d)}for(var l=0;l<u.length;l++){var d=g.duplicate(n.REMOVE_FILTER);d.detail=g.duplicate(u[l]),a.push(d)}return a}function c(e){function t(e){function t(e,n,r){return"||"===e.operator||"&&"===e.operator?(n=t(e.left,n,r+1),n=t(e.right,n,r+1)):["==","===","!==","!=","<","<=",">",">="].indexOf(e.operator)>=0&&(e.depth=r,n.push(e)),n}var n=E.parse,r=n(e);return t(r.body[0].expression,[],0).map(function(e){return{field:e.left.property.name,op:e.operator,value:e.right.raw}})}var n=[];if(g.isArray(e))e.map(function(e){g.isString(e)?n=n.concat(t(e)):d.isRangeFilter(e)?n.push({field:e.field,op:"range",value:JSON.stringify(e.range)}):d.isInFilter(e)?n.push({field:e.field,op:"in",value:JSON.stringify(e["in"])}):d.isEqualFilter(e)?n.push({field:e.field,op:"equal",value:e.equal.toString()}):console.log("WARN: cannot parse filters.")});else{var r=e;g.isString(r)?n=n.concat(t(r)):d.isRangeFilter(r)?n.push({field:r.field,op:"range",value:JSON.stringify(r.range)}):d.isInFilter(r)?n.push({field:r.field,op:"in",value:JSON.stringify(r["in"])}):d.isEqualFilter(r)?n.push({field:r.field,op:"equal",value:r.equal.toString()}):console.log("WARN: cannot parse filters.")}return n}function l(e,t,n,r){var i;return e.encoding[n]&&t.encoding[n]&&t.encoding[n].field===e.encoding[n].field&&t.encoding[n].type!==e.encoding[n].type?(i=g.duplicate(r.SETTYPE),i.detail={type:e.encoding[n].type+"_"+t.encoding[n].type,channel:n},i):void 0}function f(e,t,n){function r(e){var t=1/0,n=-1;return e.forEach(function(e,r){e.distance<t&&(t=e.distance,n=r)}),e.splice(n,1)[0]}if(h.sameEncoding(e.encoding,t.encoding))return[];var i,a=g.keys(e.encoding),o=a.map(function(t){return e.encoding[t]}),u=g.keys(t.encoding),s=u.map(function(e){return t.encoding[e]}),c=g.unionObjectArray(s,o,function(e){return e.field+"_"+e.type}),l=g.arrayDiff(u,a),f=h.neighbors(e,c,l,n).map(function(t){return t.distance=t.transition.cost,t.prev=[e],t});e.distance=0,e.prev=[];for(var d=[e];f.length>0&&(i=r(f),!h.sameEncoding(i.encoding,t.encoding));){if(i.distance>=n.ceiling.cost)return[{name:"OVER_THE_CEILING",cost:n.ceiling.alternatingCost}];var p=h.neighbors(i,i.additionalFields,i.additionalChannels,n);p.forEach(function(e){for(var t,n=0;n<d.length;n+=1)if(h.sameEncoding(d[n].encoding,e.encoding))return;for(var n=0;n<f.length;n+=1)if(h.sameEncoding(f[n].encoding,e.encoding)){t=f[n];break}t?t.distance>i.distance+e.transition.cost&&(t.distance=i.distance+e.transition.cost,t.prev=i.prev.concat([i])):(e.distance=i.distance+e.transition.cost,e.prev=i.prev.concat([i]),f.push(e))}),d.push(i)}if(!h.sameEncoding(i.encoding,t.encoding)&&0===f.length)return[{name:"UNREACHABLE",cost:999}];var E=i.prev.map(function(e){return e.transition}).filter(function(e){return e});return E.push(i.transition),E}var d=e("vega-lite/src/filter"),p=e("vega-lite/src/channel"),E=e("vega-expression"),g=e("../util"),O=e("./def"),h=e("./neighbor");n.transitionCost=r,n.transitionSet=i,n.marktypeTransitionSet=a,n.transformTransitionSet=o,n.transformBasic=u,n.filterTransitionSet=s,n.filters=c,n.transformSettype=l,n.encodingTransitionSet=f},{"../util":20,"./def":17,"./neighbor":18,"vega-expression":5,"vega-lite/src/channel":31,"vega-lite/src/filter":35}],20:[function(e,t,n){"use strict";function r(e){return"string"==typeof e||e instanceof String}function i(e,t){return-1!==t.indexOf(e)}function a(e,t){return JSON.stringify(e,null,t)}function o(e){var t,n=[];for(t in e)n.push(t);return n}function u(e){return JSON.parse(JSON.stringify(e))}function s(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)t.call(n,e[r],r,e)}function c(e,t){var n,r=0;for(n in e)if(t(e[n],n,r++))return!0;return!1}function l(e,t,n,r){return 0===n?e.map(t):e.map(function(e){var i=l(e,t,n-1);return r?i.filter(d):i})}function f(e,t,n,r){return 0===n?e.reduce(t,[]):e.map(function(e){var i=f(e,t,n-1);return r?i.filter(d):i})}function d(e){return!n.isArray(e)||e.length>0}function p(e,t){return void 0!==e.value?t.push(e.value):(e.left&&p(e.left,t),e.right&&p(e.right,t)),t}function E(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i,a,o=1,u=arguments.length;u>o;++o){i=arguments[o];for(a in i)e[a]=i[a]}return e}function g(e,t){var n={};return e.forEach(function(e){n[e]=!0}),t.forEach(function(e){n[e]=!0}),o(n)}function O(e){for(var t=[[]],n=0;n<e.length;n++)for(var r=0,i=t.length;i>r;r++)t.push(t[r].concat(e[n]));return t}function h(e,t){for(var n=[[]],r=0;r<e.length;r++)for(var i=0,a=n.length;a>i;i++){var o=n[i].concat(e[r]);o.length<=t&&n.push(o)}return n}function m(e,t){for(var n=[[]],r=[],i=0;i<e.length;i++)for(var a=0,o=n.length;o>a;a++){var u=n[a].concat(e[i]);u.length<t?n.push(u):u.length===t&&r.push(u)}return r}function T(e,t){for(var n=[],r=0;r<e.length;r++)for(var i=0;i<t.length;i++)n.push(e[r].concat(t[i]));return n}function A(e,t,n){for(var r=0;r<e.length;r+=1)if(t(n)===t(e[r]))return r;return-1}function y(e,t){return JSON.stringify(e)===JSON.stringify(t)}function v(e,t,n){return e.filter(function(e){return n?A(t,n,e)<0:A(t,JSON.stringify,e)<0})}function N(e,t,n){return v(e,t,n).concat(t)}n.isArray=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},n.isString=r,n.isin=i,n.json=a,n.keys=o,n.duplicate=u,n.forEach=s,n.any=c,n.nestedMap=l,n.nestedReduce=f,n.nonEmpty=d,n.traverse=p,n.extend=E,n.union=g;var S;!function(e){function t(e){return(e?o(e):[]).reduce(function(t,n){return t[n]=e[n],t},Object.create({}))}e.getOpt=t}(S=n.gen||(n.gen={})),n.powerset=O,n.chooseKorLess=h,n.chooseK=m,n.cross=T,n.find=A,n.rawEqual=y,n.arrayDiff=v,n.unionObjectArray=N},{}],21:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e("d3-time",["exports"],i):i(t.d3_time={})}(this,function(e){"use strict";function t(e,n,r,o){function u(t){return e(t=new Date(+t)),t}return u.floor=u,u.round=function(t){var r=new Date(+t),i=new Date(t-1);return e(r),e(i),n(i,1),i-t>t-r?r:i},u.ceil=function(t){return e(t=new Date(t-1)),n(t,1),t},u.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},u.range=function(t,r,i){var a=[];if(t=new Date(t-1),r=new Date(+r),i=null==i?1:Math.floor(i),!(r>t&&i>0))return a;for(n(t,1),e(t),r>t&&a.push(new Date(+t));n(t,i),e(t),r>t;)a.push(new Date(+t));return a},u.filter=function(r){return t(function(t){for(;e(t),!r(t);)t.setTime(t-1)},function(e,t){for(;--t>=0;)for(;n(e,1),!r(e););})},r&&(u.count=function(t,n){return i.setTime(+t),a.setTime(+n),e(i),e(a),Math.floor(r(i,a))},u.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?u.filter(o?function(t){return o(t)%e===0}:function(t){return u.count(0,t)%e===0}):u:null}),u}function n(e){return t(function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-e)%7)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/6048e5})}function r(e){return t(function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/6048e5;
})}var i=new Date,a=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var u=t(function(e){e.setMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getSeconds()}),s=t(function(e){e.setSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getMinutes()}),c=t(function(e){e.setMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),l=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5},function(e){return e.getDate()-1}),f=n(0),d=n(1),p=n(2),E=n(3),g=n(4),O=n(5),h=n(6),m=t(function(e){e.setHours(0,0,0,0),e.setDate(1)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),T=t(function(e){e.setHours(0,0,0,0),e.setMonth(0,1)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}),A=t(function(e){e.setUTCMilliseconds(0)},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),y=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+6e4*t)},function(e,t){return(t-e)/6e4},function(e){return e.getUTCMinutes()}),v=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),N=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),S=r(0),M=r(1),_=r(2),I=r(3),R=r(4),C=r(5),D=r(6),L=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCDate(1)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),U=t(function(e){e.setUTCHours(0,0,0,0),e.setUTCMonth(0,1)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}),x=o.range,b=u.range,w=s.range,P=c.range,k=l.range,F=f.range,Y=d.range,V=p.range,H=E.range,G=g.range,X=O.range,j=h.range,W=f.range,B=m.range,Q=T.range,q=o,K=x,Z=A.range,z=y.range,J=v.range,$=N.range,ee=S.range,te=M.range,ne=_.range,re=I.range,ie=R.range,ae=C.range,oe=D.range,ue=S.range,se=L.range,ce=U.range,le="0.1.1";e.version=le,e.milliseconds=x,e.seconds=b,e.minutes=w,e.hours=P,e.days=k,e.sundays=F,e.mondays=Y,e.tuesdays=V,e.wednesdays=H,e.thursdays=G,e.fridays=X,e.saturdays=j,e.weeks=W,e.months=B,e.years=Q,e.utcMillisecond=q,e.utcMilliseconds=K,e.utcSeconds=Z,e.utcMinutes=z,e.utcHours=J,e.utcDays=$,e.utcSundays=ee,e.utcMondays=te,e.utcTuesdays=ne,e.utcWednesdays=re,e.utcThursdays=ie,e.utcFridays=ae,e.utcSaturdays=oe,e.utcWeeks=ue,e.utcMonths=se,e.utcYears=ce,e.millisecond=o,e.second=u,e.minute=s,e.hour=c,e.day=l,e.sunday=f,e.monday=d,e.tuesday=p,e.wednesday=E,e.thursday=g,e.friday=O,e.saturday=h,e.week=f,e.month=m,e.year=T,e.utcSecond=A,e.utcMinute=y,e.utcHour=v,e.utcDay=N,e.utcSunday=S,e.utcMonday=M,e.utcTuesday=_,e.utcWednesday=I,e.utcThursday=R,e.utcFriday=C,e.utcSaturday=D,e.utcWeek=S,e.utcMonth=L,e.utcYear=U,e.interval=t})},{}],22:[function(e,t,n){function r(e){if(!e)throw Error("Missing binning options.");var t,n,r,u,s,c,l,f=e.maxbins||15,d=e.base||10,p=Math.log(d),E=e.div||[5,2],g=e.min,O=e.max,h=O-g;if(e.step)t=e.step;else if(e.steps)t=e.steps[Math.min(e.steps.length-1,i(e.steps,h/f,0,e.steps.length))];else{for(n=Math.ceil(Math.log(f)/p),r=e.minstep||0,t=Math.max(r,Math.pow(d,Math.round(Math.log(h)/p)-n));Math.ceil(h/t)>f;)t*=d;for(c=0;c<E.length;++c)s=t/E[c],s>=r&&f>=h/s&&(t=s)}return s=Math.log(t),u=s>=0?0:~~(-s/p)+1,l=Math.pow(d,-u-1),g=Math.min(g,Math.floor(g/t+l)*t),O=Math.ceil(O/t)*t,{start:g,stop:O,step:t,unit:{precision:u},value:a,index:o}}function i(e,t,n,r){for(;r>n;){var i=n+r>>>1;c.cmp(e[i],t)<0?n=i+1:r=i}return n}function a(e){return this.step*Math.floor(e/this.step+f)}function o(e){return Math.floor((e-this.start)/this.step+f)}function u(e){return this.unit.date(a.call(this,e))}function s(e){return o.call(this,this.unit.unit(e))}var c=e("../util"),l=e("../time"),f=1e-15;r.date=function(e){if(!e)throw Error("Missing date binning options.");var t=e.utc?l.utc:l,n=e.min,i=e.max,a=e.maxbins||20,o=e.minbins||4,c=+i-+n,f=e.unit?t[e.unit]:t.find(c,o,a),d=r({min:null!=f.min?f.min:f.unit(n),max:null!=f.max?f.max:f.unit(i),maxbins:a,minstep:f.minstep,steps:f.step});return d.unit=f,d.index=s,e.raw||(d.value=u),d},t.exports=r},{"../time":24,"../util":25}],23:[function(e,t,n){var r=e("./util"),i=t.exports;i.repeat=function(e,t){var n,r=Array(t);for(n=0;t>n;++n)r[n]=e;return r},i.zeros=function(e){return i.repeat(0,e)},i.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("Infinite range");var r,i=[],a=-1;if(0>n)for(;(r=e+n*++a)>t;)i.push(r);else for(;(r=e+n*++a)<t;)i.push(r);return i},i.random={},i.random.uniform=function(e,t){void 0===t&&(t=void 0===e?1:e,e=0);var n=t-e,r=function(){return e+n*Math.random()};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r>=e&&t>=r?1/n:0},r.cdf=function(r){return e>r?0:r>t?1:(r-e)/n},r.icdf=function(t){return t>=0&&1>=t?e+t*n:NaN},r},i.random.integer=function(e,t){void 0===t&&(t=e,e=0);var n=t-e,r=function(){return e+Math.floor(n*Math.random())};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(r){return r===Math.floor(r)&&r>=e&&t>r?1/n:0},r.cdf=function(r){var i=Math.floor(r);return e>i?0:i>=t?1:(i-e+1)/n},r.icdf=function(t){return t>=0&&1>=t?e-1+Math.floor(t*n):NaN},r},i.random.normal=function(e,t){e=e||0,t=t||1;var n,r=function(){var r,i,a=0,o=0;if(void 0!==n)return a=n,n=void 0,a;do a=2*Math.random()-1,o=2*Math.random()-1,r=a*a+o*o;while(0===r||r>1);return i=Math.sqrt(-2*Math.log(r)/r),n=e+o*i*t,e+a*i*t};return r.samples=function(e){return i.zeros(e).map(r)},r.pdf=function(n){var r=Math.exp(Math.pow(n-e,2)/(-2*Math.pow(t,2)));return 1/(t*Math.sqrt(2*Math.PI))*r},r.cdf=function(n){var r,i=(n-e)/t,a=Math.abs(i);if(a>37)r=0;else{var o,u=Math.exp(-a*a/2);7.07106781186547>a?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,r=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,r/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,r=u/o/2.506628274631)}return i>0?1-r:r},r.icdf=function(n){if(0>=n||n>=1)return NaN;var r=2*n-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(r,2))/2,o=Math.log(1-r*r)/i,u=(r>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return e+t*Math.SQRT2*u},r},i.random.bootstrap=function(e,t){var n=e.filter(r.isValid),a=n.length,o=t?i.random.normal(0,t):null,u=function(){return n[~~(Math.random()*a)]+(o?o():0)};return u.samples=function(e){return i.zeros(e).map(u)},u}},{"./util":25}],24:[function(e,t,n){function r(e){return c.setTime(+e),c}function i(e,t,n,r,i,a){var o={type:e,date:t,unit:n};return r?o.step=r:o.minstep=1,null!=i&&(o.min=i),null!=a&&(o.max=a),o}function a(e,t,n,r,a,o){return i(e,function(e){return t.offset(n,e)},function(e){return t.count(n,e)},r,a,o)}function o(e,t,n,r){var i,a,o,u=E[0];for(i=1,a=E.length;a>i;++i)if(u=E[i],t>u[0]){if(o=t/u[0],o>r)return e[E[i-1][1]];if(o>=n)return e[u[1]]}return e[E[a-1][1]]}function u(e){var t,n,r={};for(t=0,n=e.length;n>t;++t)r[e[t].type]=e[t];return r.find=function(t,n,r){return o(e,t,n,r)},r}var s=e("d3-time"),c=new Date,l=new Date(0,0,1).setFullYear(0),f=new Date(Date.UTC(0,0,1)).setUTCFullYear(0),d=[a("second",s.second,l),a("minute",s.minute,l),a("hour",s.hour,l),a("day",s.day,l,[1,7]),a("month",s.month,l,[1,3,6]),a("year",s.year,l),i("seconds",function(e){return new Date(1970,0,1,0,0,e)},function(e){return r(e).getSeconds()},null,0,59),i("minutes",function(e){return new Date(1970,0,1,0,e)},function(e){return r(e).getMinutes()},null,0,59),i("hours",function(e){return new Date(1970,0,1,e)},function(e){return r(e).getHours()},null,0,23),i("weekdays",function(e){return new Date(1970,0,4+e)},function(e){return r(e).getDay()},[1],0,6),i("dates",function(e){return new Date(1970,0,e)},function(e){return r(e).getDate()},[1],1,31),i("months",function(e){return new Date(1970,e%12,1)},function(e){return r(e).getMonth()},[1],0,11)],p=[a("second",s.utcSecond,f),a("minute",s.utcMinute,f),a("hour",s.utcHour,f),a("day",s.utcDay,f,[1,7]),a("month",s.utcMonth,f,[1,3,6]),a("year",s.utcYear,f),i("seconds",function(e){return new Date(Date.UTC(1970,0,1,0,0,e))},function(e){return r(e).getUTCSeconds()},null,0,59),i("minutes",function(e){return new Date(Date.UTC(1970,0,1,0,e))},function(e){return r(e).getUTCMinutes()},null,0,59),i("hours",function(e){return new Date(Date.UTC(1970,0,1,e))},function(e){return r(e).getUTCHours()},null,0,23),i("weekdays",function(e){return new Date(Date.UTC(1970,0,4+e))},function(e){return r(e).getUTCDay()},[1],0,6),i("dates",function(e){return new Date(Date.UTC(1970,0,e))},function(e){return r(e).getUTCDate()},[1],1,31),i("months",function(e){return new Date(Date.UTC(1970,e%12,1))},function(e){return r(e).getUTCMonth()},[1],0,11)],E=[[31536e6,5],[7776e6,4],[2592e6,4],[12096e5,3],[6048e5,3],[1728e5,3],[864e5,3],[432e5,2],[216e5,2],[108e5,2],[36e5,2],[18e5,1],[9e5,1],[3e5,1],[6e4,1],[3e4,0],[15e3,0],[5e3,0],[1e3,0]];t.exports=u(d),t.exports.utc=u(p)},{"d3-time":21}],25:[function(e,t,n){(function(e){function n(e,t){var n,r="";for(n=0;e>n;++n)r+=t;return r}function r(e,t,n){var r=0,i=e.split(s);return e=n?(i=i.reverse()).filter(function(e){return r+=e.length,t>=r}).reverse():i.filter(function(e){return r+=e.length,t>=r}),e.length?e.join("").trim():i[0].slice(0,t)}var i=t.exports,a="__name__";i.namedfunc=function(e,t){return t[a]=e,t},i.name=function(e){return null==e?null:e[a]},i.identity=function(e){return e},i["true"]=i.namedfunc("true",function(){return!0}),i["false"]=i.namedfunc("false",function(){return!1}),i.duplicate=function(e){return JSON.parse(JSON.stringify(e))},i.equal=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},i.extend=function(e){for(var t,n,r=1,i=arguments.length;i>r;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e},i.length=function(e){return null!=e&&null!=e.length?e.length:null},i.keys=function(e){var t,n=[];for(t in e)n.push(t);return n},i.vals=function(e){var t,n=[];for(t in e)n.push(e[t]);return n},i.toMap=function(e,t){return(t=i.$(t))?e.reduce(function(e,n){return e[t(n)]=1,e},{}):e.reduce(function(e,t){return e[t]=1,e},{})},i.keystr=function(e){var t=e.length;if(!t)return"";for(var n=String(e[0]),r=1;t>r;++r)n+="|"+String(e[r]);return n};var o=Object.prototype.toString;i.isObject=function(e){return e===Object(e)},i.isFunction=function(e){return"[object Function]"===o.call(e)},i.isString=function(e){return"string"==typeof value||"[object String]"===o.call(e)},i.isArray=Array.isArray||function(e){return"[object Array]"===o.call(e)},i.isNumber=function(e){return"number"==typeof e||"[object Number]"===o.call(e)},i.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==o.call(e)},i.isDate=function(e){return"[object Date]"===o.call(e)},i.isValid=function(e){return null!=e&&e===e},i.isBuffer="function"==typeof e&&e.isBuffer||i["false"],i.number=function(e){return null==e||""===e?null:+e},i["boolean"]=function(e){return null==e||""===e?null:"false"===e?!1:!!e},i.date=function(e,t){var n=t?t:Date;return null==e||""===e?null:n.parse(e)},i.array=function(e){return null!=e?i.isArray(e)?e:[e]:[]},i.str=function(e){return i.isArray(e)?"["+e.map(i.str)+"]":i.isObject(e)||i.isString(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e};var u=/\[(.*?)\]|[^.\[]+/g;i.field=function(e){return String(e).match(u).map(function(e){return"["!==e[0]?e:"'"!==e[1]&&'"'!==e[1]?e.slice(1,-1):e.slice(2,-2).replace(/\\(["'])/g,"$1")})},i.accessor=function(e){return null==e||i.isFunction(e)?e:i.namedfunc(e,Function("x","return x["+i.field(e).map(i.str).join("][")+"];"))},i.$=i.accessor,i.mutator=function(e){var t;return i.isString(e)&&(t=i.field(e)).length>1?function(e,n){for(var r=0;r<t.length-1;++r)e=e[t[r]];e[t[r]]=n}:function(t,n){t[e]=n}},i.$func=function(e,t){return function(n){n=i.$(n)||i.identity;var r=e+(i.name(n)?"_"+i.name(n):"");return i.namedfunc(r,function(e){return t(n(e))})}},i.$valid=i.$func("valid",i.isValid),i.$length=i.$func("length",i.length),i.$in=function(e,t){e=i.$(e);var n=i.isArray(t)?i.toMap(t):t;return function(t){return!!n[e(t)]}},i.comparator=function(e){var t=[];return void 0===e&&(e=[]),e=i.array(e).map(function(e){var n=1;return"-"===e[0]?(n=-1,e=e.slice(1)):"+"===e[0]&&(n=1,e=e.slice(1)),t.push(n),i.accessor(e)}),function(n,r){var a,o,u,s;for(a=0,o=e.length;o>a;++a)if(u=e[a],s=i.cmp(u(n),u(r)))return s*t[a];return 0}},i.cmp=function(e,t){return(t>e||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0)},i.numcmp=function(e,t){return e-t},i.stablesort=function(e,t,n){var r=e.reduce(function(e,t,r){return e[n(t)]=r,e},{});return e.sort(function(e,i){var a=t(e),o=t(i);return o>a?-1:a>o?1:r[n(e)]-r[n(i)]}),e},i.permute=function(e){for(var t,n,r=e.length;r;)n=Math.floor(Math.random()*r--),t=e[r],e[r]=e[n],e[n]=t},i.pad=function(e,t,r,i){i=i||" ";var a=t-e.length;if(0>=a)return e;switch(r){case"left":return n(a,i)+e;case"middle":case"center":return n(Math.floor(a/2),i)+e+n(Math.ceil(a/2),i);default:return e+n(a,i)}},i.truncate=function(e,t,n,i,a){var o=e.length;if(t>=o)return e;a=void 0!==a?String(a):"…";var u=Math.max(0,t-a.length);switch(n){case"left":return a+(i?r(e,u,1):e.slice(o-u));case"middle":case"center":var s=Math.ceil(u/2),c=Math.floor(u/2);return(i?r(e,s):e.slice(0,s))+a+(i?r(e,c,1):e.slice(o-c));default:return(i?r(e,u):e.slice(0,u))+a}};var s=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/}).call(this,e("buffer").Buffer)},{buffer:1}],26:[function(e,t,n){var r="undefined"!=typeof JSON?JSON:e("jsonify");t.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var o="boolean"==typeof t.cycles?t.cycles:!1,u=t.replacer||function(e,t){return t},s=t.cmp&&function(e){return function(t){return function(n,r){var i={key:n,value:t[n]},a={key:r,value:t[r]};return e(i,a)}}}(t.cmp),c=[];return function l(e,t,f,d){var p=n?"\n"+new Array(d+1).join(n):"",E=n?": ":":";if(f&&f.toJSON&&"function"==typeof f.toJSON&&(f=f.toJSON()),f=u.call(e,t,f),void 0!==f){if("object"!=typeof f||null===f)return r.stringify(f);if(i(f)){for(var g=[],O=0;O<f.length;O++){var h=l(f,O,f[O],d+1)||r.stringify(null);g.push(p+n+h)}return"["+g.join(",")+p+"]"}if(-1!==c.indexOf(f)){if(o)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}c.push(f);for(var m=a(f).sort(s&&s(f)),g=[],O=0;O<m.length;O++){var t=m[O],T=l(f,t,f[t],d+1);if(T){var A=r.stringify(t)+E+T;g.push(p+n+A)}}return c.splice(c.indexOf(f),1),"{"+g.join(",")+p+"}"}}({"":e},"",e,0)};var i=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},{jsonify:27}],27:[function(e,t,n){n.parse=e("./lib/parse"),n.stringify=e("./lib/stringify")},{"./lib/parse":28,"./lib/stringify":29}],28:[function(e,t,n){var r,i,a,o,u={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},s=function(e){throw{name:"SyntaxError",message:e,at:r,text:a}},c=function(e){return e&&e!==i&&s("Expected '"+e+"' instead of '"+i+"'"),i=a.charAt(r),r+=1,i},l=function(){var e,t="";for("-"===i&&(t="-",c("-"));i>="0"&&"9">=i;)t+=i,c();if("."===i)for(t+=".";c()&&i>="0"&&"9">=i;)t+=i;if("e"===i||"E"===i)for(t+=i,c(),"-"!==i&&"+"!==i||(t+=i,c());i>="0"&&"9">=i;)t+=i,c();return e=+t,isFinite(e)?e:void s("Bad number")},f=function(){var e,t,n,r="";if('"'===i)for(;c();){if('"'===i)return c(),r;if("\\"===i)if(c(),"u"===i){for(n=0,t=0;4>t&&(e=parseInt(c(),16),isFinite(e));t+=1)n=16*n+e;r+=String.fromCharCode(n)}else{if("string"!=typeof u[i])break;r+=u[i]}else r+=i}s("Bad string")},d=function(){for(;i&&" ">=i;)c()},p=function(){switch(i){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null}s("Unexpected '"+i+"'")},E=function(){var e=[];if("["===i){if(c("["),d(),"]"===i)return c("]"),e;for(;i;){if(e.push(o()),d(),"]"===i)return c("]"),e;c(","),d()}}s("Bad array")},g=function(){var e,t={};if("{"===i){if(c("{"),d(),"}"===i)return c("}"),t;for(;i;){if(e=f(),d(),c(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=o(),d(),"}"===i)return c("}"),t;c(","),d()}}s("Bad object")};o=function(){switch(d(),i){case"{":return g();case"[":return E();case'"':return f();case"-":return l();default:return i>="0"&&"9">=i?l():p()}},t.exports=function(e,t){var n;return a=e,r=0,i=" ",n=o(),d(),i&&s("Syntax error"),"function"==typeof t?function u(e,n){var r,i,a=e[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=u(a,r),void 0!==i?a[r]=i:delete a[r]);return t.call(e,n,a)}({"":n},""):n}},{}],29:[function(e,t,n){function r(e){return s.lastIndex=0,s.test(e)?'"'+e.replace(s,function(e){var t=c[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function i(e,t){var n,s,c,l,f,d=a,p=t[e];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(e)),"function"==typeof u&&(p=u.call(t,e,p)),typeof p){case"string":return r(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(a+=o,f=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,n=0;l>n;n+=1)f[n]=i(n,p)||"null";return c=0===f.length?"[]":a?"[\n"+a+f.join(",\n"+a)+"\n"+d+"]":"["+f.join(",")+"]",a=d,c}if(u&&"object"==typeof u)for(l=u.length,n=0;l>n;n+=1)s=u[n],"string"==typeof s&&(c=i(s,p),c&&f.push(r(s)+(a?": ":":")+c));else for(s in p)Object.prototype.hasOwnProperty.call(p,s)&&(c=i(s,p),c&&f.push(r(s)+(a?": ":":")+c));return c=0===f.length?"{}":a?"{\n"+a+f.join(",\n"+a)+"\n"+d+"}":"{"+f.join(",")+"}",a=d,c}}var a,o,u,s=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};t.exports=function(e,t,n){var r;if(a="",o="","number"==typeof n)for(r=0;n>r;r+=1)o+=" ";else"string"==typeof n&&(o=n);if(u=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return i("",{"":e})}},{}],30:[function(e,t,n){"use strict";!function(e){e[e.VALUES="values"]="VALUES",e[e.COUNT="count"]="COUNT",e[e.VALID="valid"]="VALID",e[e.MISSING="missing"]="MISSING",e[e.DISTINCT="distinct"]="DISTINCT",e[e.SUM="sum"]="SUM",e[e.MEAN="mean"]="MEAN",e[e.AVERAGE="average"]="AVERAGE",e[e.VARIANCE="variance"]="VARIANCE",e[e.VARIANCEP="variancep"]="VARIANCEP",e[e.STDEV="stdev"]="STDEV",e[e.STDEVP="stdevp"]="STDEVP",e[e.MEDIAN="median"]="MEDIAN",e[e.Q1="q1"]="Q1",e[e.Q3="q3"]="Q3",e[e.MODESKEW="modeskew"]="MODESKEW",e[e.MIN="min"]="MIN",e[e.MAX="max"]="MAX",e[e.ARGMIN="argmin"]="ARGMIN",e[e.ARGMAX="argmax"]="ARGMAX"}(n.AggregateOp||(n.AggregateOp={}));var r=n.AggregateOp;n.AGGREGATE_OPS=[r.VALUES,r.COUNT,r.VALID,r.MISSING,r.DISTINCT,r.SUM,r.MEAN,r.AVERAGE,r.VARIANCE,r.VARIANCEP,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MODESKEW,r.MIN,r.MAX,r.ARGMIN,r.ARGMAX],n.SUM_OPS=[r.COUNT,r.SUM,r.DISTINCT],n.SHARED_DOMAIN_OPS=[r.MEAN,r.AVERAGE,r.STDEV,r.STDEVP,r.MEDIAN,r.Q1,r.Q3,r.MIN,r.MAX]},{}],31:[function(e,t,n){"use strict";function r(e,t){return!!i(e)[t]}function i(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.DETAIL:case n.ORDER:case n.OPACITY:case n.ROW:case n.COLUMN:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,line:!0,area:!0,text:!0};case n.X2:case n.Y2:return{rule:!0,bar:!0,area:!0};case n.SIZE:return{point:!0,tick:!0,rule:!0,circle:!0,square:!0,bar:!0,text:!0};case n.SHAPE:return{point:!0};case n.TEXT:return{text:!0};case n.PATH:return{line:!0}}return{}}function a(e){switch(e){case n.X:case n.Y:case n.COLOR:case n.OPACITY:case n.LABEL:case n.DETAIL:return{measure:!0,dimension:!0};case n.ROW:case n.COLUMN:case n.SHAPE:return{measure:!1,dimension:!0};case n.X2:case n.Y2:case n.SIZE:case n.TEXT:return{measure:!0,dimension:!1};case n.PATH:return{measure:!1,dimension:!0}}throw new Error("Invalid encoding channel"+e)}function o(e){return!u.contains([n.DETAIL,n.PATH,n.TEXT,n.LABEL,n.ORDER],e)}var u=e("./util");!function(e){e[e.X="x"]="X",e[e.Y="y"]="Y",e[e.X2="x2"]="X2",e[e.Y2="y2"]="Y2",e[e.ROW="row"]="ROW",e[e.COLUMN="column"]="COLUMN",e[e.SHAPE="shape"]="SHAPE",e[e.SIZE="size"]="SIZE",e[e.COLOR="color"]="COLOR",e[e.TEXT="text"]="TEXT",e[e.DETAIL="detail"]="DETAIL",e[e.LABEL="label"]="LABEL",e[e.PATH="path"]="PATH",e[e.ORDER="order"]="ORDER",e[e.OPACITY="opacity"]="OPACITY"}(n.Channel||(n.Channel={}));var s=n.Channel;n.X=s.X,n.Y=s.Y,n.X2=s.X2,n.Y2=s.Y2,n.ROW=s.ROW,n.COLUMN=s.COLUMN,n.SHAPE=s.SHAPE,n.SIZE=s.SIZE,n.COLOR=s.COLOR,n.TEXT=s.TEXT,n.DETAIL=s.DETAIL,n.LABEL=s.LABEL,n.PATH=s.PATH,n.ORDER=s.ORDER,n.OPACITY=s.OPACITY,n.CHANNELS=[n.X,n.Y,n.X2,n.Y2,n.ROW,n.COLUMN,n.SIZE,n.SHAPE,n.COLOR,n.PATH,n.ORDER,n.OPACITY,n.TEXT,n.DETAIL,n.LABEL],n.UNIT_CHANNELS=u.without(n.CHANNELS,[n.ROW,n.COLUMN]),n.UNIT_SCALE_CHANNELS=u.without(n.UNIT_CHANNELS,[n.PATH,n.ORDER,n.DETAIL,n.TEXT,n.LABEL,n.X2,n.Y2]),n.NONSPATIAL_CHANNELS=u.without(n.UNIT_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.NONSPATIAL_SCALE_CHANNELS=u.without(n.UNIT_SCALE_CHANNELS,[n.X,n.Y,n.X2,n.Y2]),n.STACK_GROUP_CHANNELS=[n.COLOR,n.DETAIL,n.ORDER,n.OPACITY,n.SIZE],n.supportMark=r,n.getSupportedMark=i,n.getSupportedRole=a,n.hasScale=o},{"./util":41}],32:[function(e,t,n){"use strict";function r(e){return!!(e.year||e.quarter||e.month||e.date||e.day||e.hours||e.minutes||e.seconds||e.milliseconds)}function i(e){return s.isNumber(e)?e-1+"":(console.warn("Potentially invalid quarter",e),e)}function a(e){if(s.isNumber(e))return e-1+"";var t=e.toLowerCase(),r=n.MONTHS.indexOf(t);if(-1!==r)return r+"";var i=t.substr(0,3),a=n.SHORT_MONTHS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid month",e),e)}function o(e){if(s.isNumber(e))return e%7+"";var t=e.toLowerCase(),r=n.DAYS.indexOf(t);if(-1!==r)return r+"";var i=t.substr(0,3),a=n.SHORT_DAYS.indexOf(i);return-1!==a?a+"":(console.warn("Potentially invalid day",e),e)}function u(e,t){void 0===t&&(t=!1);var n=[];if(t&&void 0!==e.day)for(var r=0,u=["year","quarter","month","date"];r<u.length;r++){var c=u[r];if(void 0!==e[c]){console.warn("Dropping day from datetime",JSON.stringify(e),"as day cannot be combined with",c),e=s.duplicate(e),delete e.day;break}}if(void 0!==e.year?n.push(e.year):void 0!==e.day?n.push(2006):n.push(0),void 0!==e.month){var l=t?a(e.month):e.month;n.push(l)}else if(void 0!==e.quarter){var f=t?i(e.quarter):e.quarter;n.push(f+"*3")}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){var d=t?o(e.day):e.day;n.push(d+"+1")}else n.push(1);for(var p=0,E=["hours","minutes","seconds","milliseconds"];p<E.length;p++){var g=E[p];void 0!==e[g]?n.push(e[g]):n.push(0)}return"datetime("+n.join(", ")+")"}var s=e("./util");n.isDateTime=r,n.MONTHS=["january","february","march","april","may","june","july","august","september","october","november","december"],n.SHORT_MONTHS=n.MONTHS.map(function(e){return e.substr(0,3)}),n.DAYS=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],n.SHORT_DAYS=n.DAYS.map(function(e){return e.substr(0,3)}),n.dateTimeExpr=u},{"./util":41}],33:[function(e,t,n){"use strict";function r(e){var t=0;return e.color&&t++,e.opacity&&t++,e.size&&t++,e.shape&&t++,t}function i(e){return g.CHANNELS.filter(function(t){return a(e,t)})}function a(e,t){var n=e&&e[t];return n&&(void 0!==n.field||O.isArray(n)&&n.length>0)}function o(e){return O.some(g.CHANNELS,function(t){return!(!a(e,t)||!e[t].aggregate)})}function u(e){return e&&(!!e.x&&!!e.x2||!!e.y&&!!e.y2)}function s(e){var t=[];return g.CHANNELS.forEach(function(n){a(e,n)&&(O.isArray(e[n])?e[n].forEach(function(e){t.push(e)}):t.push(e[n]))}),t}function c(e,t,n){l(g.CHANNELS,e,t,n)}function l(e,t,n,r){var i=0;e.forEach(function(e){a(t,e)&&(O.isArray(t[e])?t[e].forEach(function(t){n.call(r,t,e,i++)}):n.call(r,t[e],e,i++))})}function f(e,t,n){return d(g.CHANNELS,e,t,n)}function d(e,t,n,r){var i=[];return e.forEach(function(e){a(t,e)&&(O.isArray(t[e])?t[e].forEach(function(t){i.push(n.call(r,t,e))}):i.push(n.call(r,t[e],e)))}),i}function p(e,t,n,r){return E(g.CHANNELS,e,t,n,r)}function E(e,t,n,r,i){var o=r;return g.CHANNELS.forEach(function(e){a(t,e)&&(O.isArray(t[e])?t[e].forEach(function(t){o=n.call(i,o,t,e)}):o=n.call(i,o,t[e],e))}),o}var g=e("./channel"),O=e("./util");n.countRetinal=r,n.channels=i,n.has=a,n.isAggregate=o,n.isRanged=u,n.fieldDefs=s,n.forEach=c,n.channelMappingForEach=l,n.map=f,n.channelMappingMap=d,n.reduce=p,n.channelMappingReduce=E},{"./channel":31,"./util":41}],34:[function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});var n=(t.datum?"datum.":"")+(t.prefn||""),r=t.suffix||"",i=e.field;if(s(e))return n+"count"+r;if(t.fn)return n+t.fn+"_"+i+r;if(!t.nofn&&e.bin){var a=t.binSuffix||(t.scaleType===d.ScaleType.ORDINAL?"_range":"_start");return n+"bin_"+i+a}return t.nofn||t.noAggregate||!e.aggregate?!t.nofn&&e.timeUnit?n+e.timeUnit+"_"+i+r:n+i:n+e.aggregate+"_"+i+r}function i(e){return g.contains([E.NOMINAL,E.ORDINAL],e.type)||!!e.bin||e.type===E.TEMPORAL&&!!e.timeUnit}function a(e){return e&&e.field&&i(e)}function o(e){return e&&e.field&&!i(e)}function u(){return{field:"*",aggregate:f.AggregateOp.COUNT,type:E.QUANTITATIVE}}function s(e){return e.aggregate===f.AggregateOp.COUNT}function c(e,t,n){void 0===n&&(n={});var r=t[e.field],i=e.type;if(e.bin){var a=e.bin,o="boolean"==typeof a?void 0:a.maxbins;void 0===o&&(o=10);var u=g.getbins(r,o);return(u.stop-u.start)/u.step}if(i===E.TEMPORAL){var s=e.timeUnit;switch(s){case p.TimeUnit.SECONDS:return 60;case p.TimeUnit.MINUTES:return 60;case p.TimeUnit.HOURS:return 24;case p.TimeUnit.DAY:return 7;case p.TimeUnit.DATE:return 31;case p.TimeUnit.MONTH:return 12;case p.TimeUnit.QUARTER:return 4;case p.TimeUnit.YEAR:var c=t["year_"+e.field];return c?c.distinct-(r.missing>0&&n[i]?1:0):null}}return e.aggregate?1:r.distinct-(r.missing>0&&n[i]?1:0)}function l(e,t){if(null!=e.title)return e.title;if(s(e))return t.countTitle;var n=e.aggregate||e.timeUnit||e.bin&&"bin";return n?n.toString().toUpperCase()+"("+e.field+")":e.field}var f=e("./aggregate"),d=e("./scale"),p=e("./timeunit"),E=e("./type"),g=e("./util");n.aggregate={type:"string","enum":f.AGGREGATE_OPS,supportedEnums:{quantitative:f.AGGREGATE_OPS,ordinal:["median","min","max"],nominal:[],temporal:["mean","median","min","max"],"":["count"]},supportedTypes:g.toMap([E.QUANTITATIVE,E.NOMINAL,E.ORDINAL,E.TEMPORAL,""])},n.field=r,n.isDimension=a,n.isMeasure=o,n.count=u,n.isCount=s,n.cardinality=c,n.title=l},{"./aggregate":30,"./scale":37,"./timeunit":39,"./type":40,"./util":41}],35:[function(e,t,n){"use strict";function r(e){return e&&!!e.field&&void 0!==e.equal}function i(e){return!!(e&&e.field&&o.isArray(e.range)&&2===e.range.length)}function a(e){return e&&!!e.field&&o.isArray(e["in"])}var o=e("./util");n.isEqualFilter=r,n.isRangeFilter=i,n.isInFilter=a},{"./util":41}],36:[function(e,t,n){"use strict";!function(e){e[e.AREA="area"]="AREA",e[e.BAR="bar"]="BAR",e[e.LINE="line"]="LINE",e[e.POINT="point"]="POINT",e[e.TEXT="text"]="TEXT",e[e.TICK="tick"]="TICK",e[e.RULE="rule"]="RULE",e[e.CIRCLE="circle"]="CIRCLE",e[e.SQUARE="square"]="SQUARE",e[e.ERRORBAR="errorBar"]="ERRORBAR"}(n.Mark||(n.Mark={}));var r=n.Mark;n.AREA=r.AREA,n.BAR=r.BAR,n.LINE=r.LINE,n.POINT=r.POINT,n.TEXT=r.TEXT,n.TICK=r.TICK,n.RULE=r.RULE,n.CIRCLE=r.CIRCLE,n.SQUARE=r.SQUARE,n.ERRORBAR=r.ERRORBAR,n.PRIMITIVE_MARKS=[n.AREA,n.BAR,n.LINE,n.POINT,n.TEXT,n.TICK,n.RULE,n.CIRCLE,n.SQUARE]},{}],37:[function(e,t,n){"use strict";!function(e){e[e.LINEAR="linear"]="LINEAR",e[e.LOG="log"]="LOG",e[e.POW="pow"]="POW",e[e.SQRT="sqrt"]="SQRT",e[e.QUANTILE="quantile"]="QUANTILE",e[e.QUANTIZE="quantize"]="QUANTIZE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TIME="time"]="TIME",e[e.UTC="utc"]="UTC"}(n.ScaleType||(n.ScaleType={}));n.ScaleType;!function(e){e[e.SECOND="second"]="SECOND",e[e.MINUTE="minute"]="MINUTE",e[e.HOUR="hour"]="HOUR",e[e.DAY="day"]="DAY",e[e.WEEK="week"]="WEEK",e[e.MONTH="month"]="MONTH",e[e.YEAR="year"]="YEAR"}(n.NiceTime||(n.NiceTime={}));n.NiceTime;n.defaultScaleConfig={round:!0,textBandWidth:90,bandSize:21,padding:1,useRawDomain:!1,opacity:[.3,.8],nominalColorRange:"category10",sequentialColorRange:["#AFC6A3","#09622A"],shapeRange:"shapes",fontSizeRange:[8,40],ruleSizeRange:[1,5],tickSizeRange:[1,20]},n.defaultFacetScaleConfig={round:!0,padding:16}},{}],38:[function(e,t,n){"use strict";function r(e){return"mark"+n.ASSIGN+e.mark+n.DELIM+a(e.encoding)}function i(e,t,r){var i=e.split(n.DELIM),a=i.shift().split(n.ASSIGN)[1].trim(),u=o(i.join(n.DELIM)),s={mark:E.Mark[a],encoding:u};return void 0!==t&&(s.data=t),void 0!==r&&(s.config=r),s}function a(e){return p.map(e,function(e,t){return t+n.ASSIGN+u(e)}).join(n.DELIM)}function o(e){return e.split(n.DELIM).reduce(function(e,t){var r=t.split(n.ASSIGN),i=r[0].trim(),a=r[1];return e[i]=c(a),e},{})}function u(e){return(e.aggregate?e.aggregate+n.FUNC:"")+(e.timeUnit?e.timeUnit+n.FUNC:"")+(e.bin?"bin"+n.FUNC:"")+(e.field||"")+n.TYPE+d.SHORT_TYPE[e.type]}function s(e,t){return void 0===t&&(t=n.DELIM),e.map(u).join(t)}function c(e){for(var t=e.split(n.TYPE),r={field:t[0].trim(),type:d.TYPE_FROM_SHORT_TYPE[t[1].trim()]},i=0;i<l.AGGREGATE_OPS.length;i++){var a=l.AGGREGATE_OPS[i];if(0===r.field.indexOf(a+"_")){r.field=r.field.substr(a.toString().length+1),a===l.AggregateOp.COUNT&&0===r.field.length&&(r.field="*"),r.aggregate=a;break}}for(var i=0;i<f.TIMEUNITS.length;i++){var o=f.TIMEUNITS[i];if(r.field&&0===r.field.indexOf(o+"_")){r.field=r.field.substr(r.field.length+1),r.timeUnit=o;break}}return r.field&&0===r.field.indexOf("bin_")&&(r.field=r.field.substr(4),r.bin=!0),r}var l=e("./aggregate"),f=e("./timeunit"),d=e("./type"),p=e("./encoding"),E=e("./mark");n.DELIM="|",n.ASSIGN="=",n.TYPE=",",n.FUNC="_",n.shorten=r,n.parse=i,n.shortenEncoding=a,n.parseEncoding=o,n.shortenFieldDef=u,n.shortenFieldDefs=s,n.parseFieldDef=c},{"./aggregate":30,"./encoding":33,"./mark":36,"./timeunit":39,"./type":40}],39:[function(e,t,n){"use strict";function r(e){return!!O[e]}function i(e){return!!h[e]}function a(e,t){var n=e.toString(),r=t.toString(),i=n.indexOf(r);return i>-1&&(t!==g.SECONDS||0===i||"i"!==n.charAt(i-1))}function o(e){switch(e){case g.HOURS:case g.DAY:case g.MONTH:case g.QUARTER:return p.ScaleType.ORDINAL}return p.ScaleType.TIME}function u(e,t){function r(e){return e===g.QUARTER?"floor(month("+i+")/3)":e+"("+i+")"}var i="datum."+t,o=n.SINGLE_TIMEUNITS.reduce(function(t,n){return a(e,n)&&(t[n]=r(n)),t},{});return o.day&&E.keys(o).length>1&&(console.warn('Time unit "'+e+'" is not supported. We are replacing it with ',(e+"").replace("day","date")+"."),delete o.day,o.date=r(g.DATE)),d.dateTimeExpr(o)}function s(e,t){if(E.contains([f.ROW,f.COLUMN,f.SHAPE,f.COLOR],t))return null;switch(e){case g.SECONDS:return E.range(0,60);case g.MINUTES:
return E.range(0,60);case g.HOURS:return E.range(0,24);case g.DAY:return E.range(0,7);case g.DATE:return E.range(1,32);case g.MONTH:return E.range(0,12);case g.QUARTER:return[0,3,6,9]}return null}function c(e){return e?a(e,g.SECONDS)?"second":a(e,g.MINUTES)?"minute":a(e,g.HOURS)?"hour":a(e,g.DAY)||a(e,g.DATE)?"day":a(e,g.MONTH)?"month":a(e,g.YEAR)?"year":void 0:void 0}function l(e,t,n){if(e){var r=[];a(e,g.YEAR)&&r.push(n?"%y":"%Y"),a(e,g.QUARTER)&&r.push("'}}Q{{"+t+" | quarter}}{{"+t+" | time:'"),a(e,g.MONTH)&&r.push(n?"%b":"%B"),a(e,g.DAY)?r.push(n?"%a":"%A"):a(e,g.DATE)&&r.push("%d");var i=[];a(e,g.HOURS)&&i.push("%H"),a(e,g.MINUTES)&&i.push("%M"),a(e,g.SECONDS)&&i.push("%S"),a(e,g.MILLISECONDS)&&i.push("%L");var o=[];if(r.length>0&&o.push(r.join("-")),i.length>0&&o.push(i.join(":")),o.length>0){var u="{{"+t+" | time:'"+o.join(" ")+"'}}";return u.replace(new RegExp("{{"+t+" \\| time:''}}","g"),"")}}}var f=e("./channel"),d=e("./datetime"),p=e("./scale"),E=e("./util");!function(e){e[e.YEAR="year"]="YEAR",e[e.MONTH="month"]="MONTH",e[e.DAY="day"]="DAY",e[e.DATE="date"]="DATE",e[e.HOURS="hours"]="HOURS",e[e.MINUTES="minutes"]="MINUTES",e[e.SECONDS="seconds"]="SECONDS",e[e.MILLISECONDS="milliseconds"]="MILLISECONDS",e[e.YEARMONTH="yearmonth"]="YEARMONTH",e[e.YEARMONTHDATE="yearmonthdate"]="YEARMONTHDATE",e[e.YEARMONTHDATEHOURS="yearmonthdatehours"]="YEARMONTHDATEHOURS",e[e.YEARMONTHDATEHOURSMINUTES="yearmonthdatehoursminutes"]="YEARMONTHDATEHOURSMINUTES",e[e.YEARMONTHDATEHOURSMINUTESSECONDS="yearmonthdatehoursminutesseconds"]="YEARMONTHDATEHOURSMINUTESSECONDS",e[e.HOURSMINUTES="hoursminutes"]="HOURSMINUTES",e[e.HOURSMINUTESSECONDS="hoursminutesseconds"]="HOURSMINUTESSECONDS",e[e.MINUTESSECONDS="minutesseconds"]="MINUTESSECONDS",e[e.SECONDSMILLISECONDS="secondsmilliseconds"]="SECONDSMILLISECONDS",e[e.QUARTER="quarter"]="QUARTER",e[e.YEARQUARTER="yearquarter"]="YEARQUARTER",e[e.QUARTERMONTH="quartermonth"]="QUARTERMONTH",e[e.YEARQUARTERMONTH="yearquartermonth"]="YEARQUARTERMONTH"}(n.TimeUnit||(n.TimeUnit={}));var g=n.TimeUnit;n.SINGLE_TIMEUNITS=[g.YEAR,g.QUARTER,g.MONTH,g.DAY,g.DATE,g.HOURS,g.MINUTES,g.SECONDS,g.MILLISECONDS];var O=n.SINGLE_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isSingleTimeUnit=r,n.MULTI_TIMEUNITS=[g.YEARQUARTER,g.YEARQUARTERMONTH,g.YEARMONTH,g.YEARMONTHDATE,g.YEARMONTHDATEHOURS,g.YEARMONTHDATEHOURSMINUTES,g.YEARMONTHDATEHOURSMINUTESSECONDS,g.QUARTERMONTH,g.HOURSMINUTES,g.HOURSMINUTESSECONDS,g.MINUTESSECONDS,g.SECONDSMILLISECONDS];var h=n.MULTI_TIMEUNITS.reduce(function(e,t){return e[t]=!0,e},{});n.isMultiTimeUnit=i,n.TIMEUNITS=n.SINGLE_TIMEUNITS.concat(n.MULTI_TIMEUNITS),n.containsTimeUnit=a,n.defaultScaleType=o,n.fieldExpr=u,n.rawDomain=s,n.smallestUnit=c,n.template=l},{"./channel":31,"./datetime":32,"./scale":37,"./util":41}],40:[function(e,t,n){"use strict";function r(e){var t=e;return n.TYPE_FROM_SHORT_TYPE[t.toUpperCase()]||t.toLowerCase()}!function(e){e[e.QUANTITATIVE="quantitative"]="QUANTITATIVE",e[e.ORDINAL="ordinal"]="ORDINAL",e[e.TEMPORAL="temporal"]="TEMPORAL",e[e.NOMINAL="nominal"]="NOMINAL"}(n.Type||(n.Type={}));var i=n.Type;n.QUANTITATIVE=i.QUANTITATIVE,n.ORDINAL=i.ORDINAL,n.TEMPORAL=i.TEMPORAL,n.NOMINAL=i.NOMINAL,n.SHORT_TYPE={quantitative:"Q",temporal:"T",nominal:"N",ordinal:"O"},n.TYPE_FROM_SHORT_TYPE={Q:n.QUANTITATIVE,T:n.TEMPORAL,O:n.ORDINAL,N:n.NOMINAL},n.getFullName=r},{}],41:[function(e,t,n){"use strict";function r(e,t){var n={};return t.forEach(function(t){e.hasOwnProperty(t)&&(n[t]=e[t])}),n}function i(e,t){var n=S.duplicate(e);return t.forEach(function(e){delete n[e]}),n}function a(e){return _.isString(e)||_.isNumber(e)||_.isBoolean(e)?String(e):v(e)}function o(e,t){return e.indexOf(t)>-1}function u(e,t){return e.filter(function(e){return!o(t,e)})}function s(e,t){return e.concat(u(t,e))}function c(e,t,n){if(e.forEach)e.forEach.call(n,t);else for(var r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function l(e,t,n,r){if(e.reduce)return e.reduce.call(r,t,n);for(var i in e)e.hasOwnProperty(i)&&(n=t.call(r,n,e[i],i,e));return n}function f(e,t,n){if(e.map)return e.map.call(n,t);var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(t.call(n,e[i],i,e));return r}function d(e,t){for(var n=0,r=0;r<e.length;r++)if(t(e[r],r,n++))return!0;return!1}function p(e,t){for(var n=0,r=0;r<e.length;r++)if(!t(e[r],r,n++))return!1;return!0}function E(e){return[].concat.apply([],e)}function g(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=O(e,t[r]);return e}function O(e,t){if("object"!=typeof t||null===t)return e;for(var n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&("object"!=typeof t[n]||null===t[n]?e[n]=t[n]:"object"!=typeof e[n]||null===e[n]?e[n]=g(t[n].constructor===Array?[]:{},t[n]):g(e[n],t[n]));return e}function h(e,t){return I({min:e.min,max:e.max,maxbins:t})}function m(e,t){var n,r,i,a=[],o={};for(r=0,i=e.length;i>r;++r)n=t?t(e[r]):e[r],n in o||(o[n]=1,a.push(e[r]));return a}function T(e){console.warn("[VL Warning]",e)}function A(e){console.error("[VL Error]",e)}function y(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t[n]&&e[n]&&t[n]!==e[n])return!0;return!1}var v=e("json-stable-stringify"),N=e("datalib/src/util");n.keys=N.keys,n.extend=N.extend,n.duplicate=N.duplicate,n.isArray=N.isArray,n.vals=N.vals,n.truncate=N.truncate,n.toMap=N.toMap,n.isObject=N.isObject,n.isString=N.isString,n.isNumber=N.isNumber,n.isBoolean=N.isBoolean;var S=e("datalib/src/util"),M=e("datalib/src/generate");n.range=M.range;var _=e("datalib/src/util");n.pick=r,n.omit=i,n.hash=a,n.contains=o,n.without=u,n.union=s,n.forEach=c,n.reduce=l,n.map=f,n.some=d,n.every=p,n.flatten=E,n.mergeDeep=g;var I=e("datalib/src/bins/bins");n.getbins=h,n.unique=m,n.warning=T,n.error=A,n.differ=y},{"datalib/src/bins/bins":22,"datalib/src/generate":23,"datalib/src/util":25,"json-stable-stringify":26}],42:[function(e,t,n){"use strict";function r(e,t,r){void 0===t&&(t=n.DEFAULT_REQUIRED_CHANNEL_MAP),void 0===r&&(r=n.DEFAULT_SUPPORTED_CHANNEL_TYPE);var i=e.mark,o=e.encoding,u=t[i],s=r[i];for(var c in u)if(!(u[c]in o))return'Missing encoding channel "'+u[c]+'" for mark "'+i+'"';for(var l in o)if(!s[l])return'Encoding channel "'+l+'" is not supported by mark type "'+i+'"';return i!==a.BAR||o.x||o.y?null:"Missing both x and y for bar"}var i=e("./util"),a=e("./mark");n.DEFAULT_REQUIRED_CHANNEL_MAP={text:["text"],line:["x","y"],area:["x","y"]},n.DEFAULT_SUPPORTED_CHANNEL_TYPE={bar:i.toMap(["row","column","x","y","size","color","detail"]),line:i.toMap(["row","column","x","y","color","detail"]),area:i.toMap(["row","column","x","y","color","detail"]),tick:i.toMap(["row","column","x","y","color","detail"]),circle:i.toMap(["row","column","x","y","color","size","detail"]),square:i.toMap(["row","column","x","y","color","size","detail"]),point:i.toMap(["row","column","x","y","color","size","detail","shape"]),text:i.toMap(["row","column","size","color","text"])},n.getEncodingMappingError=r},{"./mark":36,"./util":41}]},{},[8])(8)});
//# sourceMappingURL=compass.min.js.map
